{"/home/travis/build/npmtest/node-npmtest-manifoldjs/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":33}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_manifoldjs */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - init-before","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - init-after","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - init-after","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - init-after","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/lib.npmtest_manifoldjs.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/lib.npmtest_manifoldjs.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":55}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":61}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_manifoldjs */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - init-before","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_manifoldjs = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_manifoldjs = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":54}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":68},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-manifoldjs && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_manifoldjs */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - init-before","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_manifoldjs","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // init-after","    // run browser js-env code - init-after","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - init-after","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_manifoldjs.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_manifoldjs.rollup.js'] =","            local.assetsDict['/assets.npmtest_manifoldjs.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_manifoldjs.__dirname + '/lib.npmtest_manifoldjs.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/index.js","s":{"1":1,"2":1,"3":1,"4":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":14,"column":0},"end":{"line":14,"column":36}},"2":{"start":{"line":15,"column":0},"end":{"line":15,"column":53}},"3":{"start":{"line":18,"column":0},"end":{"line":38,"column":2}},"4":{"start":{"line":40,"column":0},"end":{"line":45,"column":2}}},"branchMap":{},"code":["﻿/**"," * **NOTE**: Use of manifoldjs as a library is now DEPRECATED. Use manifoldjs-lib instead."," *"," * The top-level API for `manifoldjs`. Provides access to the key libraries in"," * manifoldjs so you can write your own tools using `manifoldjs` as a library."," *"," * Usage"," * -----"," *"," *      var manifoldjs = require('manifoldjs');"," *"," */","","var lib = require('manifoldjs-lib');","var libValidationContants = lib.constants.validation;","","// Maintain compatibility with original constant definitions","var validationConstants = {","  levels:           libValidationContants.levels,","  codes:            libValidationContants.codes,","  manifestMembers:  libValidationContants.manifestMembers,","  platforms: {","    all: 'all',","    android: 'android',","    chrome: 'chrome',","    firefox: 'firefox',","    ios: 'ios',","    windows: 'windows'","  },","  platformDisplayNames: {","    all: 'All Platforms',","    android: 'Android',","    chrome: 'Chrome',","    firefox: 'Firefox',","    ios: 'iOS',","    windows: 'Windows'","  }","};","","module.exports = {","  manifestTools:        lib.manifestTools,","  validationConstants:  validationConstants,","  projectBuilder:       lib.projectBuilder,","  projectTools:         lib.projectTools","};",""],"l":{"14":1,"15":1,"18":1,"40":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/index.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":19,"column":2}}},"branchMap":{},"code":["'use strict';","","module.exports = {","  ProgressIndicator: require('./lib/progress'),","  PlatformBase: require('./lib/platformBase'),","  CustomError: require('./lib/customError'),","  constants: require('./lib/constants'),","  utils: require('./lib/utils'),","  validations: require('./lib/validations'),","  manifestTools: require('./lib/manifestTools'),","  projectBuilder: require('./lib/projectBuilder'),","  projectTools: require('./lib/projectTools'),","  platformTools: require('./lib/platformTools'),","  packageTools: require('./lib/packageTools'),","  processTools: require('./lib/processTools'),","  fileTools: require('./lib/fileTools'),","  iconTools: require('./lib/iconTools'),","  log: require('./lib/log')","};"],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/progress.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/progress.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":0,"29":1,"30":1,"31":1,"32":1,"33":1,"34":0,"35":1,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":1},"b":{"1":[0,0],"2":[0,0],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,0],"7":[1,1],"8":[0,0],"9":[1,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"ProgressIndicator","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":71}}},"2":{"name":"fillChars","line":15,"loc":{"start":{"line":15,"column":2},"end":{"line":15,"column":36}}},"3":{"name":"(anonymous_3)","line":16,"loc":{"start":{"line":16,"column":52},"end":{"line":16,"column":64}}},"4":{"name":"renderBar","line":21,"loc":{"start":{"line":21,"column":2},"end":{"line":21,"column":29}}},"5":{"name":"renderCompact","line":33,"loc":{"start":{"line":33,"column":2},"end":{"line":33,"column":33}}},"6":{"name":"(anonymous_6)","line":62,"loc":{"start":{"line":62,"column":27},"end":{"line":62,"column":39}}},"7":{"name":"update","line":66,"loc":{"start":{"line":66,"column":16},"end":{"line":66,"column":35}}},"8":{"name":"start","line":78,"loc":{"start":{"line":78,"column":15},"end":{"line":78,"column":36}}},"9":{"name":"(anonymous_9)","line":88,"loc":{"start":{"line":88,"column":26},"end":{"line":88,"column":38}}},"10":{"name":"reset","line":96,"loc":{"start":{"line":96,"column":15},"end":{"line":96,"column":33}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":5,"column":0},"end":{"line":8,"column":2}},"3":{"start":{"line":10,"column":0},"end":{"line":10,"column":31}},"4":{"start":{"line":13,"column":0},"end":{"line":110,"column":1}},"5":{"start":{"line":15,"column":2},"end":{"line":19,"column":3}},"6":{"start":{"line":16,"column":4},"end":{"line":18,"column":16}},"7":{"start":{"line":17,"column":6},"end":{"line":17,"column":18}},"8":{"start":{"line":21,"column":2},"end":{"line":31,"column":3}},"9":{"start":{"line":22,"column":4},"end":{"line":22,"column":28}},"10":{"start":{"line":23,"column":4},"end":{"line":25,"column":5}},"11":{"start":{"line":24,"column":6},"end":{"line":24,"column":29}},"12":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"13":{"start":{"line":28,"column":6},"end":{"line":28,"column":38}},"14":{"start":{"line":30,"column":4},"end":{"line":30,"column":77}},"15":{"start":{"line":33,"column":2},"end":{"line":35,"column":3}},"16":{"start":{"line":34,"column":4},"end":{"line":34,"column":42}},"17":{"start":{"line":37,"column":2},"end":{"line":37,"column":18}},"18":{"start":{"line":39,"column":2},"end":{"line":39,"column":35}},"19":{"start":{"line":41,"column":2},"end":{"line":41,"column":26}},"20":{"start":{"line":42,"column":2},"end":{"line":42,"column":36}},"21":{"start":{"line":43,"column":2},"end":{"line":43,"column":26}},"22":{"start":{"line":44,"column":2},"end":{"line":53,"column":3}},"23":{"start":{"line":46,"column":6},"end":{"line":46,"column":33}},"24":{"start":{"line":47,"column":6},"end":{"line":47,"column":29}},"25":{"start":{"line":48,"column":6},"end":{"line":48,"column":12}},"26":{"start":{"line":50,"column":6},"end":{"line":50,"column":34}},"27":{"start":{"line":51,"column":6},"end":{"line":51,"column":25}},"28":{"start":{"line":52,"column":6},"end":{"line":52,"column":12}},"29":{"start":{"line":55,"column":2},"end":{"line":55,"column":23}},"30":{"start":{"line":56,"column":2},"end":{"line":56,"column":16}},"31":{"start":{"line":58,"column":2},"end":{"line":60,"column":3}},"32":{"start":{"line":59,"column":4},"end":{"line":59,"column":26}},"33":{"start":{"line":62,"column":2},"end":{"line":64,"column":5}},"34":{"start":{"line":63,"column":4},"end":{"line":63,"column":17}},"35":{"start":{"line":66,"column":2},"end":{"line":76,"column":4}},"36":{"start":{"line":67,"column":4},"end":{"line":75,"column":5}},"37":{"start":{"line":70,"column":6},"end":{"line":74,"column":21}},"38":{"start":{"line":78,"column":2},"end":{"line":94,"column":4}},"39":{"start":{"line":79,"column":4},"end":{"line":79,"column":17}},"40":{"start":{"line":81,"column":4},"end":{"line":83,"column":5}},"41":{"start":{"line":82,"column":6},"end":{"line":82,"column":20}},"42":{"start":{"line":85,"column":4},"end":{"line":93,"column":5}},"43":{"start":{"line":86,"column":6},"end":{"line":86,"column":20}},"44":{"start":{"line":87,"column":6},"end":{"line":87,"column":20}},"45":{"start":{"line":88,"column":6},"end":{"line":91,"column":41}},"46":{"start":{"line":89,"column":8},"end":{"line":89,"column":32}},"47":{"start":{"line":90,"column":8},"end":{"line":90,"column":22}},"48":{"start":{"line":92,"column":6},"end":{"line":92,"column":20}},"49":{"start":{"line":96,"column":2},"end":{"line":109,"column":4}},"50":{"start":{"line":97,"column":4},"end":{"line":100,"column":5}},"51":{"start":{"line":98,"column":6},"end":{"line":98,"column":27}},"52":{"start":{"line":99,"column":6},"end":{"line":99,"column":19}},"53":{"start":{"line":102,"column":4},"end":{"line":106,"column":5}},"54":{"start":{"line":103,"column":6},"end":{"line":103,"column":25}},"55":{"start":{"line":104,"column":6},"end":{"line":104,"column":21}},"56":{"start":{"line":105,"column":6},"end":{"line":105,"column":20}},"57":{"start":{"line":108,"column":4},"end":{"line":108,"column":14}},"58":{"start":{"line":112,"column":0},"end":{"line":112,"column":32}},"59":{"start":{"line":114,"column":0},"end":{"line":114,"column":35}}},"branchMap":{"1":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"2":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"3":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":12},"end":{"line":41,"column":19}},{"start":{"line":41,"column":23},"end":{"line":41,"column":25}}]},"4":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":11},"end":{"line":42,"column":17}},{"start":{"line":42,"column":21},"end":{"line":42,"column":35}}]},"5":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":19}},{"start":{"line":43,"column":23},"end":{"line":43,"column":25}}]},"6":{"line":44,"type":"switch","locations":[{"start":{"line":45,"column":4},"end":{"line":48,"column":12}},{"start":{"line":49,"column":4},"end":{"line":52,"column":12}}]},"7":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":10},"end":{"line":44,"column":23}},{"start":{"line":44,"column":27},"end":{"line":44,"column":40}}]},"8":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":14},"end":{"line":50,"column":27}},{"start":{"line":50,"column":31},"end":{"line":50,"column":33}}]},"9":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":2},"end":{"line":58,"column":2}},{"start":{"line":58,"column":2},"end":{"line":58,"column":2}}]},"10":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]},"11":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":4},"end":{"line":81,"column":4}},{"start":{"line":81,"column":4},"end":{"line":81,"column":4}}]},"12":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":4}},{"start":{"line":85,"column":4},"end":{"line":85,"column":4}}]},"13":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":9},"end":{"line":91,"column":32}},{"start":{"line":91,"column":36},"end":{"line":91,"column":39}}]},"14":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":4},"end":{"line":97,"column":4}},{"start":{"line":97,"column":4},"end":{"line":97,"column":4}}]},"15":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":4},"end":{"line":102,"column":4}},{"start":{"line":102,"column":4},"end":{"line":102,"column":4}}]}},"code":["'use strict';","","var ansi = require('ansi'); ","","var style = {","  compact: 0,","  bar: 1","};","","var compactText = '\\u2014\\\\|/';","// var compactText = ' .*°*.';","","function ProgressIndicator (message, options, updateFrequency, stream) {  ","","  function fillChars (char, length) {","    return Array.apply(null, new Array(length)).map(function () {","      return char;","    }).join('');","  }","   ","  function renderBar (value) {","    var len = value % width;","    if (len === 0) {","      decrement = !decrement;","    }","    ","    if (decrement) {","      len = Math.abs(len - width + 1);      ","    }","    return '[' + fillChars('▓', len) + fillChars('░', width - len - 1) + ']';","  }","","  function renderCompact (value) {","    return '(' + compactText[value] + ')';","  }","","  var self = this;","    ","  var cursor, width, render, timer;","  ","  message = message || '';    ","  stream = stream || process.stdout;","  options = options || {};","  switch (options.style || style.compact) {","    case style.compact:","      width = compactText.length;","      render = renderCompact;","      break;","    case style.bar:","      width = options.width || 20;","      render = renderBar;","      break;","  }","  ","  var decrement = true;","  var index = 0;  ","  ","  if (stream.isTTY) {","    cursor = ansi(stream);","  }","","  process.on('beforeExit', function () {","    self.reset();","  });","","  self.update = function update () {","    if (cursor) {","      // savePosition & restorePosition do not seem to work in Mac OS X","      // replaced with horizontalAbsolute","      cursor //.savePosition()","            .write(message + render(index))","            // .restorePosition()","            .horizontalAbsolute(0)","            .reset();      ","    }","  };","  ","  self.start = function start (msg) {","    self.reset();","    ","    if (msg) {","      message = msg;","    }","    ","    if (cursor) {","      cursor.hide();","      self.update();","      timer = setInterval(function () {","        index = ++index % width;","        self.update();","      }, options.updateFrequency || 100);","      timer.unref();","    }    ","  };","  ","  self.reset = function reset () {","    if (timer) {","      clearInterval(timer);","      timer = null;      ","    }","    ","    if (cursor) {","      cursor.eraseLine();","      cursor.reset();","      cursor.show();","    }","    ","    index = 0;","  };","}","","ProgressIndicator.style = style;","","module.exports = ProgressIndicator;",""],"l":{"3":1,"5":1,"10":1,"13":1,"15":1,"16":0,"17":0,"21":1,"22":0,"23":0,"24":0,"27":0,"28":0,"30":0,"33":1,"34":0,"37":1,"39":1,"41":1,"42":1,"43":1,"44":1,"46":1,"47":1,"48":1,"50":0,"51":0,"52":0,"55":1,"56":1,"58":1,"59":1,"62":1,"63":0,"66":1,"67":0,"70":0,"78":1,"79":0,"81":0,"82":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"92":0,"96":1,"97":0,"98":0,"99":0,"102":0,"103":0,"104":0,"105":0,"108":0,"112":1,"114":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/platformBase.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/platformBase.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},"fnMap":{"1":{"name":"PlatformBase","line":15,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":55}}},"2":{"name":"(anonymous_2)","line":29,"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":71}}},"3":{"name":"(anonymous_3)","line":39,"loc":{"start":{"line":39,"column":13},"end":{"line":39,"column":54}}},"4":{"name":"(anonymous_4)","line":49,"loc":{"start":{"line":49,"column":17},"end":{"line":49,"column":58}}},"5":{"name":"(anonymous_5)","line":59,"loc":{"start":{"line":59,"column":14},"end":{"line":59,"column":55}}},"6":{"name":"(anonymous_6)","line":71,"loc":{"start":{"line":71,"column":28},"end":{"line":71,"column":59}}},"7":{"name":"(anonymous_7)","line":80,"loc":{"start":{"line":80,"column":54},"end":{"line":80,"column":71}}},"8":{"name":"(anonymous_8)","line":85,"loc":{"start":{"line":85,"column":11},"end":{"line":85,"column":23}}},"9":{"name":"(anonymous_9)","line":88,"loc":{"start":{"line":88,"column":57},"end":{"line":88,"column":74}}},"10":{"name":"(anonymous_10)","line":110,"loc":{"start":{"line":110,"column":26},"end":{"line":110,"column":46}}},"11":{"name":"(anonymous_11)","line":111,"loc":{"start":{"line":111,"column":49},"end":{"line":111,"column":65}}},"12":{"name":"(anonymous_12)","line":125,"loc":{"start":{"line":125,"column":25},"end":{"line":125,"column":51}}},"13":{"name":"(anonymous_13)","line":141,"loc":{"start":{"line":141,"column":25},"end":{"line":141,"column":61}}},"14":{"name":"(anonymous_14)","line":154,"loc":{"start":{"line":154,"column":23},"end":{"line":154,"column":73}}},"15":{"name":"(anonymous_15)","line":159,"loc":{"start":{"line":159,"column":28},"end":{"line":159,"column":40}}},"16":{"name":"(anonymous_16)","line":163,"loc":{"start":{"line":163,"column":38},"end":{"line":163,"column":54}}},"17":{"name":"(anonymous_17)","line":171,"loc":{"start":{"line":171,"column":48},"end":{"line":171,"column":67}}},"18":{"name":"(anonymous_18)","line":172,"loc":{"start":{"line":172,"column":26},"end":{"line":172,"column":44}}},"19":{"name":"(anonymous_19)","line":181,"loc":{"start":{"line":181,"column":10},"end":{"line":181,"column":22}}},"20":{"name":"(anonymous_20)","line":185,"loc":{"start":{"line":185,"column":16},"end":{"line":185,"column":32}}},"21":{"name":"(anonymous_21)","line":191,"loc":{"start":{"line":191,"column":14},"end":{"line":191,"column":31}}},"22":{"name":"(anonymous_22)","line":192,"loc":{"start":{"line":192,"column":22},"end":{"line":192,"column":38}}},"23":{"name":"(anonymous_23)","line":201,"loc":{"start":{"line":201,"column":13},"end":{"line":201,"column":28}}},"24":{"name":"(anonymous_24)","line":216,"loc":{"start":{"line":216,"column":27},"end":{"line":216,"column":69}}},"25":{"name":"(anonymous_25)","line":229,"loc":{"start":{"line":229,"column":63},"end":{"line":229,"column":78}}},"26":{"name":"(anonymous_26)","line":240,"loc":{"start":{"line":240,"column":29},"end":{"line":240,"column":75}}},"27":{"name":"(anonymous_27)","line":279,"loc":{"start":{"line":279,"column":15},"end":{"line":279,"column":42}}},"28":{"name":"(anonymous_28)","line":286,"loc":{"start":{"line":286,"column":14},"end":{"line":286,"column":41}}},"29":{"name":"(anonymous_29)","line":293,"loc":{"start":{"line":293,"column":14},"end":{"line":293,"column":41}}},"30":{"name":"(anonymous_30)","line":300,"loc":{"start":{"line":300,"column":15},"end":{"line":300,"column":42}}},"31":{"name":"(anonymous_31)","line":307,"loc":{"start":{"line":307,"column":15},"end":{"line":307,"column":42}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":0},"end":{"line":13,"column":31}},"3":{"start":{"line":15,"column":0},"end":{"line":310,"column":1}},"4":{"start":{"line":16,"column":2},"end":{"line":16,"column":18}},"5":{"start":{"line":18,"column":2},"end":{"line":18,"column":15}},"6":{"start":{"line":19,"column":2},"end":{"line":19,"column":19}},"7":{"start":{"line":20,"column":2},"end":{"line":20,"column":33}},"8":{"start":{"line":21,"column":2},"end":{"line":21,"column":25}},"9":{"start":{"line":22,"column":2},"end":{"line":22,"column":17}},"10":{"start":{"line":29,"column":2},"end":{"line":32,"column":4}},"11":{"start":{"line":30,"column":4},"end":{"line":31,"column":31}},"12":{"start":{"line":39,"column":2},"end":{"line":42,"column":4}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":81}},"14":{"start":{"line":41,"column":4},"end":{"line":41,"column":41}},"15":{"start":{"line":49,"column":2},"end":{"line":52,"column":4}},"16":{"start":{"line":50,"column":4},"end":{"line":50,"column":85}},"17":{"start":{"line":51,"column":4},"end":{"line":51,"column":41}},"18":{"start":{"line":59,"column":2},"end":{"line":62,"column":4}},"19":{"start":{"line":60,"column":4},"end":{"line":60,"column":82}},"20":{"start":{"line":61,"column":4},"end":{"line":61,"column":41}},"21":{"start":{"line":71,"column":2},"end":{"line":98,"column":4}},"22":{"start":{"line":73,"column":4},"end":{"line":76,"column":5}},"23":{"start":{"line":74,"column":6},"end":{"line":74,"column":73}},"24":{"start":{"line":75,"column":6},"end":{"line":75,"column":45}},"25":{"start":{"line":79,"column":4},"end":{"line":79,"column":72}},"26":{"start":{"line":80,"column":4},"end":{"line":97,"column":23}},"27":{"start":{"line":81,"column":6},"end":{"line":83,"column":7}},"28":{"start":{"line":82,"column":8},"end":{"line":82,"column":80}},"29":{"start":{"line":87,"column":6},"end":{"line":87,"column":59}},"30":{"start":{"line":88,"column":6},"end":{"line":95,"column":9}},"31":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"32":{"start":{"line":90,"column":10},"end":{"line":90,"column":83}},"33":{"start":{"line":93,"column":8},"end":{"line":93,"column":143}},"34":{"start":{"line":94,"column":8},"end":{"line":94,"column":29}},"35":{"start":{"line":110,"column":2},"end":{"line":112,"column":4}},"36":{"start":{"line":111,"column":4},"end":{"line":111,"column":99}},"37":{"start":{"line":111,"column":67},"end":{"line":111,"column":95}},"38":{"start":{"line":125,"column":2},"end":{"line":129,"column":4}},"39":{"start":{"line":127,"column":4},"end":{"line":127,"column":51}},"40":{"start":{"line":128,"column":4},"end":{"line":128,"column":59}},"41":{"start":{"line":141,"column":2},"end":{"line":149,"column":4}},"42":{"start":{"line":142,"column":4},"end":{"line":144,"column":5}},"43":{"start":{"line":143,"column":6},"end":{"line":143,"column":26}},"44":{"start":{"line":147,"column":4},"end":{"line":147,"column":51}},"45":{"start":{"line":148,"column":4},"end":{"line":148,"column":45}},"46":{"start":{"line":154,"column":2},"end":{"line":210,"column":4}},"47":{"start":{"line":155,"column":4},"end":{"line":155,"column":59}},"48":{"start":{"line":158,"column":4},"end":{"line":158,"column":34}},"49":{"start":{"line":159,"column":4},"end":{"line":209,"column":23}},"50":{"start":{"line":160,"column":6},"end":{"line":178,"column":7}},"51":{"start":{"line":161,"column":8},"end":{"line":161,"column":52}},"52":{"start":{"line":163,"column":8},"end":{"line":169,"column":11}},"53":{"start":{"line":164,"column":10},"end":{"line":164,"column":42}},"54":{"start":{"line":165,"column":10},"end":{"line":165,"column":55}},"55":{"start":{"line":166,"column":10},"end":{"line":166,"column":70}},"56":{"start":{"line":167,"column":10},"end":{"line":167,"column":60}},"57":{"start":{"line":168,"column":10},"end":{"line":168,"column":58}},"58":{"start":{"line":171,"column":8},"end":{"line":177,"column":11}},"59":{"start":{"line":172,"column":10},"end":{"line":176,"column":13}},"60":{"start":{"line":173,"column":12},"end":{"line":175,"column":13}},"61":{"start":{"line":174,"column":14},"end":{"line":174,"column":84}},"62":{"start":{"line":182,"column":6},"end":{"line":182,"column":73}},"63":{"start":{"line":183,"column":6},"end":{"line":207,"column":9}},"64":{"start":{"line":188,"column":10},"end":{"line":188,"column":61}},"65":{"start":{"line":189,"column":10},"end":{"line":189,"column":55}},"66":{"start":{"line":192,"column":8},"end":{"line":199,"column":11}},"67":{"start":{"line":194,"column":10},"end":{"line":194,"column":56}},"68":{"start":{"line":197,"column":10},"end":{"line":197,"column":61}},"69":{"start":{"line":198,"column":10},"end":{"line":198,"column":57}},"70":{"start":{"line":202,"column":8},"end":{"line":204,"column":9}},"71":{"start":{"line":203,"column":10},"end":{"line":203,"column":31}},"72":{"start":{"line":206,"column":8},"end":{"line":206,"column":96}},"73":{"start":{"line":216,"column":2},"end":{"line":234,"column":4}},"74":{"start":{"line":218,"column":4},"end":{"line":223,"column":5}},"75":{"start":{"line":219,"column":6},"end":{"line":222,"column":7}},"76":{"start":{"line":220,"column":8},"end":{"line":220,"column":28}},"77":{"start":{"line":221,"column":8},"end":{"line":221,"column":22}},"78":{"start":{"line":225,"column":4},"end":{"line":225,"column":69}},"79":{"start":{"line":227,"column":4},"end":{"line":227,"column":96}},"80":{"start":{"line":229,"column":4},"end":{"line":233,"column":23}},"81":{"start":{"line":231,"column":6},"end":{"line":231,"column":119}},"82":{"start":{"line":240,"column":2},"end":{"line":274,"column":4}},"83":{"start":{"line":242,"column":4},"end":{"line":242,"column":57}},"84":{"start":{"line":243,"column":4},"end":{"line":246,"column":5}},"85":{"start":{"line":244,"column":6},"end":{"line":244,"column":80}},"86":{"start":{"line":245,"column":6},"end":{"line":245,"column":41}},"87":{"start":{"line":248,"column":4},"end":{"line":248,"column":78}},"88":{"start":{"line":249,"column":4},"end":{"line":252,"column":5}},"89":{"start":{"line":250,"column":6},"end":{"line":250,"column":97}},"90":{"start":{"line":251,"column":6},"end":{"line":251,"column":46}},"91":{"start":{"line":254,"column":4},"end":{"line":254,"column":114}},"92":{"start":{"line":256,"column":4},"end":{"line":264,"column":6}},"93":{"start":{"line":266,"column":4},"end":{"line":268,"column":5}},"94":{"start":{"line":267,"column":6},"end":{"line":267,"column":65}},"95":{"start":{"line":270,"column":4},"end":{"line":270,"column":64}},"96":{"start":{"line":271,"column":4},"end":{"line":271,"column":118}},"97":{"start":{"line":272,"column":4},"end":{"line":273,"column":31}},"98":{"start":{"line":279,"column":2},"end":{"line":281,"column":4}},"99":{"start":{"line":280,"column":4},"end":{"line":280,"column":47}},"100":{"start":{"line":286,"column":2},"end":{"line":288,"column":4}},"101":{"start":{"line":287,"column":4},"end":{"line":287,"column":46}},"102":{"start":{"line":293,"column":2},"end":{"line":295,"column":4}},"103":{"start":{"line":294,"column":4},"end":{"line":294,"column":46}},"104":{"start":{"line":300,"column":2},"end":{"line":302,"column":4}},"105":{"start":{"line":301,"column":4},"end":{"line":301,"column":47}},"106":{"start":{"line":307,"column":2},"end":{"line":309,"column":4}},"107":{"start":{"line":308,"column":4},"end":{"line":308,"column":47}},"108":{"start":{"line":312,"column":0},"end":{"line":312,"column":30}}},"branchMap":{"1":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},{"start":{"line":73,"column":4},"end":{"line":73,"column":4}}]},"2":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":6},"end":{"line":81,"column":6}},{"start":{"line":81,"column":6},"end":{"line":81,"column":6}}]},"3":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":8}},{"start":{"line":89,"column":8},"end":{"line":89,"column":8}}]},"4":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":23},"end":{"line":111,"column":37}},{"start":{"line":111,"column":41},"end":{"line":111,"column":43}}]},"5":{"line":128,"type":"binary-expr","locations":[{"start":{"line":128,"column":11},"end":{"line":128,"column":25}},{"start":{"line":128,"column":29},"end":{"line":128,"column":58}}]},"6":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":4},"end":{"line":142,"column":4}},{"start":{"line":142,"column":4},"end":{"line":142,"column":4}}]},"7":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":6},"end":{"line":160,"column":6}},{"start":{"line":160,"column":6},"end":{"line":160,"column":6}}]},"8":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":25},"end":{"line":164,"column":33}},{"start":{"line":164,"column":37},"end":{"line":164,"column":41}}]},"9":{"line":166,"type":"binary-expr","locations":[{"start":{"line":166,"column":25},"end":{"line":166,"column":38}},{"start":{"line":166,"column":42},"end":{"line":166,"column":69}}]},"10":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":12},"end":{"line":173,"column":12}},{"start":{"line":173,"column":12},"end":{"line":173,"column":12}}]},"11":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":8},"end":{"line":202,"column":8}},{"start":{"line":202,"column":8},"end":{"line":202,"column":8}}]},"12":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":4},"end":{"line":218,"column":4}},{"start":{"line":218,"column":4},"end":{"line":218,"column":4}}]},"13":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":6},"end":{"line":219,"column":6}},{"start":{"line":219,"column":6},"end":{"line":219,"column":6}}]},"14":{"line":225,"type":"binary-expr","locations":[{"start":{"line":225,"column":53},"end":{"line":225,"column":61}},{"start":{"line":225,"column":65},"end":{"line":225,"column":67}}]},"15":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":4},"end":{"line":243,"column":4}},{"start":{"line":243,"column":4},"end":{"line":243,"column":4}}]},"16":{"line":249,"type":"if","locations":[{"start":{"line":249,"column":4},"end":{"line":249,"column":4}},{"start":{"line":249,"column":4},"end":{"line":249,"column":4}}]},"17":{"line":254,"type":"binary-expr","locations":[{"start":{"line":254,"column":20},"end":{"line":254,"column":42}},{"start":{"line":254,"column":46},"end":{"line":254,"column":113}}]},"18":{"line":262,"type":"binary-expr","locations":[{"start":{"line":262,"column":23},"end":{"line":262,"column":49}},{"start":{"line":262,"column":53},"end":{"line":262,"column":58}}]},"19":{"line":266,"type":"if","locations":[{"start":{"line":266,"column":4},"end":{"line":266,"column":4}},{"start":{"line":266,"column":4},"end":{"line":266,"column":4}}]},"20":{"line":280,"type":"binary-expr","locations":[{"start":{"line":280,"column":28},"end":{"line":280,"column":34}},{"start":{"line":280,"column":38},"end":{"line":280,"column":45}}]},"21":{"line":287,"type":"binary-expr","locations":[{"start":{"line":287,"column":27},"end":{"line":287,"column":33}},{"start":{"line":287,"column":37},"end":{"line":287,"column":44}}]},"22":{"line":294,"type":"binary-expr","locations":[{"start":{"line":294,"column":27},"end":{"line":294,"column":33}},{"start":{"line":294,"column":37},"end":{"line":294,"column":44}}]},"23":{"line":301,"type":"binary-expr","locations":[{"start":{"line":301,"column":28},"end":{"line":301,"column":34}},{"start":{"line":301,"column":38},"end":{"line":301,"column":45}}]},"24":{"line":308,"type":"binary-expr","locations":[{"start":{"line":308,"column":28},"end":{"line":308,"column":34}},{"start":{"line":308,"column":38},"end":{"line":308,"column":45}}]}},"code":["'use strict';","","var fs = require('fs'),","    path = require('path'),","    Q = require('q'),","    url = require('url');","    ","var\tfileTools = require('./fileTools'),","    iconTools = require('./iconTools'),","    log = require('./log'),","    manifestTools = require('./manifestTools'),","    packageTools = require('./packageTools'),","    utils = require('./utils');","","function PlatformBase (id, name, packageName, baseDir) {","  var self = this;","  ","  self.id = id;","  self.name = name;","  self.packageName = packageName;","  self.baseDir = baseDir;","  self.log = log;","","  /**","   * Creates a fully-functional hosted web application application for the platform.","   * ","   * This function must be overridden by subclasses.","   */","  self.create = function (w3cManifestInfo, rootDir, options, callback) {","    return Q.reject(new Error('The \\'create\\' operation is not implemented for platform: ' + self.id))","            .nodeify(callback);","  };","  ","  /**","   * Runs the application created using the `create` operation.","   * ","   * This function is optional. It can be overridden by subclasses. ","   */","  self.run = function (projectDir, options, callback) {","    self.warn('The \\'run\\' command is not implemented for platform: ' + self.id);","    return Q.resolve().nodeify(callback);","  };","","  /**","   * Packages the application for publication to the platform's store.","   * ","   * This function is optional. It can be overridden by subclasses. ","   */","  self.package = function (projectDir, options, callback) {","    self.warn('The \\'package\\' command is not implemented for platform: ' + self.id);","    return Q.resolve().nodeify(callback);","  };","  ","  /**","   * Opens the source code for the platform.","   * ","   * This function is optional. It can be overridden by subclasses. ","   */","  self.open = function (projectDir, options, callback) {","    self.warn('The \\'open\\' command is not implemented for platform: ' + self.id);","    return Q.resolve().nodeify(callback);","  };","","  /**","   * Loads validation rules from the 'validationRules' folder of the platform project. The ","   * validation rules ensure the W3C manifest meets the requirements for your platform.","   * ","   * This function is optional. A platform should override it to use a different strategy for ","   * loading its validation rules.","   */","  self.getValidationRules = function (platforms, callback) {","    ","    if (!self.baseDir) {","      self.warn('Missing base directory for platform: ' + self.id + '.');","      return Q.resolve([]).nodeify(callback);","    }","","    // first look for a 'validationRules' directory  ","    var validationRulesDir = path.join(self.baseDir, 'validationRules');","    return Q.nfcall(fs.stat, validationRulesDir).then(function (stats) {","      if (stats.isDirectory()) {","        return manifestTools.loadValidationRules(validationRulesDir, platforms);","      }              ","    })","    .catch(function () {","      // then look for a 'validationRules.js' file","      var validationRulesFile = validationRulesDir + '.js';","      return Q.nfcall(fs.stat, validationRulesFile).then(function (stats) {","        if (stats.isFile()) {","          return manifestTools.loadValidationRules(validationRulesFile, platforms);","        }","        ","        self.warn('Failed to retrieve the validation rules for platform: ' + self.id + '. The validation rules folder is missing or invalid.');","        return Q.resolve([]);","      });","    })","    .nodeify(callback);","  };","","  /**","   * Returns an array of icons files as defined in the manifest. The method assumes that all icons ","   * are are square and defined as properties of an 'icons' member, for example:","   *   \"icons\": {","   *       \"30\": \"/images/smalllogo.png\",","   *       \"50\": \"/images/storelogo.png\",","   *       \"150\": \"/images/logo.png\"","   *    }","   * Platforms should override this method if the manifest icons use a different format.","   */","  self.getManifestIcons = function (manifest) {","    return Object.keys(manifest.icons || {}).map(function (size) { return manifest.icons[size]; });","  };","  ","  /**","   * Receives the size (e.g. '50x50') of an icon and returns the corresponding icon element ","   * from the manifest or undefined if not found. The method assumes that all icons ","   * are square and defined as properties of an 'icons' member, for example:","   *   \"icons\": {","   *       \"30\": \"/images/smalllogo.png\",","   *       \"50\": \"/images/storelogo.png\",","   *       \"150\": \"/images/logo.png\"","   *    }","   * Platforms should override this method if the manifest icons use a different format.","   */","  self.getManifestIcon = function (manifest, size) {","    // assumes icons are square","    var dimensions = size.toLowerCase().split('x');    ","    return manifest.icons && manifest.icons[dimensions[0]];","  };","","  /**","   * Adds an icon file with the specified size (e.g. '50x50') to the manifest. The method","   * assumes that all icons are square and defined as properties of an 'icons' member, for example:","   *   \"icons\": {","   *       \"30\": \"/images/smalllogo.png\",","   *       \"50\": \"/images/storelogo.png\",","   *       \"150\": \"/images/logo.png\"","   *    }","   * Platforms should override this method if the manifest icons use a different format.","   */","  self.addManifestIcon = function (manifest, fileName, size) {","    if (!manifest.icons) {","      manifest.icons = {};","    }","    ","    // assumes icons are square","    var dimensions = size.toLowerCase().split('x');    ","    manifest.icons[dimensions[0]] = fileName;","  };","","  /**","   * Downloads the platform icons to the generated app's folder. ","   */","  self.downloadIcons = function (manifest, baseUrl, imagesDir, callback) {","    self.debug('Downloading the ' + self.id + ' icons...');","    ","    // download the icons specified in the manifest","    var iconList = manifest.icons;","    return Q.resolve().then(function () {","      if (iconList) {","        var icons = self.getManifestIcons(manifest);","        ","        var downloadTasks = icons.map(function (icon) {","          var iconPath = icon.url || icon;","          var iconUrl = url.resolve(baseUrl, iconPath);","          var pathname = icon.fileName || url.parse(iconUrl).pathname; ","          var iconFilePath = path.join(imagesDir, pathname);","          return iconTools.getIcon(iconUrl, iconFilePath);","        });","        ","        return Q.allSettled(downloadTasks).then(function (results) {","          results.forEach(function (result) {","            if (result.state === 'rejected') {","              self.warn('Error downloading an icon file. ' + result.reason.message);","            }","          });","        });","      }","    })","    // copy default platform icons to replace any missing icons","    .then(function () {","      var defaultImagesDir = path.join(self.baseDir, 'assets', 'images');","      return fileTools.syncFiles(defaultImagesDir, imagesDir, {","        // filter out default images that do not need to be moved over","        filter: function (file) {","          // determine the icon dimensions assuming a convention where ","          // the file name specifies the icon's size (e.g. '50x50.png')","          var size = path.basename(file, path.extname(file));","          return !self.getManifestIcon(manifest, size);","        }","      }).then(function (files) {        ","        files.forEach(function (file) {","          // make path relative to imagesDir","          var filePath = path.relative(imagesDir, file);","          ","          // convention is for file name to specify the icon's size","          var size = path.basename(file, path.extname(file));","          self.addManifestIcon(manifest, filePath, size);","        });","      })","      .catch(function (err) {","        if (err.code !== 'ENOENT') {","          return Q.reject(err);","        }","        ","        self.debug('No default icons were found to copy for the \\'' + self.id + '\\' platform.');","      });","    })","    .nodeify(callback);","  };","","  /**","  * Copies the documentation to the generated app's folder. All documents must be placed in ","  * the 'docs' folder of the platform. ","  */","  self.copyDocumentation = function (targetPath, platform, callback) {","","    if (arguments.length > 1) {","      if (utils.isFunction(platform)) {","        callback = platform;","        platform = '';","      }","    }","    ","    var sourcePath = path.join(self.baseDir, 'docs', platform || '');","","    self.info('Copying documentation from \\'' + sourcePath + '\\' to \\'' + targetPath + '\\'...');","","    return fileTools.copyFolder(sourcePath, targetPath).catch (function (err) {","      // failure to copy the documentation is not considered fatal, so catch the error and log as a warning","      self.warn('Failed to copy the documentation for the \\'' + platform + '\\' Cordova platform. ' + err.getMessage());","    })","    .nodeify(callback);","  };","","  /**","  * Writes 'telemetry' information to the generated app's folder, including generation tool version, ","  * platform package version, generated app URL, and generation date.","  */","  self.writeGenerationInfo = function (manifestInfo, targetPath, callback) {","","    var appModule = packageTools.getPackageInformation();","    if (!appModule) {    ","      self.warn('Failed to retrieve the metadata for the app generation tool.');","      appModule = { version: 'Unknown' };","    }","","    var platformModule = packageTools.getPackageInformation(self.packageName);","    if (!platformModule) {","      self.warn('Failed to retrieve the metadata for the \\'' + self.id + '\\' platform package.');","      platformModule = { version: 'Unknown' };","    }","","    var timestamp = manifestInfo.timestamp || new Date().toISOString().replace(/T/, ' ').replace(/\\.[0-9]+/, ' ');","","    var generationInfo = {","      'generationTool': appModule.name,","      'generationToolVersion': appModule.version,","      'platformId' : self.id,","      'platformPackage' : self.packageName,","      'platformVersion': platformModule.version,","      'generatedFrom': manifestInfo.generatedFrom || 'API',","      'generationDate': timestamp,","    };","","    if (manifestInfo.generatedUrl) {","      generationInfo['generatedURL'] = manifestInfo.generatedUrl;","    }","","    var filePath = path.join(targetPath, 'generationInfo.json');","    self.info('Writing the generation information for the \\'' + self.name + '\\' platform to \\'' + filePath + '\\'...');","    return Q.nfcall(fs.writeFile, filePath, JSON.stringify(generationInfo, null, 4))","            .nodeify(callback);","  };","","  /**","   * Outputs a debug message to the log.","   */","  self.debug = function (message, source) {","    self.log.debug(message, source || self.id);","  };","","  /**","   * Outputs an informational message to the log.","   */","  self.info = function (message, source) {","    self.log.info(message, source || self.id);","  };","","  /**","   * Outputs a warning message to the log.","   */","  self.warn = function (message, source) {","    self.log.warn(message, source || self.id);","  };","","  /**","   * Outputs an informational message to the log.","   */","  self.error = function (message, source) {","    self.log.error(message, source || self.id);","  };","","  /**","   * Outputs a message to the log regardless of the configured logging level.","   */","  self.write = function (message, source) {","    self.log.write(message, source || self.id);","  };","}","","module.exports = PlatformBase;",""],"l":{"3":1,"8":1,"15":1,"16":0,"18":0,"19":0,"20":0,"21":0,"22":0,"29":0,"30":0,"39":0,"40":0,"41":0,"49":0,"50":0,"51":0,"59":0,"60":0,"61":0,"71":0,"73":0,"74":0,"75":0,"79":0,"80":0,"81":0,"82":0,"87":0,"88":0,"89":0,"90":0,"93":0,"94":0,"110":0,"111":0,"125":0,"127":0,"128":0,"141":0,"142":0,"143":0,"147":0,"148":0,"154":0,"155":0,"158":0,"159":0,"160":0,"161":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"171":0,"172":0,"173":0,"174":0,"182":0,"183":0,"188":0,"189":0,"192":0,"194":0,"197":0,"198":0,"202":0,"203":0,"206":0,"216":0,"218":0,"219":0,"220":0,"221":0,"225":0,"227":0,"229":0,"231":0,"240":0,"242":0,"243":0,"244":0,"245":0,"248":0,"249":0,"250":0,"251":0,"254":0,"256":0,"266":0,"267":0,"270":0,"271":0,"272":0,"279":0,"280":0,"286":0,"287":0,"293":0,"294":0,"300":0,"301":0,"307":0,"308":0,"312":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/fileTools.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/fileTools.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":1,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},"fnMap":{"1":{"name":"readFile","line":15,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":37}}},"2":{"name":"copyFile","line":20,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":45}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":17},"end":{"line":25,"column":32}}},"4":{"name":"(anonymous_4)","line":30,"loc":{"start":{"line":30,"column":17},"end":{"line":30,"column":32}}},"5":{"name":"(anonymous_5)","line":34,"loc":{"start":{"line":34,"column":17},"end":{"line":34,"column":29}}},"6":{"name":"copyFolder","line":43,"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":56}}},"7":{"name":"(anonymous_7)","line":52,"loc":{"start":{"line":52,"column":60},"end":{"line":52,"column":75}}},"8":{"name":"(anonymous_8)","line":56,"loc":{"start":{"line":56,"column":27},"end":{"line":56,"column":56}}},"9":{"name":"replaceFileContent","line":68,"loc":{"start":{"line":68,"column":0},"end":{"line":68,"column":64}}},"10":{"name":"(anonymous_10)","line":69,"loc":{"start":{"line":69,"column":52},"end":{"line":69,"column":68}}},"11":{"name":"mkdirp","line":76,"loc":{"start":{"line":76,"column":0},"end":{"line":76,"column":37}}},"12":{"name":"(anonymous_12)","line":83,"loc":{"start":{"line":83,"column":29},"end":{"line":83,"column":41}}},"13":{"name":"createShortcut","line":89,"loc":{"start":{"line":89,"column":0},"end":{"line":89,"column":53}}},"14":{"name":"searchFile","line":94,"loc":{"start":{"line":94,"column":0},"end":{"line":94,"column":46}}},"15":{"name":"(anonymous_15)","line":96,"loc":{"start":{"line":96,"column":18},"end":{"line":96,"column":39}}},"16":{"name":"(anonymous_16)","line":106,"loc":{"start":{"line":106,"column":17},"end":{"line":106,"column":33}}},"17":{"name":"(anonymous_17)","line":108,"loc":{"start":{"line":108,"column":20},"end":{"line":108,"column":41}}},"18":{"name":"(anonymous_18)","line":110,"loc":{"start":{"line":110,"column":37},"end":{"line":110,"column":57}}},"19":{"name":"syncFile","line":133,"loc":{"start":{"line":133,"column":0},"end":{"line":133,"column":45}}},"20":{"name":"(anonymous_20)","line":136,"loc":{"start":{"line":136,"column":27},"end":{"line":136,"column":43}}},"21":{"name":"(anonymous_21)","line":145,"loc":{"start":{"line":145,"column":9},"end":{"line":145,"column":24}}},"22":{"name":"(anonymous_22)","line":153,"loc":{"start":{"line":153,"column":33},"end":{"line":153,"column":48}}},"23":{"name":"(anonymous_23)","line":160,"loc":{"start":{"line":160,"column":36},"end":{"line":160,"column":48}}},"24":{"name":"(anonymous_24)","line":163,"loc":{"start":{"line":163,"column":13},"end":{"line":163,"column":28}}},"25":{"name":"(anonymous_25)","line":169,"loc":{"start":{"line":169,"column":12},"end":{"line":169,"column":24}}},"26":{"name":"(anonymous_26)","line":173,"loc":{"start":{"line":173,"column":10},"end":{"line":173,"column":22}}},"27":{"name":"(anonymous_27)","line":174,"loc":{"start":{"line":174,"column":43},"end":{"line":174,"column":55}}},"28":{"name":"syncFiles","line":191,"loc":{"start":{"line":191,"column":0},"end":{"line":191,"column":55}}},"29":{"name":"(anonymous_29)","line":199,"loc":{"start":{"line":199,"column":43},"end":{"line":199,"column":60}}},"30":{"name":"(anonymous_30)","line":202,"loc":{"start":{"line":202,"column":26},"end":{"line":202,"column":47}}},"31":{"name":"(anonymous_31)","line":204,"loc":{"start":{"line":204,"column":35},"end":{"line":204,"column":51}}},"32":{"name":"(anonymous_32)","line":226,"loc":{"start":{"line":226,"column":29},"end":{"line":226,"column":47}}},"33":{"name":"(anonymous_33)","line":229,"loc":{"start":{"line":229,"column":27},"end":{"line":229,"column":50}}},"34":{"name":"(anonymous_34)","line":243,"loc":{"start":{"line":243,"column":9},"end":{"line":243,"column":24}}},"35":{"name":"(anonymous_35)","line":259,"loc":{"start":{"line":259,"column":41},"end":{"line":259,"column":57}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":4,"column":27}},"2":{"start":{"line":6,"column":0},"end":{"line":8,"column":21}},"3":{"start":{"line":10,"column":0},"end":{"line":11,"column":31}},"4":{"start":{"line":13,"column":0},"end":{"line":13,"column":29}},"5":{"start":{"line":15,"column":0},"end":{"line":18,"column":1}},"6":{"start":{"line":16,"column":2},"end":{"line":17,"column":29}},"7":{"start":{"line":20,"column":0},"end":{"line":41,"column":1}},"8":{"start":{"line":22,"column":2},"end":{"line":22,"column":27}},"9":{"start":{"line":24,"column":2},"end":{"line":24,"column":39}},"10":{"start":{"line":25,"column":2},"end":{"line":27,"column":5}},"11":{"start":{"line":26,"column":4},"end":{"line":26,"column":25}},"12":{"start":{"line":29,"column":2},"end":{"line":29,"column":40}},"13":{"start":{"line":30,"column":2},"end":{"line":32,"column":5}},"14":{"start":{"line":31,"column":4},"end":{"line":31,"column":25}},"15":{"start":{"line":34,"column":2},"end":{"line":36,"column":5}},"16":{"start":{"line":35,"column":4},"end":{"line":35,"column":23}},"17":{"start":{"line":38,"column":2},"end":{"line":38,"column":14}},"18":{"start":{"line":40,"column":2},"end":{"line":40,"column":44}},"19":{"start":{"line":43,"column":0},"end":{"line":66,"column":1}},"20":{"start":{"line":45,"column":2},"end":{"line":50,"column":3}},"21":{"start":{"line":46,"column":4},"end":{"line":49,"column":5}},"22":{"start":{"line":47,"column":6},"end":{"line":47,"column":25}},"23":{"start":{"line":48,"column":6},"end":{"line":48,"column":19}},"24":{"start":{"line":52,"column":2},"end":{"line":65,"column":21}},"25":{"start":{"line":55,"column":4},"end":{"line":61,"column":5}},"26":{"start":{"line":56,"column":6},"end":{"line":58,"column":13}},"27":{"start":{"line":57,"column":8},"end":{"line":57,"column":75}},"28":{"start":{"line":60,"column":6},"end":{"line":60,"column":27}},"29":{"start":{"line":63,"column":4},"end":{"line":63,"column":25}},"30":{"start":{"line":68,"column":0},"end":{"line":74,"column":1}},"31":{"start":{"line":69,"column":2},"end":{"line":73,"column":21}},"32":{"start":{"line":70,"column":4},"end":{"line":70,"column":39}},"33":{"start":{"line":71,"column":4},"end":{"line":71,"column":58}},"34":{"start":{"line":76,"column":0},"end":{"line":87,"column":1}},"35":{"start":{"line":79,"column":2},"end":{"line":79,"column":40}},"36":{"start":{"line":80,"column":2},"end":{"line":80,"column":43}},"37":{"start":{"line":83,"column":2},"end":{"line":86,"column":21}},"38":{"start":{"line":84,"column":4},"end":{"line":84,"column":39}},"39":{"start":{"line":89,"column":0},"end":{"line":92,"column":1}},"40":{"start":{"line":90,"column":2},"end":{"line":91,"column":29}},"41":{"start":{"line":94,"column":0},"end":{"line":129,"column":1}},"42":{"start":{"line":95,"column":2},"end":{"line":95,"column":19}},"43":{"start":{"line":96,"column":2},"end":{"line":128,"column":5}},"44":{"start":{"line":97,"column":4},"end":{"line":99,"column":5}},"45":{"start":{"line":98,"column":6},"end":{"line":98,"column":27}},"46":{"start":{"line":101,"column":4},"end":{"line":101,"column":30}},"47":{"start":{"line":102,"column":4},"end":{"line":104,"column":5}},"48":{"start":{"line":103,"column":6},"end":{"line":103,"column":37}},"49":{"start":{"line":106,"column":4},"end":{"line":127,"column":7}},"50":{"start":{"line":107,"column":6},"end":{"line":107,"column":37}},"51":{"start":{"line":108,"column":6},"end":{"line":126,"column":9}},"52":{"start":{"line":109,"column":8},"end":{"line":125,"column":9}},"53":{"start":{"line":110,"column":10},"end":{"line":115,"column":13}},"54":{"start":{"line":111,"column":12},"end":{"line":111,"column":42}},"55":{"start":{"line":112,"column":12},"end":{"line":114,"column":13}},"56":{"start":{"line":113,"column":14},"end":{"line":113,"column":38}},"57":{"start":{"line":118,"column":10},"end":{"line":120,"column":11}},"58":{"start":{"line":119,"column":12},"end":{"line":119,"column":31}},"59":{"start":{"line":122,"column":10},"end":{"line":124,"column":11}},"60":{"start":{"line":123,"column":12},"end":{"line":123,"column":36}},"61":{"start":{"line":133,"column":0},"end":{"line":181,"column":1}},"62":{"start":{"line":136,"column":2},"end":{"line":180,"column":21}},"63":{"start":{"line":138,"column":4},"end":{"line":140,"column":5}},"64":{"start":{"line":139,"column":6},"end":{"line":139,"column":143}},"65":{"start":{"line":143,"column":4},"end":{"line":143,"column":11}},"66":{"start":{"line":147,"column":4},"end":{"line":149,"column":5}},"67":{"start":{"line":148,"column":6},"end":{"line":148,"column":27}},"68":{"start":{"line":152,"column":4},"end":{"line":152,"column":41}},"69":{"start":{"line":153,"column":4},"end":{"line":178,"column":7}},"70":{"start":{"line":155,"column":6},"end":{"line":157,"column":7}},"71":{"start":{"line":156,"column":8},"end":{"line":156,"column":29}},"72":{"start":{"line":160,"column":6},"end":{"line":171,"column":9}},"73":{"start":{"line":161,"column":8},"end":{"line":161,"column":72}},"74":{"start":{"line":165,"column":8},"end":{"line":167,"column":9}},"75":{"start":{"line":166,"column":10},"end":{"line":166,"column":31}},"76":{"start":{"line":170,"column":8},"end":{"line":170,"column":31}},"77":{"start":{"line":174,"column":6},"end":{"line":177,"column":9}},"78":{"start":{"line":175,"column":8},"end":{"line":175,"column":75}},"79":{"start":{"line":176,"column":8},"end":{"line":176,"column":22}},"80":{"start":{"line":191,"column":0},"end":{"line":264,"column":1}},"81":{"start":{"line":193,"column":2},"end":{"line":196,"column":3}},"82":{"start":{"line":194,"column":4},"end":{"line":194,"column":23}},"83":{"start":{"line":195,"column":4},"end":{"line":195,"column":17}},"84":{"start":{"line":199,"column":2},"end":{"line":263,"column":21}},"85":{"start":{"line":202,"column":4},"end":{"line":223,"column":7}},"86":{"start":{"line":203,"column":6},"end":{"line":203,"column":52}},"87":{"start":{"line":204,"column":6},"end":{"line":222,"column":9}},"88":{"start":{"line":207,"column":8},"end":{"line":209,"column":9}},"89":{"start":{"line":208,"column":10},"end":{"line":208,"column":78}},"90":{"start":{"line":212,"column":8},"end":{"line":217,"column":9}},"91":{"start":{"line":213,"column":10},"end":{"line":213,"column":48}},"92":{"start":{"line":214,"column":10},"end":{"line":216,"column":11}},"93":{"start":{"line":215,"column":12},"end":{"line":215,"column":19}},"94":{"start":{"line":220,"column":8},"end":{"line":220,"column":54}},"95":{"start":{"line":221,"column":8},"end":{"line":221,"column":48}},"96":{"start":{"line":226,"column":4},"end":{"line":241,"column":7}},"97":{"start":{"line":229,"column":6},"end":{"line":240,"column":13}},"98":{"start":{"line":230,"column":8},"end":{"line":237,"column":9}},"99":{"start":{"line":231,"column":10},"end":{"line":236,"column":11}},"100":{"start":{"line":232,"column":12},"end":{"line":232,"column":41}},"101":{"start":{"line":235,"column":12},"end":{"line":235,"column":29}},"102":{"start":{"line":239,"column":8},"end":{"line":239,"column":20}},"103":{"start":{"line":244,"column":4},"end":{"line":246,"column":5}},"104":{"start":{"line":245,"column":6},"end":{"line":245,"column":27}},"105":{"start":{"line":249,"column":4},"end":{"line":249,"column":43}},"106":{"start":{"line":250,"column":4},"end":{"line":250,"column":43}},"107":{"start":{"line":254,"column":4},"end":{"line":256,"column":5}},"108":{"start":{"line":255,"column":6},"end":{"line":255,"column":45}},"109":{"start":{"line":259,"column":4},"end":{"line":261,"column":7}},"110":{"start":{"line":260,"column":6},"end":{"line":260,"column":32}},"111":{"start":{"line":266,"column":0},"end":{"line":275,"column":2}}},"branchMap":{"1":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":2},"end":{"line":45,"column":2}},{"start":{"line":45,"column":2},"end":{"line":45,"column":2}}]},"2":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]},"3":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":39},"end":{"line":52,"column":46}},{"start":{"line":52,"column":50},"end":{"line":52,"column":52}}]},"4":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":4},"end":{"line":55,"column":4}},{"start":{"line":55,"column":4},"end":{"line":55,"column":4}}]},"5":{"line":57,"type":"cond-expr","locations":[{"start":{"line":57,"column":46},"end":{"line":57,"column":50}},{"start":{"line":57,"column":53},"end":{"line":57,"column":55}}]},"6":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":4},"end":{"line":97,"column":4}},{"start":{"line":97,"column":4},"end":{"line":97,"column":4}}]},"7":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":4},"end":{"line":102,"column":4}},{"start":{"line":102,"column":4},"end":{"line":102,"column":4}}]},"8":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":109,"column":8}},{"start":{"line":109,"column":8},"end":{"line":109,"column":8}}]},"9":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":12},"end":{"line":109,"column":16}},{"start":{"line":109,"column":20},"end":{"line":109,"column":38}}]},"10":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":12},"end":{"line":112,"column":12}},{"start":{"line":112,"column":12},"end":{"line":112,"column":12}}]},"11":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":10},"end":{"line":118,"column":10}},{"start":{"line":118,"column":10},"end":{"line":118,"column":10}}]},"12":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":10},"end":{"line":122,"column":10}},{"start":{"line":122,"column":10},"end":{"line":122,"column":10}}]},"13":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":4},"end":{"line":138,"column":4}},{"start":{"line":138,"column":4},"end":{"line":138,"column":4}}]},"14":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":4},"end":{"line":147,"column":4}},{"start":{"line":147,"column":4},"end":{"line":147,"column":4}}]},"15":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":6},"end":{"line":155,"column":6}},{"start":{"line":155,"column":6},"end":{"line":155,"column":6}}]},"16":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":8},"end":{"line":165,"column":8}},{"start":{"line":165,"column":8},"end":{"line":165,"column":8}}]},"17":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":2},"end":{"line":193,"column":2}},{"start":{"line":193,"column":2},"end":{"line":193,"column":2}}]},"18":{"line":193,"type":"binary-expr","locations":[{"start":{"line":193,"column":6},"end":{"line":193,"column":28}},{"start":{"line":193,"column":32},"end":{"line":193,"column":57}}]},"19":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":8},"end":{"line":207,"column":8}},{"start":{"line":207,"column":8},"end":{"line":207,"column":8}}]},"20":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":8},"end":{"line":212,"column":8}},{"start":{"line":212,"column":8},"end":{"line":212,"column":8}}]},"21":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":10},"end":{"line":214,"column":10}},{"start":{"line":214,"column":10},"end":{"line":214,"column":10}}]},"22":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":8},"end":{"line":230,"column":8}},{"start":{"line":230,"column":8},"end":{"line":230,"column":8}}]},"23":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":10},"end":{"line":231,"column":10}},{"start":{"line":231,"column":10},"end":{"line":231,"column":10}}]},"24":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":4},"end":{"line":244,"column":4}},{"start":{"line":244,"column":4},"end":{"line":244,"column":4}}]},"25":{"line":254,"type":"if","locations":[{"start":{"line":254,"column":4},"end":{"line":254,"column":4}},{"start":{"line":254,"column":4},"end":{"line":254,"column":4}}]},"26":{"line":260,"type":"cond-expr","locations":[{"start":{"line":260,"column":20},"end":{"line":260,"column":26}},{"start":{"line":260,"column":29},"end":{"line":260,"column":31}}]}},"code":["'use strict';","","var fs = require('fs'),","    path = require('path');","","var _mkdirp = require('mkdirp'),","    ncp = require('ncp'), ","    Q = require('q');","    ","var log = require('./log'),","    utils = require('./utils');","","var stat = Q.nfbind(fs.stat);","","function readFile (source, callback) {","  return Q.nfcall(fs.readFile, source, 'utf8')","          .nodeify(callback);","}","","function copyFile (source, target, callback) {","","  var deferred = Q.defer();","","  var rd = fs.createReadStream(source);","  rd.on('error', function (err) {","    deferred.reject(err);","  });","","  var wr = fs.createWriteStream(target);","  wr.on('error', function (err) {","    deferred.reject(err);","  });","","  wr.on('close', function () {","    deferred.resolve();","  });","","  rd.pipe(wr);","","  return deferred.promise.nodeify(callback);","}","","function copyFolder (source, target, options, callback) {","","  if (arguments.length === 3) {","    if (utils.isFunction(options)) {","      callback = options;","      options = {};      ","    }","  }","  ","  return Q.nfcall(ncp, source, target, options || {}).catch(function (err) {","    // flatten errors, otherwise it breaks things downstream","    // see https://github.com/AvianFlu/ncp/issues/52","    if (Array.isArray(err)) {","      var msg = err.reduce(function (previous, current) {","        return previous += (previous.length ? '\\n' : '') + current.message;","      }, '');","      ","      err = new Error(msg);              ","    }","    ","    return Q.reject(err);","  })","  .nodeify(callback);","}","","function replaceFileContent (source, replacementFunc, callback) {","  return Q.nfcall(fs.readFile, source, 'utf8').then(function (data) {","    var result = replacementFunc(data);","    return Q.nfcall(fs.writeFile, source, result, 'utf8');","  })","  .nodeify(callback);","}","","function mkdirp (filePath, callback) {","  ","  // ensure filePath points to a valid drive","  var fullPath = path.resolve(filePath);","  var rootPath = path.parse(fullPath).root;","  ","  // create directory recursively","  return stat(rootPath).then(function () {","    return Q.nfcall(_mkdirp, filePath);","  })","  .nodeify(callback);","}","","function createShortcut (srcpath, dstpath, callback) {","  return Q.nfcall(fs.symlink, srcpath, dstpath, 'junction')","          .nodeify(callback);","}","","function searchFile (dir, fileName, callback) {","  var results = [];","  fs.readdir(dir, function (err, list) {","    if (err) {","      return callback(err);","    }","","    var pending = list.length;","    if (!pending) {","      return callback(null, results);","    }","","    list.forEach(function (file) {","      file = path.resolve(dir, file);","      fs.stat(file, function (err, stat) {","        if (stat && stat.isDirectory()) {","          searchFile(file, fileName, function (err, res) {","            results = results.concat(res);","            if (!--pending){","              callback(null, results);","            }","          });","        } ","        else {","          if (path.basename(file) === fileName) {","            results.push(file);","          }","","          if (!--pending) {","            callback(null, results);","          }","        }","      });","    });","  });","}","","// Copies the 'source' file to 'target' if it's missing after creating the  ","// required directory structure.","function syncFile (source, target, callback) {","  ","  // check target file","  return stat(target).then(function (info) {","    // verify that target is a file and not a directory","    if (info.isDirectory()) {","      return Q.reject(new Error('Cannot synchronize file \\'' + source + '\\'. There is already a directory in the target with the same name.'));","    }","    ","    // skip target if it already exists","    return;","  })","  .catch(function (err) {","    // return failure for anything other than 'not found' ","    if (err.code !== 'ENOENT') {","      return Q.reject(err);","    }","","    // copy source to target","    var targetDir = path.dirname(target);","    return stat(targetDir).catch(function (err) {","      // return failure for anything other than 'not found' ","      if (err.code !== 'ENOENT') {","        return Q.reject(err);","      }","","      // create target directory            ","      return mkdirp(targetDir).then(function () {","        log.debug('Created target directory at \\'' + targetDir + '\\'.');              ","      })","      .catch(function (err) {","        // ignore error if target was already created by a different \"thread\"","        if (err.code !== 'EEXIST') {","          return Q.reject(err);","        }","      })","      .then(function () {","        return stat(targetDir);","      });","    })","    .then(function () {","      return copyFile(source, target).then(function () {","        log.debug('Copied file \\'' + source + '\\' to \\'' + target + '\\'.');","        return target;","      });","    });","  })","  .nodeify(callback);","}","","// Copies all missing files and directories in 'source' to 'target'.","// Only checks that a file exists by comparing the file names, not ","// that the contents of the source and target files the same. ","// Returns an array with the list of files that were copied.","//","// NOTE: copyFiles in this module already provides similar functionality,","// but it's based on the 'ncp' package and does not provide the list of","// copied files.","function syncFiles (source, target, options, callback) {","  ","  if (arguments.length === 3 && utils.isFunction(options)) {","    callback = options;","    options = {};  ","  }","  ","  // read the contents of the source directory","  return Q.nfcall(fs.readdir, source).then(function (files) {","  ","    // process each file and folder","    var tasks = files.map(function (fileOrDir) {","      var sourceFile = path.join(source, fileOrDir);","      return stat(sourceFile).then(function (info) {","        ","        // if fileOrDir is a directory, synchronize it","        if (info.isDirectory()) {","          return syncFiles(sourceFile, path.join(target, fileOrDir), options);","        }","        ","        // check to see if file should be skipped ","        if (options.filter) {","          var check = options.filter(fileOrDir);","          if (check === false) {","            return;","          }","        }","        ","        // synchronize a single file        ","        var targetFile = path.join(target, fileOrDir);","        return syncFile(sourceFile, targetFile);","      });","    });","  ","    // wait for all pending tasks to complete","    return Q.all(tasks).then(function (values) {","      ","      // build a list of the files that were copied","      return values.reduce(function (list, value) {","        if (value) {","          if (Array.isArray(value)) {","            list.push.apply(list, value);","          }","          else {","            list.push(value);            ","          }","        }","        ","        return list;","      }, []);","    });","  })","  .catch(function (err) {","    if (err.code !== 'ENOTDIR') {","      return Q.reject(err);","    }","    ","    // specified source is a file not a directory","    var sourceFile = path.basename(source);","    var targetFile = path.basename(target);","    ","    // build target file path assuming target is a directory","    // unless target already includes the file name","    if (sourceFile !== targetFile) {","      target = path.join(target, sourceFile);","    }","    ","    // synchronize the file","    return syncFile(source, target).then(function (file) {","      return file ? [file] : [];","    });","  })","  .nodeify(callback);","}","","module.exports = {","  readFile: readFile,","  copyFile: copyFile,","  copyFolder: copyFolder,","  mkdirp: mkdirp,","  createShortcut: createShortcut,","  replaceFileContent: replaceFileContent,","  searchFile: searchFile,","  syncFiles: syncFiles","};",""],"l":{"3":1,"6":1,"10":1,"13":1,"15":1,"16":0,"20":1,"22":0,"24":0,"25":0,"26":0,"29":0,"30":0,"31":0,"34":0,"35":0,"38":0,"40":0,"43":1,"45":0,"46":0,"47":0,"48":0,"52":0,"55":0,"56":0,"57":0,"60":0,"63":0,"68":1,"69":0,"70":0,"71":0,"76":1,"79":0,"80":0,"83":0,"84":0,"89":1,"90":0,"94":1,"95":0,"96":0,"97":0,"98":0,"101":0,"102":0,"103":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"118":0,"119":0,"122":0,"123":0,"133":1,"136":0,"138":0,"139":0,"143":0,"147":0,"148":0,"152":0,"153":0,"155":0,"156":0,"160":0,"161":0,"165":0,"166":0,"170":0,"174":0,"175":0,"176":0,"191":1,"193":0,"194":0,"195":0,"199":0,"202":0,"203":0,"204":0,"207":0,"208":0,"212":0,"213":0,"214":0,"215":0,"220":0,"221":0,"226":0,"229":0,"230":0,"231":0,"232":0,"235":0,"239":0,"244":0,"245":0,"249":0,"250":0,"254":0,"255":0,"259":0,"260":0,"266":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/log.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/log.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":3,"22":3,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":1,"34":1,"35":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[1,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0,0]},"f":{"1":0,"2":3,"3":0},"fnMap":{"1":{"name":"getApplicationName","line":22,"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":38}}},"2":{"name":"(anonymous_2)","line":51,"loc":{"start":{"line":51,"column":22},"end":{"line":51,"column":66}}},"3":{"name":"(anonymous_3)","line":54,"loc":{"start":{"line":54,"column":11},"end":{"line":54,"column":48}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":4,"column":27}},"2":{"start":{"line":10,"column":0},"end":{"line":12,"column":31}},"3":{"start":{"line":14,"column":0},"end":{"line":20,"column":2}},"4":{"start":{"line":22,"column":0},"end":{"line":42,"column":1}},"5":{"start":{"line":24,"column":2},"end":{"line":41,"column":3}},"6":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"7":{"start":{"line":26,"column":6},"end":{"line":26,"column":57}},"8":{"start":{"line":29,"column":4},"end":{"line":29,"column":56}},"9":{"start":{"line":30,"column":4},"end":{"line":30,"column":36}},"10":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"11":{"start":{"line":34,"column":6},"end":{"line":34,"column":16}},"12":{"start":{"line":37,"column":4},"end":{"line":37,"column":43}},"13":{"start":{"line":38,"column":4},"end":{"line":40,"column":5}},"14":{"start":{"line":39,"column":6},"end":{"line":39,"column":38}},"15":{"start":{"line":44,"column":0},"end":{"line":83,"column":1}},"16":{"start":{"line":45,"column":2},"end":{"line":45,"column":28}},"17":{"start":{"line":47,"column":2},"end":{"line":47,"column":25}},"18":{"start":{"line":48,"column":2},"end":{"line":48,"column":24}},"19":{"start":{"line":50,"column":2},"end":{"line":50,"column":42}},"20":{"start":{"line":51,"column":2},"end":{"line":75,"column":4}},"21":{"start":{"line":52,"column":4},"end":{"line":52,"column":70}},"22":{"start":{"line":54,"column":4},"end":{"line":74,"column":6}},"23":{"start":{"line":56,"column":6},"end":{"line":56,"column":40}},"24":{"start":{"line":57,"column":6},"end":{"line":57,"column":60}},"25":{"start":{"line":58,"column":6},"end":{"line":58,"column":22}},"26":{"start":{"line":60,"column":6},"end":{"line":60,"column":110}},"27":{"start":{"line":62,"column":6},"end":{"line":71,"column":7}},"28":{"start":{"line":63,"column":8},"end":{"line":63,"column":75}},"29":{"start":{"line":64,"column":8},"end":{"line":67,"column":19}},"30":{"start":{"line":70,"column":8},"end":{"line":70,"column":27}},"31":{"start":{"line":73,"column":6},"end":{"line":73,"column":21}},"32":{"start":{"line":77,"column":2},"end":{"line":77,"column":62}},"33":{"start":{"line":80,"column":2},"end":{"line":80,"column":31}},"34":{"start":{"line":82,"column":2},"end":{"line":82,"column":33}},"35":{"start":{"line":85,"column":0},"end":{"line":85,"column":21}}},"branchMap":{"1":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":25,"column":4}},{"start":{"line":25,"column":4},"end":{"line":25,"column":4}}]},"2":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"3":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},{"start":{"line":38,"column":4},"end":{"line":38,"column":4}}]},"4":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":0},"end":{"line":44,"column":0}},{"start":{"line":44,"column":0},"end":{"line":44,"column":0}}]},"5":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":17},"end":{"line":56,"column":25}},{"start":{"line":56,"column":29},"end":{"line":56,"column":39}}]},"6":{"line":57,"type":"binary-expr","locations":[{"start":{"line":57,"column":18},"end":{"line":57,"column":36}},{"start":{"line":57,"column":40},"end":{"line":57,"column":59}}]},"7":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":17},"end":{"line":60,"column":24}},{"start":{"line":60,"column":28},"end":{"line":60,"column":30}}]},"8":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":6},"end":{"line":62,"column":6}},{"start":{"line":62,"column":6},"end":{"line":62,"column":6}}]},"9":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":17},"end":{"line":63,"column":23}},{"start":{"line":63,"column":27},"end":{"line":63,"column":37}},{"start":{"line":63,"column":41},"end":{"line":63,"column":61}},{"start":{"line":63,"column":65},"end":{"line":63,"column":74}}]}},"code":["'use strict';","","var ansi = require('ansi'),","    path = require('path');","","// When the source for manifoldjs-lib is a GitHub repository, npm installs ","// separate copies of manifoldjs-lib for each platform. The singleton ensures ","// that all access the global instance; otherwise, each one gets a separate ","// instance of the logger.","var log = global.manifoldjs_logger,","    cursor = ansi(process.stdout),","    utils = require('./utils');","","var colorMap = {","  'debug': 'green',","  'info':  'brightGreen',","  'warn':  'yellow',","  'error': 'brightRed',","  'default': 'brightGreen'","};","","function getApplicationName (appPath) {","    ","  try {","    if (!appPath) {","      appPath = path.dirname(utils.getRootPackagePath());","    }","    ","    var mainModule = path.join(appPath, 'package.json');","    return require(mainModule).name;","  }","  catch (err) {","    if (err.code !== 'MODULE_NOT_FOUND') {","      throw err;","    }","    ","    var next = path.resolve(appPath, '..');","    if (appPath !== next) {","      return getApplicationName(next);   ","    }    ","  }","} ","","if (!log) {","  log = require('loglevel');","  ","  var maxLenSeverity = 5;","  var maxLenSource = 12;","","  var originalFactory = log.methodFactory;","  log.methodFactory = function (methodName, logLevel, loggerName) {","    var rawMethod = originalFactory(methodName, logLevel, loggerName);","    ","    return function (message, source, severity) {","      ","      severity = severity || methodName;","      var color = colorMap[severity] || colorMap['default'];","      cursor[color]();","","      message = (message || '').replace(/\\n/g, '\\n' + new Array(maxLenSeverity + maxLenSource + 6).join(' '));","      ","      if (methodName !== 'write') {","        source = source || loggerName || getApplicationName() || 'Unknown';","        rawMethod(","          '[' + severity + new Array(Math.max(maxLenSeverity - severity.length + 1, 0)).join(' ') + '] ' +","          source + new Array(Math.max(maxLenSource - source.length + 1, 0)).join(' ') + ': ' +","          message);        ","      }","      else {","        rawMethod(message);","      }","       ","      cursor.reset();  ","    };","  };","  ","  log.write = log.methodFactory('write', log.levels.INFO, '');","  ","  // call setLevel to apply the changes","  log.setLevel(log.getLevel());","  ","  global.manifoldjs_logger = log;","}","","module.exports = log;",""],"l":{"3":1,"10":1,"14":1,"22":1,"24":0,"25":0,"26":0,"29":0,"30":0,"33":0,"34":0,"37":0,"38":0,"39":0,"44":1,"45":1,"47":1,"48":1,"50":1,"51":1,"52":3,"54":3,"56":0,"57":0,"58":0,"60":0,"62":0,"63":0,"64":0,"70":0,"73":0,"77":1,"80":1,"82":1,"85":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/utils.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/utils.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":1,"11":0,"12":1,"13":0,"14":1,"15":1,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":1,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":2,"49":2,"50":0,"51":0,"52":2,"53":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,2],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":2},"fnMap":{"1":{"name":"parseJSON","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":26}}},"2":{"name":"isFunction","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":27}}},"3":{"name":"isString","line":23,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":25}}},"4":{"name":"capitalize","line":27,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":29}}},"5":{"name":"newGuid","line":31,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":20}}},"6":{"name":"s4","line":32,"loc":{"start":{"line":32,"column":2},"end":{"line":32,"column":16}}},"7":{"name":"sanitizeName","line":43,"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":29}}},"8":{"name":"removeDupesInPlace","line":78,"loc":{"start":{"line":78,"column":0},"end":{"line":78,"column":46}}},"9":{"name":"isURL","line":91,"loc":{"start":{"line":91,"column":0},"end":{"line":91,"column":22}}},"10":{"name":"getDefaultShortName","line":95,"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":39}}},"11":{"name":"(anonymous_11)","line":100,"loc":{"start":{"line":100,"column":9},"end":{"line":100,"column":28}}},"12":{"name":"(anonymous_12)","line":101,"loc":{"start":{"line":101,"column":29},"end":{"line":101,"column":49}}},"13":{"name":"getRootPackagePath","line":110,"loc":{"start":{"line":110,"column":0},"end":{"line":110,"column":30}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":5,"column":25}},"2":{"start":{"line":7,"column":0},"end":{"line":15,"column":1}},"3":{"start":{"line":8,"column":2},"end":{"line":14,"column":3}},"4":{"start":{"line":9,"column":4},"end":{"line":9,"column":60}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":34}},"6":{"start":{"line":13,"column":4},"end":{"line":13,"column":21}},"7":{"start":{"line":18,"column":0},"end":{"line":21,"column":1}},"8":{"start":{"line":19,"column":2},"end":{"line":19,"column":19}},"9":{"start":{"line":20,"column":2},"end":{"line":20,"column":69}},"10":{"start":{"line":23,"column":0},"end":{"line":25,"column":1}},"11":{"start":{"line":24,"column":2},"end":{"line":24,"column":34}},"12":{"start":{"line":27,"column":0},"end":{"line":29,"column":1}},"13":{"start":{"line":28,"column":2},"end":{"line":28,"column":105}},"14":{"start":{"line":31,"column":0},"end":{"line":40,"column":1}},"15":{"start":{"line":32,"column":2},"end":{"line":36,"column":3}},"16":{"start":{"line":33,"column":4},"end":{"line":35,"column":20}},"17":{"start":{"line":38,"column":2},"end":{"line":39,"column":36}},"18":{"start":{"line":43,"column":0},"end":{"line":75,"column":1}},"19":{"start":{"line":44,"column":2},"end":{"line":44,"column":27}},"20":{"start":{"line":47,"column":2},"end":{"line":47,"column":63}},"21":{"start":{"line":49,"column":2},"end":{"line":49,"column":20}},"22":{"start":{"line":50,"column":2},"end":{"line":68,"column":47}},"23":{"start":{"line":51,"column":4},"end":{"line":51,"column":41}},"24":{"start":{"line":54,"column":4},"end":{"line":54,"column":56}},"25":{"start":{"line":57,"column":4},"end":{"line":57,"column":53}},"26":{"start":{"line":60,"column":4},"end":{"line":60,"column":59}},"27":{"start":{"line":63,"column":4},"end":{"line":63,"column":56}},"28":{"start":{"line":66,"column":4},"end":{"line":66,"column":53}},"29":{"start":{"line":70,"column":2},"end":{"line":72,"column":3}},"30":{"start":{"line":71,"column":4},"end":{"line":71,"column":38}},"31":{"start":{"line":74,"column":2},"end":{"line":74,"column":23}},"32":{"start":{"line":78,"column":0},"end":{"line":88,"column":1}},"33":{"start":{"line":79,"column":2},"end":{"line":85,"column":3}},"34":{"start":{"line":80,"column":4},"end":{"line":84,"column":5}},"35":{"start":{"line":81,"column":6},"end":{"line":83,"column":7}},"36":{"start":{"line":82,"column":8},"end":{"line":82,"column":25}},"37":{"start":{"line":87,"column":2},"end":{"line":87,"column":13}},"38":{"start":{"line":90,"column":0},"end":{"line":90,"column":9495}},"39":{"start":{"line":91,"column":0},"end":{"line":93,"column":1}},"40":{"start":{"line":92,"column":2},"end":{"line":92,"column":59}},"41":{"start":{"line":95,"column":0},"end":{"line":107,"column":1}},"42":{"start":{"line":96,"column":2},"end":{"line":96,"column":21}},"43":{"start":{"line":97,"column":2},"end":{"line":104,"column":7}},"44":{"start":{"line":101,"column":6},"end":{"line":103,"column":9}},"45":{"start":{"line":102,"column":8},"end":{"line":102,"column":53}},"46":{"start":{"line":106,"column":2},"end":{"line":106,"column":19}},"47":{"start":{"line":110,"column":0},"end":{"line":120,"column":1}},"48":{"start":{"line":111,"column":2},"end":{"line":111,"column":54}},"49":{"start":{"line":113,"column":2},"end":{"line":117,"column":3}},"50":{"start":{"line":114,"column":4},"end":{"line":116,"column":5}},"51":{"start":{"line":115,"column":6},"end":{"line":115,"column":47}},"52":{"start":{"line":119,"column":2},"end":{"line":119,"column":31}},"53":{"start":{"line":122,"column":0},"end":{"line":134,"column":2}}},"branchMap":{"1":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":9},"end":{"line":20,"column":13}},{"start":{"line":20,"column":17},"end":{"line":20,"column":68}}]},"2":{"line":28,"type":"cond-expr","locations":[{"start":{"line":28,"column":50},"end":{"line":28,"column":98}},{"start":{"line":28,"column":101},"end":{"line":28,"column":103}}]},"3":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":10},"end":{"line":28,"column":26}},{"start":{"line":28,"column":30},"end":{"line":28,"column":47}}]},"4":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":2},"end":{"line":70,"column":2}},{"start":{"line":70,"column":2},"end":{"line":70,"column":2}}]},"5":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":6},"end":{"line":81,"column":6}},{"start":{"line":81,"column":6},"end":{"line":81,"column":6}}]},"6":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":10},"end":{"line":92,"column":34}},{"start":{"line":92,"column":38},"end":{"line":92,"column":57}}]},"7":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":2},"end":{"line":113,"column":2}},{"start":{"line":113,"column":2},"end":{"line":113,"column":2}}]},"8":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":4},"end":{"line":114,"column":4}},{"start":{"line":114,"column":4},"end":{"line":114,"column":4}}]}},"code":["'use strict';","","var os = require('os'),","  url = require('url'),","  path = require('path');","","function parseJSON (data) {","  try {","    var jsonString = data.toString().replace(/^\\uFEFF/, '');","    return JSON.parse(jsonString);","  } ","  catch (e) {","    return undefined;","  }","}","","// Extracted from: http://stackoverflow.com/questions/5999998/how-can-i-check-if-a-javascript-variable-is-function-type","function isFunction (data) {","  var getType = {};","  return data && getType.toString.call(data) === '[object Function]';","}","","function isString (data) {","  return typeof data === 'string';","}","","function capitalize (string) {","  return (isString(string) && string.length > 0 ? string.charAt(0).toUpperCase() + string.slice(1) : '');","}","","function newGuid () {","  function s4() {","    return Math.floor((1 + Math.random()) * 0x10000)","      .toString(16)","      .substring(1);","  }","","  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +","    s4() + '-' + s4() + s4() + s4();","}","","// This function sanitizes the name to only allow the following: ([A-Za-z][A-Za-z0-9]*)(\\.[A-Za-z][A-Za-z0-9]*)*","function sanitizeName (name) {","  var sanitizedName = name;","  ","  // Remove all invalid characters","  sanitizedName = sanitizedName.replace(/[^A-Za-z0-9\\.]/g, '');","","  var currentLength;","  do {","    currentLength = sanitizedName.length;","    ","    // If the name starts with a number, remove the number ","    sanitizedName = sanitizedName.replace(/^[0-9]/, '');","    ","    // If the name starts with a dot, remove the dot","    sanitizedName = sanitizedName.replace(/^\\./, '');","    ","    // If there is a number right after a dot, remove the number","    sanitizedName = sanitizedName.replace(/\\.[0-9]/g, '.');","    ","    // If there are two consecutive dots, remove one dot","    sanitizedName = sanitizedName.replace(/\\.\\./g, '.');","    ","    // if the name ends with a dot, remove the dot","    sanitizedName = sanitizedName.replace(/\\.$/, '');","  }","  while (currentLength > sanitizedName.length);","","  if (sanitizedName.length === 0) {","    sanitizedName = 'myManifoldJSApp';","  }","","  return sanitizedName;","}","","// Function to remove duplicates from any array","function removeDupesInPlace (arr, comparator) {","  for (var i = 0; i < arr.length; i++) {","    for (var j = arr.length - 1; j > i; j--) {","      if (comparator(arr[j], arr[i])) {","        arr.splice(j, 1);","      }","    }","  }","  ","  return arr;","}","","var urlRegex = /^(?:[a-z](?:[-a-z0-9\\+\\.])*:(?:\\/\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:])*@)?(?:\\[(?:(?:(?:[0-9a-f]{1,4:){6(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|::(?:[0-9a-f]{1,4:){5(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:[0-9a-f]{1,4)?::(?:[0-9a-f]{1,4:){4(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:[0-9a-f]{1,4:[0-9a-f]{1,4)?::(?:[0-9a-f]{1,4:){3(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:(?:[0-9a-f]{1,4:){0,2[0-9a-f]{1,4)?::(?:[0-9a-f]{1,4:){2(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:(?:[0-9a-f]{1,4:){0,3[0-9a-f]{1,4)?::[0-9a-f]{1,4:(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:(?:[0-9a-f]{1,4:){0,4[0-9a-f]{1,4)?::(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:(?:[0-9a-f]{1,4:){0,5[0-9a-f]{1,4)?::[0-9a-f]{1,4|(?:(?:[0-9a-f]{1,4:){0,6[0-9a-f]{1,4)?::)|v[0-9a-f]+[-a-z0-9\\._~!\\$&'\\(\\)\\*\\+,;=:]+)\\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=@])*)(?::[0-9]*)?(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@]))*)*|\\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@]))+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@]))*)*)?|(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@]))+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@])))(?:\\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@])|[\\uE000-\\uF8FF\\uF0000-\\uFFFFD|\\u100000-\\u10FFFD\\/\\?])*)?(?:\\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@])|[\\/\\?])*)?|(?:\\/\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:])*@)?(?:\\[(?:(?:(?:[0-9a-f]{1,4:){6(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|::(?:[0-9a-f]{1,4:){5(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:[0-9a-f]{1,4)?::(?:[0-9a-f]{1,4:){4(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:[0-9a-f]{1,4:[0-9a-f]{1,4)?::(?:[0-9a-f]{1,4:){3(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:(?:[0-9a-f]{1,4:){0,2[0-9a-f]{1,4)?::(?:[0-9a-f]{1,4:){2(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:(?:[0-9a-f]{1,4:){0,3[0-9a-f]{1,4)?::[0-9a-f]{1,4:(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:(?:[0-9a-f]{1,4:){0,4[0-9a-f]{1,4)?::(?:[0-9a-f]{1,4:[0-9a-f]{1,4|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3)|(?:(?:[0-9a-f]{1,4:){0,5[0-9a-f]{1,4)?::[0-9a-f]{1,4|(?:(?:[0-9a-f]{1,4:){0,6[0-9a-f]{1,4)?::)|v[0-9a-f]+[-a-z0-9\\._~!\\$&'\\(\\)\\*\\+,;=:]+)\\]|(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(?:\\.(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3|(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=@])*)(?::[0-9]*)?(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@]))*)*|\\/(?:(?:(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@]))+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@]))*)*)?|(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=@])+)(?:\\/(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@]))*)*|(?!(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@])))(?:\\?(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@])|[\\uE000-\\uF8FF\\uF0000-\\uFFFFD|\\u100000-\\u10FFFD\\/\\?])*)?(?:\\#(?:(?:%[0-9a-f][0-9a-f]|[-a-z0-9\\._~\\uA0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\u10000-\\u1FFFD\\u20000-\\u2FFFD\\u30000-\\u3FFFD\\u40000-\\u4FFFD\\u50000-\\u5FFFD\\u60000-\\u6FFFD\\u70000-\\u7FFFD\\u80000-\\u8FFFD\\u90000-\\u9FFFD\\uA0000-\\uAFFFD\\uB0000-\\uBFFFD\\uC0000-\\uCFFFD\\uD0000-\\uDFFFD\\uE1000-\\uEFFFD!\\$&'\\(\\)\\*\\+,;=:@])|[\\/\\?])*)?)$/i;","function isURL (data) {","  return (typeof data === 'string' && urlRegex.test(data));","}","","function getDefaultShortName (siteUrl) {","  var shortName = '';","  url.parse(siteUrl)","    .hostname","    .split('.')","    .map(function (segment) {","      segment.split('-').map(function (fraction) {","        shortName = shortName + capitalize(fraction);","      });","    });","","  return shortName;","}","","// Handle Node hosted in IIS","function getRootPackagePath() {","  var fileName = path.basename(require.main.filename);","","  if (fileName === 'interceptor.js') {","    if (require.main.children.length > 0) {","      return require.main.children[0].filename;","    }","  }","","  return require.main.filename;","}","","module.exports = {","  parseJSON: parseJSON,","  isFunction: isFunction,","  isString: isString,","  capitalize: capitalize,","  newGuid: newGuid,","  sanitizeName: sanitizeName,","  removeDupesInPlace: removeDupesInPlace,","  isURL: isURL,","  isWindows: /^win/.test(os.platform()),","  getDefaultShortName: getDefaultShortName,","  getRootPackagePath: getRootPackagePath","};",""],"l":{"3":1,"7":1,"8":0,"9":0,"10":0,"13":0,"18":1,"19":0,"20":0,"23":1,"24":0,"27":1,"28":0,"31":1,"32":1,"33":0,"38":0,"43":1,"44":0,"47":0,"49":0,"50":0,"51":0,"54":0,"57":0,"60":0,"63":0,"66":0,"70":0,"71":0,"74":0,"78":1,"79":0,"80":0,"81":0,"82":0,"87":0,"90":1,"91":1,"92":0,"95":1,"96":0,"97":0,"101":0,"102":0,"106":0,"110":1,"111":2,"113":2,"114":0,"115":0,"119":2,"122":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/iconTools.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/iconTools.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"getIcon","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":50}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":42},"end":{"line":17,"column":54}}},"3":{"name":"(anonymous_3)","line":18,"loc":{"start":{"line":18,"column":48},"end":{"line":18,"column":68}}},"4":{"name":"copyDefaultIcon","line":30,"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":87}}},"5":{"name":"(anonymous_5)","line":42,"loc":{"start":{"line":42,"column":48},"end":{"line":42,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":21}},"3":{"start":{"line":7,"column":0},"end":{"line":9,"column":25}},"4":{"start":{"line":11,"column":0},"end":{"line":28,"column":1}},"5":{"start":{"line":13,"column":1},"end":{"line":13,"column":45}},"6":{"start":{"line":15,"column":1},"end":{"line":15,"column":92}},"7":{"start":{"line":17,"column":1},"end":{"line":27,"column":21}},"8":{"start":{"line":18,"column":4},"end":{"line":25,"column":7}},"9":{"start":{"line":19,"column":6},"end":{"line":22,"column":7}},"10":{"start":{"line":21,"column":8},"end":{"line":21,"column":178}},"11":{"start":{"line":24,"column":6},"end":{"line":24,"column":26}},"12":{"start":{"line":30,"column":0},"end":{"line":48,"column":1}},"13":{"start":{"line":33,"column":1},"end":{"line":35,"column":2}},"14":{"start":{"line":34,"column":2},"end":{"line":34,"column":39}},"15":{"start":{"line":37,"column":1},"end":{"line":37,"column":81}},"16":{"start":{"line":39,"column":1},"end":{"line":39,"column":42}},"17":{"start":{"line":40,"column":1},"end":{"line":40,"column":50}},"18":{"start":{"line":42,"column":1},"end":{"line":47,"column":21}},"19":{"start":{"line":43,"column":4},"end":{"line":43,"column":42}},"20":{"start":{"line":44,"column":4},"end":{"line":44,"column":44}},"21":{"start":{"line":45,"column":4},"end":{"line":45,"column":33}},"22":{"start":{"line":50,"column":0},"end":{"line":53,"column":2}}},"branchMap":{"1":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":6},"end":{"line":19,"column":6}},{"start":{"line":19,"column":6},"end":{"line":19,"column":6}}]},"2":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":10},"end":{"line":19,"column":37}},{"start":{"line":19,"column":41},"end":{"line":19,"column":77}}]},"3":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},{"start":{"line":33,"column":1},"end":{"line":33,"column":1}}]},"4":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":5},"end":{"line":33,"column":19}},{"start":{"line":33,"column":23},"end":{"line":33,"column":47}}]},"5":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":21},"end":{"line":43,"column":35}},{"start":{"line":43,"column":39},"end":{"line":43,"column":41}}]}},"code":["'use strict';","","var path = require('path');","","var Q = require('q');","","var fileTools = require('./fileTools'),","\t\tdownload = require('./download'),","\t\tlog = require('./log');","","function getIcon(iconUrl, iconFilePath, callback) {","","\tvar iconFolder = path.dirname(iconFilePath);","","\tlog.debug('Downloading icon file from \\'' + iconUrl + '\\' to \\'' + iconFilePath + '\\'...');","  ","\treturn fileTools.mkdirp(iconFolder).then(function () {","    return download(iconUrl, iconFilePath).then(function (response) {","      if (response.statusCode === 200 && !response.contentType.match(/image/)) {","        // If not an image, return an error","        return Q.reject(new Error('Downloaded file  \\'' + iconUrl + '\\' does not appear to be an image. The content type of the response was \\'' + response.contentType + '\\'.'));","      }","      ","      return iconFilePath;","    });","  })","  .nodeify(callback);","}","","function copyDefaultIcon(manifest, platformId, iconSize, source, targetPath, callback) {","\t","\t// platform already contains an icon with this size - skip","\tif (manifest.icons && manifest.icons[iconSize]) {","\t\treturn Q.resolve().nodeify(callback);","\t}","","\tlog.info('Copying the default icon for the \\'' + platformId + '\\' platform...');","","\tvar iconFilename = path.basename(source);","\tvar target = path.join(targetPath, iconFilename);","","\treturn fileTools.copyFile(source, target).then(function () {","    manifest.icons = manifest.icons || {};","    manifest.icons[iconSize] = iconFilename;","    return Q.resolve(targetPath);","  })","  .nodeify(callback);","}","","module.exports = {","\tgetIcon: getIcon,","\tcopyDefaultIcon: copyDefaultIcon","};",""],"l":{"3":1,"5":1,"7":1,"11":1,"13":0,"15":0,"17":0,"18":0,"19":0,"21":0,"24":0,"30":1,"33":0,"34":0,"37":0,"39":0,"40":0,"42":0,"43":0,"44":0,"45":0,"50":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/download.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/download.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"download","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":55}}},"2":{"name":"(anonymous_2)","line":56,"loc":{"start":{"line":56,"column":24},"end":{"line":56,"column":39}}},"3":{"name":"(anonymous_3)","line":61,"loc":{"start":{"line":61,"column":14},"end":{"line":61,"column":32}}},"4":{"name":"(anonymous_4)","line":62,"loc":{"start":{"line":62,"column":15},"end":{"line":62,"column":30}}},"5":{"name":"(anonymous_5)","line":80,"loc":{"start":{"line":80,"column":19},"end":{"line":80,"column":31}}},"6":{"name":"(anonymous_6)","line":85,"loc":{"start":{"line":85,"column":62},"end":{"line":85,"column":77}}},"7":{"name":"(anonymous_7)","line":93,"loc":{"start":{"line":93,"column":17},"end":{"line":93,"column":32}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":7,"column":27}},"2":{"start":{"line":9,"column":0},"end":{"line":9,"column":21}},"3":{"start":{"line":11,"column":0},"end":{"line":98,"column":1}},"4":{"start":{"line":13,"column":2},"end":{"line":13,"column":32}},"5":{"start":{"line":15,"column":2},"end":{"line":22,"column":3}},"6":{"start":{"line":18,"column":4},"end":{"line":21,"column":5}},"7":{"start":{"line":19,"column":6},"end":{"line":19,"column":38}},"8":{"start":{"line":20,"column":6},"end":{"line":20,"column":32}},"9":{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},"10":{"start":{"line":25,"column":4},"end":{"line":25,"column":103}},"11":{"start":{"line":28,"column":2},"end":{"line":28,"column":49}},"12":{"start":{"line":29,"column":2},"end":{"line":31,"column":3}},"13":{"start":{"line":30,"column":4},"end":{"line":30,"column":104}},"14":{"start":{"line":33,"column":2},"end":{"line":33,"column":19}},"15":{"start":{"line":35,"column":2},"end":{"line":38,"column":3}},"16":{"start":{"line":36,"column":4},"end":{"line":36,"column":45}},"17":{"start":{"line":37,"column":4},"end":{"line":37,"column":41}},"18":{"start":{"line":40,"column":2},"end":{"line":45,"column":4}},"19":{"start":{"line":47,"column":2},"end":{"line":51,"column":3}},"20":{"start":{"line":48,"column":4},"end":{"line":50,"column":6}},"21":{"start":{"line":53,"column":2},"end":{"line":53,"column":58}},"22":{"start":{"line":55,"column":2},"end":{"line":55,"column":27}},"23":{"start":{"line":56,"column":2},"end":{"line":95,"column":5}},"24":{"start":{"line":59,"column":4},"end":{"line":63,"column":5}},"25":{"start":{"line":60,"column":6},"end":{"line":62,"column":57}},"26":{"start":{"line":61,"column":34},"end":{"line":61,"column":59}},"27":{"start":{"line":62,"column":32},"end":{"line":62,"column":53}},"28":{"start":{"line":66,"column":4},"end":{"line":71,"column":5}},"29":{"start":{"line":67,"column":6},"end":{"line":67,"column":138}},"30":{"start":{"line":68,"column":6},"end":{"line":68,"column":38}},"31":{"start":{"line":69,"column":6},"end":{"line":69,"column":44}},"32":{"start":{"line":70,"column":6},"end":{"line":70,"column":34}},"33":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"34":{"start":{"line":75,"column":6},"end":{"line":75,"column":168}},"35":{"start":{"line":79,"column":4},"end":{"line":92,"column":9}},"36":{"start":{"line":81,"column":8},"end":{"line":81,"column":38}},"37":{"start":{"line":82,"column":8},"end":{"line":82,"column":112}},"38":{"start":{"line":85,"column":8},"end":{"line":91,"column":11}},"39":{"start":{"line":86,"column":10},"end":{"line":88,"column":11}},"40":{"start":{"line":87,"column":12},"end":{"line":87,"column":40}},"41":{"start":{"line":90,"column":10},"end":{"line":90,"column":173}},"42":{"start":{"line":94,"column":4},"end":{"line":94,"column":32}},"43":{"start":{"line":97,"column":2},"end":{"line":97,"column":44}},"44":{"start":{"line":100,"column":0},"end":{"line":100,"column":26}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":15,"column":2}},{"start":{"line":15,"column":2},"end":{"line":15,"column":2}}]},"2":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":6},"end":{"line":15,"column":39}},{"start":{"line":15,"column":43},"end":{"line":15,"column":77}}]},"3":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"4":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":2},"end":{"line":24,"column":2}},{"start":{"line":24,"column":2},"end":{"line":24,"column":2}}]},"5":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":32}},{"start":{"line":24,"column":36},"end":{"line":24,"column":61}}]},"6":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":2},"end":{"line":29,"column":2}},{"start":{"line":29,"column":2},"end":{"line":29,"column":2}}]},"7":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":2},"end":{"line":35,"column":2}},{"start":{"line":35,"column":2},"end":{"line":35,"column":2}}]},"8":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":10},"end":{"line":42,"column":18}},{"start":{"line":42,"column":23},"end":{"line":42,"column":59}}]},"9":{"line":42,"type":"cond-expr","locations":[{"start":{"line":42,"column":51},"end":{"line":42,"column":54}},{"start":{"line":42,"column":57},"end":{"line":42,"column":59}}]},"10":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":2},"end":{"line":47,"column":2}},{"start":{"line":47,"column":2},"end":{"line":47,"column":2}}]},"11":{"line":53,"type":"cond-expr","locations":[{"start":{"line":53,"column":45},"end":{"line":53,"column":50}},{"start":{"line":53,"column":53},"end":{"line":53,"column":57}}]},"12":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":59,"column":4}},{"start":{"line":59,"column":4},"end":{"line":59,"column":4}}]},"13":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":4},"end":{"line":66,"column":4}},{"start":{"line":66,"column":4},"end":{"line":66,"column":4}}]},"14":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"15":{"line":82,"type":"cond-expr","locations":[{"start":{"line":82,"column":58},"end":{"line":82,"column":96}},{"start":{"line":82,"column":99},"end":{"line":82,"column":111}}]},"16":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":10},"end":{"line":86,"column":10}},{"start":{"line":86,"column":10},"end":{"line":86,"column":10}}]}},"code":["'use strict';","","var fs = require('fs'),","    http = require('http'),","    https = require('https'),","    url = require('url'),","    path = require('path');","    ","var Q = require('q');","","function download (inputUri, outputFilePath, callback) {","","  var uri = url.parse(inputUri);","","  if (inputUri.indexOf('http://') !== 0 && inputUri.indexOf('https://') !== 0) {","    // this is to detect scenarios like localhost:8080 where localhost is","    // treated as protocol even if it's not.","    if (inputUri.indexOf(uri.protocol + '//') !== 0) {","      inputUri = 'http://' + inputUri;","      uri = url.parse(inputUri);","    }","  }","","  if (!(uri.protocol === 'http:' || uri.protocol === 'https:')) {","    return Q.reject(new Error('Invalid protocol. Only http & https are supported.')).nodeify(callback);","  }","","  var downloadDir = path.dirname(outputFilePath);","  if (!fs.existsSync(downloadDir)) {","    return Q.reject(new Error('Invalid download directory \\'' + downloadDir + '\\'.')).nodeify(callback);","  }","","  var lastModified;","","  if (fs.existsSync(outputFilePath)) {","    var stats = fs.lstatSync(outputFilePath);","    lastModified = new Date(stats.mtime);","  }","","  var options = {","    host: uri.hostname,","    port: uri.port || (uri.protocol === 'https:' ? 443 : 80),","    path: uri.path,","    agent: false","  };","","  if (lastModified) {","    options.headers = {","      'if-modified-since': lastModified.toUTCString()","    };","  }","","  var protocol = uri.protocol === 'https:' ? https : http;","","  var deferred = Q.defer();","  protocol.get(options, function (res) {","    ","    // If Moved Permanently or Found, redirect to new URL","    if ([301, 302].indexOf(res.statusCode) > -1) {","      return download(res.headers.location, outputFilePath)","        .then(function (result) { deferred.resolve(result); })","        .catch(function (err) { deferred.reject(err); });","    }","    ","    // If not OK or Not Modified, throw error","    if ([200, 304].indexOf(res.statusCode) === -1) {","      var err = new Error('Error downloading \\'' + inputUri + '\\'. Response was \\'' + res.statusCode + ' - ' + res.statusMessage + '\\'.');","      err.statusCode = res.statusCode;","      err.statusMessage = res.statusMessage;","      return deferred.reject(err);","    }","","    // If Not Modified, ignore","    if (res.statusCode === 304) {","      return deferred.resolve({ 'path': outputFilePath, 'statusCode': res.statusCode, 'statusMessage': res.statusMessage, 'contentType': res.headers['content-type'] });","    }","","    // Else save","    res.pipe(fs.createWriteStream(outputFilePath))","      .on('close', function () {","        var lastAccessed = new Date();","        var lastModified = res.headers['last-modified'] ? new Date(res.headers['last-modified']) : lastAccessed;","      ","        // update the last modified time of the file to match the response header","        fs.utimes(outputFilePath, lastAccessed, lastModified, function (err) {","          if (err) {","            return deferred.reject(err);","          }","","          return deferred.resolve({ 'path': outputFilePath, 'statusCode': res.statusCode, 'statusMessage': res.statusMessage, 'contentType': res.headers['content-type']  });","        });","      });","  }).on('error', function (err) {","    return deferred.reject(err);","  });","","  return deferred.promise.nodeify(callback);","}","","module.exports = download;",""],"l":{"3":1,"9":1,"11":1,"13":0,"15":0,"18":0,"19":0,"20":0,"24":0,"25":0,"28":0,"29":0,"30":0,"33":0,"35":0,"36":0,"37":0,"40":0,"47":0,"48":0,"53":0,"55":0,"56":0,"59":0,"60":0,"61":0,"62":0,"66":0,"67":0,"68":0,"69":0,"70":0,"74":0,"75":0,"79":0,"81":0,"82":0,"85":0,"86":0,"87":0,"90":0,"94":0,"97":0,"100":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/index.js","s":{"1":1,"2":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":5,"column":55}},"2":{"start":{"line":7,"column":0},"end":{"line":22,"column":2}}},"branchMap":{},"code":["'use strict';","","var manifestConverter = require('./manifestConverter'), ","    manifestLoader = require('./manifestLoader'),","    manifestValidator = require('./manifestValidator');","","module.exports = {","  getManifestFromSite:          manifestLoader.getManifestFromSite,","  getManifestFromFile:          manifestLoader.getManifestFromFile,","  writeToFile:                  manifestLoader.writeToFile,","  fetchManifestUrlFromSite:     manifestLoader.fetchManifestUrlFromSite,","  downloadManifestFromUrl:      manifestLoader.downloadManifestFromUrl,","  listAvailableManifestFormats: manifestLoader.listAvailableManifestFormats,","  convertTo:                    manifestConverter.convertTo,","  validateManifest:             manifestValidator.validateManifest,","  loadValidationRules:          manifestValidator.loadValidationRules,","  runValidationRules:           manifestValidator.runValidationRules,","  imageValidation:              manifestValidator.imageValidation,","  imageGroupValidation:         manifestValidator.imageGroupValidation,","  validateAndNormalizeStartUrl: manifestValidator.validateAndNormalizeStartUrl,","  applyValidationRules:         manifestValidator.applyValidationRules  ","};",""],"l":{"3":1,"7":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestConverter.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestConverter.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"convertTo","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":57}}},"2":{"name":"(anonymous_2)","line":45,"loc":{"start":{"line":45,"column":50},"end":{"line":45,"column":85}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":5,"column":32}},"2":{"start":{"line":7,"column":0},"end":{"line":52,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":14,"column":3}},"4":{"start":{"line":10,"column":4},"end":{"line":13,"column":5}},"5":{"start":{"line":11,"column":6},"end":{"line":11,"column":30}},"6":{"start":{"line":12,"column":6},"end":{"line":12,"column":31}},"7":{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},"8":{"start":{"line":17,"column":4},"end":{"line":17,"column":80}},"9":{"start":{"line":20,"column":2},"end":{"line":20,"column":51}},"10":{"start":{"line":21,"column":2},"end":{"line":23,"column":3}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":52}},"12":{"start":{"line":25,"column":2},"end":{"line":29,"column":3}},"13":{"start":{"line":26,"column":4},"end":{"line":26,"column":46}},"14":{"start":{"line":28,"column":4},"end":{"line":28,"column":50}},"15":{"start":{"line":31,"column":2},"end":{"line":36,"column":3}},"16":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"17":{"start":{"line":33,"column":6},"end":{"line":33,"column":41}},"18":{"start":{"line":35,"column":4},"end":{"line":35,"column":45}},"19":{"start":{"line":38,"column":2},"end":{"line":38,"column":57}},"20":{"start":{"line":39,"column":2},"end":{"line":39,"column":59}},"21":{"start":{"line":41,"column":2},"end":{"line":43,"column":3}},"22":{"start":{"line":42,"column":4},"end":{"line":42,"column":69}},"23":{"start":{"line":45,"column":2},"end":{"line":51,"column":5}},"24":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"25":{"start":{"line":47,"column":6},"end":{"line":47,"column":47}},"26":{"start":{"line":50,"column":4},"end":{"line":50,"column":71}},"27":{"start":{"line":54,"column":0},"end":{"line":56,"column":2}}},"branchMap":{"1":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":2},"end":{"line":9,"column":2}},{"start":{"line":9,"column":2},"end":{"line":9,"column":2}}]},"2":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":4}},{"start":{"line":10,"column":4},"end":{"line":10,"column":4}}]},"3":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":16,"column":2}},{"start":{"line":16,"column":2},"end":{"line":16,"column":2}}]},"4":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":6},"end":{"line":16,"column":19}},{"start":{"line":16,"column":23},"end":{"line":16,"column":44}}]},"5":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":21,"column":2}},{"start":{"line":21,"column":2},"end":{"line":21,"column":2}}]},"6":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":6},"end":{"line":21,"column":25}},{"start":{"line":21,"column":29},"end":{"line":21,"column":64}}]},"7":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":2},"end":{"line":25,"column":2}},{"start":{"line":25,"column":2},"end":{"line":25,"column":2}}]},"8":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":6},"end":{"line":25,"column":18}},{"start":{"line":25,"column":22},"end":{"line":25,"column":50}}]},"9":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":2},"end":{"line":31,"column":2}},{"start":{"line":31,"column":2},"end":{"line":31,"column":2}}]},"10":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":32,"column":4}},{"start":{"line":32,"column":4},"end":{"line":32,"column":4}}]},"11":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":2},"end":{"line":41,"column":2}},{"start":{"line":41,"column":2},"end":{"line":41,"column":2}}]},"12":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":6},"end":{"line":41,"column":26}},{"start":{"line":41,"column":30},"end":{"line":41,"column":51}}]},"13":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":46,"column":4}},{"start":{"line":46,"column":4},"end":{"line":46,"column":4}}]}},"code":["'use strict';","","var constants = require('../constants'),","    transformations = require('./manifestTransformations'),","    utils = require('../utils');","","function convertTo(manifestInfo, outputFormat, callback) {","","  if (arguments.length < 3) {","    if (utils.isFunction(outputFormat)) {","      callback = outputFormat;","      outputFormat = undefined;      ","    }","  }","  ","  if (!manifestInfo || !manifestInfo.content) {","    return callback(new Error('Manifest content is empty or not initialized.'));","  }","","  var inputFormat = constants.BASE_MANIFEST_FORMAT;","  if (manifestInfo.format && utils.isString(manifestInfo.format)) {","    inputFormat = manifestInfo.format.toLowerCase();","  }","","  if (outputFormat && utils.isString(outputFormat)) {","    outputFormat = outputFormat.toLowerCase();","  } else {","    outputFormat = constants.BASE_MANIFEST_FORMAT;","  }","","  if (inputFormat === outputFormat) {","    if (!manifestInfo.format) {","      manifestInfo.format = outputFormat;","    }","    return callback(undefined, manifestInfo);","  }","","  var inputTransformation = transformations[inputFormat];","  var outputTransformation = transformations[outputFormat];","","  if (!inputTransformation || !outputTransformation) {","    return callback(new Error('Manifest format is not recognized.'));","  }","","  inputTransformation.convertToBase(manifestInfo, function (err, resultManifestInfo) {","    if (err) {","      return callback(err, resultManifestInfo);","    }","","    outputTransformation.convertFromBase(resultManifestInfo, callback);","  });","}","","module.exports = {","  convertTo: convertTo","};"],"l":{"3":1,"7":1,"9":0,"10":0,"11":0,"12":0,"16":0,"17":0,"20":0,"21":0,"22":0,"25":0,"26":0,"28":0,"31":0,"32":0,"33":0,"35":0,"38":0,"39":0,"41":0,"42":0,"45":0,"46":0,"47":0,"50":0,"54":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/constants.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/constants.js","s":{"1":1,"2":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":40,"column":2}},"2":{"start":{"line":42,"column":0},"end":{"line":49,"column":2}}},"branchMap":{},"code":["'use strict';","","var validationConstants = {","  levels: {","    error: 'error',","    warning: 'warning',","    suggestion: 'suggestion'","  },","  codes: {","    requiredValue: 'required-value',","    invalidValue: 'invalid-value',","    missingImageGroup: 'missing-image-group',","    missingImage: 'missing-image',","    missingImageOnsite: 'missing-image-onsite',","    requiredAbsoluteUrl: 'requiredAbsoluteUrl',","    deprecatedMember: 'deprecatedMember'","  },","  manifestMembers: {","    lang: 'lang',","    name: 'name',","    short_name: 'short_name',","    scope: 'scope',","    icons: 'icons',","    display: 'display',","    orientation: 'orientation',","    start_url: 'start_url',","    theme_color: 'theme_color',","    related_applications: 'related_applications',","    prefer_related_applications: 'prefer_related_applications',","    description: 'description',","    background_color: 'background_color',","    dir: 'dir',","    mjs_access_whitelist: 'mjs_access_whitelist',","    mjs_api_access: 'mjs_api_acces',","    mjs_extended_scope: 'mjs_extended_scope'","  },","  platforms: {","    all: 'general'","  }","};","","module.exports = {","  BASE_MANIFEST_FORMAT: 'w3c',","  CHROME_MANIFEST_FORMAT: 'chromeos',","  FIREFOX_MANIFEST_FORMAT: 'firefox',","  WINDOWS10_MANIFEST_FORMAT: 'windows10',","  EDGE_EXTENSION_MANIFEST_FORMAT: 'edgeextension',","  validation: validationConstants","};",""],"l":{"3":1,"42":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestTransformations.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestTransformations.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":5,"7":5,"8":1},"b":{},"f":{"1":5},"fnMap":{"1":{"name":"(anonymous_1)","line":10,"loc":{"start":{"line":10,"column":44},"end":{"line":10,"column":59}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":66}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":17}},"5":{"start":{"line":10,"column":0},"end":{"line":13,"column":3}},"6":{"start":{"line":11,"column":2},"end":{"line":11,"column":59}},"7":{"start":{"line":12,"column":2},"end":{"line":12,"column":70}},"8":{"start":{"line":15,"column":0},"end":{"line":15,"column":25}}},"branchMap":{},"code":["'use strict';","","var fs = require('fs');","var path = require('path');","","var transformationsPath = path.join(__dirname, 'transformations');","","var modules = {};","","fs.readdirSync(transformationsPath).forEach(function(file) {","  var moduleName = path.basename(file, path.extname(file));","  modules[moduleName] = require(path.join(transformationsPath, file));","});","","module.exports = modules;",""],"l":{"3":1,"4":1,"6":1,"8":1,"10":1,"11":5,"12":5,"15":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/chromeos.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/chromeos.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":1,"32":1,"33":1,"34":1,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"convertToBase","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":47}}},"2":{"name":"(anonymous_2)","line":41,"loc":{"start":{"line":41,"column":48},"end":{"line":41,"column":64}}},"3":{"name":"(anonymous_3)","line":43,"loc":{"start":{"line":43,"column":11},"end":{"line":43,"column":26}}},"4":{"name":"(anonymous_4)","line":57,"loc":{"start":{"line":57,"column":22},"end":{"line":57,"column":37}}},"5":{"name":"matchFormat","line":82,"loc":{"start":{"line":82,"column":0},"end":{"line":82,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":4,"column":35}},"2":{"start":{"line":6,"column":0},"end":{"line":69,"column":1}},"3":{"start":{"line":7,"column":2},"end":{"line":9,"column":3}},"4":{"start":{"line":8,"column":4},"end":{"line":8,"column":80}},"5":{"start":{"line":11,"column":2},"end":{"line":11,"column":46}},"6":{"start":{"line":13,"column":2},"end":{"line":16,"column":4}},"7":{"start":{"line":18,"column":2},"end":{"line":20,"column":3}},"8":{"start":{"line":19,"column":4},"end":{"line":19,"column":52}},"9":{"start":{"line":22,"column":2},"end":{"line":24,"column":3}},"10":{"start":{"line":23,"column":4},"end":{"line":23,"column":42}},"11":{"start":{"line":26,"column":2},"end":{"line":28,"column":3}},"12":{"start":{"line":27,"column":4},"end":{"line":27,"column":48}},"13":{"start":{"line":31,"column":2},"end":{"line":36,"column":3}},"14":{"start":{"line":32,"column":4},"end":{"line":35,"column":7}},"15":{"start":{"line":39,"column":2},"end":{"line":39,"column":42}},"16":{"start":{"line":40,"column":2},"end":{"line":46,"column":3}},"17":{"start":{"line":41,"column":4},"end":{"line":45,"column":7}},"18":{"start":{"line":42,"column":6},"end":{"line":42,"column":21}},"19":{"start":{"line":44,"column":6},"end":{"line":44,"column":45}},"20":{"start":{"line":48,"column":2},"end":{"line":50,"column":3}},"21":{"start":{"line":49,"column":4},"end":{"line":49,"column":42}},"22":{"start":{"line":52,"column":2},"end":{"line":61,"column":3}},"23":{"start":{"line":53,"column":4},"end":{"line":53,"column":65}},"24":{"start":{"line":54,"column":4},"end":{"line":54,"column":150}},"25":{"start":{"line":56,"column":4},"end":{"line":60,"column":5}},"26":{"start":{"line":57,"column":6},"end":{"line":59,"column":9}},"27":{"start":{"line":58,"column":8},"end":{"line":58,"column":103}},"28":{"start":{"line":63,"column":2},"end":{"line":66,"column":4}},"29":{"start":{"line":68,"column":2},"end":{"line":68,"column":52}},"30":{"start":{"line":72,"column":0},"end":{"line":72,"column":76}},"31":{"start":{"line":74,"column":0},"end":{"line":77,"column":74}},"32":{"start":{"line":79,"column":0},"end":{"line":79,"column":44}},"33":{"start":{"line":80,"column":0},"end":{"line":80,"column":75}},"34":{"start":{"line":82,"column":0},"end":{"line":127,"column":1}},"35":{"start":{"line":83,"column":2},"end":{"line":83,"column":24}},"36":{"start":{"line":86,"column":2},"end":{"line":90,"column":3}},"37":{"start":{"line":87,"column":4},"end":{"line":89,"column":5}},"38":{"start":{"line":88,"column":6},"end":{"line":88,"column":19}},"39":{"start":{"line":92,"column":2},"end":{"line":95,"column":3}},"40":{"start":{"line":94,"column":4},"end":{"line":94,"column":17}},"41":{"start":{"line":97,"column":2},"end":{"line":124,"column":3}},"42":{"start":{"line":98,"column":4},"end":{"line":103,"column":5}},"43":{"start":{"line":99,"column":6},"end":{"line":99,"column":45}},"44":{"start":{"line":100,"column":6},"end":{"line":102,"column":7}},"45":{"start":{"line":101,"column":8},"end":{"line":101,"column":21}},"46":{"start":{"line":105,"column":4},"end":{"line":123,"column":5}},"47":{"start":{"line":106,"column":6},"end":{"line":122,"column":7}},"48":{"start":{"line":107,"column":8},"end":{"line":121,"column":9}},"49":{"start":{"line":108,"column":10},"end":{"line":110,"column":11}},"50":{"start":{"line":109,"column":12},"end":{"line":109,"column":25}},"51":{"start":{"line":112,"column":10},"end":{"line":120,"column":11}},"52":{"start":{"line":113,"column":12},"end":{"line":119,"column":13}},"53":{"start":{"line":114,"column":14},"end":{"line":118,"column":15}},"54":{"start":{"line":115,"column":16},"end":{"line":117,"column":17}},"55":{"start":{"line":116,"column":18},"end":{"line":116,"column":31}},"56":{"start":{"line":126,"column":2},"end":{"line":126,"column":14}},"57":{"start":{"line":129,"column":0},"end":{"line":132,"column":2}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":2},"end":{"line":7,"column":2}},{"start":{"line":7,"column":2},"end":{"line":7,"column":2}}]},"2":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":6},"end":{"line":7,"column":19}},{"start":{"line":7,"column":23},"end":{"line":7,"column":44}}]},"3":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":2},"end":{"line":18,"column":2}},{"start":{"line":18,"column":2},"end":{"line":18,"column":2}}]},"4":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":2},"end":{"line":22,"column":2}},{"start":{"line":22,"column":2},"end":{"line":22,"column":2}}]},"5":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":2},"end":{"line":26,"column":2}},{"start":{"line":26,"column":2},"end":{"line":26,"column":2}}]},"6":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":2},"end":{"line":40,"column":2}},{"start":{"line":40,"column":2},"end":{"line":40,"column":2}}]},"7":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":6},"end":{"line":40,"column":13}},{"start":{"line":40,"column":17},"end":{"line":40,"column":39}}]},"8":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":2},"end":{"line":48,"column":2}},{"start":{"line":48,"column":2},"end":{"line":48,"column":2}}]},"9":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":2},"end":{"line":52,"column":2}},{"start":{"line":52,"column":2},"end":{"line":52,"column":2}}]},"10":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":56,"column":4}},{"start":{"line":56,"column":4},"end":{"line":56,"column":4}}]},"11":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":15}},{"start":{"line":56,"column":19},"end":{"line":56,"column":41}}]},"12":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":4},"end":{"line":87,"column":4}},{"start":{"line":87,"column":4},"end":{"line":87,"column":4}}]},"13":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":2},"end":{"line":92,"column":2}},{"start":{"line":92,"column":2},"end":{"line":92,"column":2}}]},"14":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":6},"end":{"line":92,"column":47}},{"start":{"line":93,"column":4},"end":{"line":93,"column":53}}]},"15":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":4},"end":{"line":98,"column":4}},{"start":{"line":98,"column":4},"end":{"line":98,"column":4}}]},"16":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":6},"end":{"line":100,"column":6}},{"start":{"line":100,"column":6},"end":{"line":100,"column":6}}]},"17":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":105,"column":4}},{"start":{"line":105,"column":4},"end":{"line":105,"column":4}}]},"18":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":107,"column":8}},{"start":{"line":107,"column":8},"end":{"line":107,"column":8}}]},"19":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":10},"end":{"line":108,"column":10}},{"start":{"line":108,"column":10},"end":{"line":108,"column":10}}]},"20":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":10},"end":{"line":112,"column":10}},{"start":{"line":112,"column":10},"end":{"line":112,"column":10}}]},"21":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":14},"end":{"line":114,"column":14}},{"start":{"line":114,"column":14},"end":{"line":114,"column":14}}]},"22":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":16},"end":{"line":115,"column":16}},{"start":{"line":115,"column":16},"end":{"line":115,"column":16}}]}},"code":["'use strict';","","var constants = require('../../constants'),","    utils = require('../../utils');","","function convertToBase(manifestInfo, callback) {","  if (!manifestInfo || !manifestInfo.content) {","    return callback(new Error('Manifest content is empty or not initialized.'));","  }","  ","  var originalManifest = manifestInfo.content;","","  var manifest = {","    start_url: originalManifest.app.launch.web_url,","    icons: []","  };","","  if (originalManifest.default_locale) {","    manifest.lang = originalManifest.default_locale;","  }","","  if (originalManifest.name) {","    manifest.name = originalManifest.name;","  }","","  if (originalManifest.short_name) {","    manifest.name = originalManifest.short_name;","  }","    ","  // Extract icons","  for (var size in originalManifest.icons) {","    manifest.icons.push({","      sizes: size + 'x' + size,","      src: originalManifest.icons[size]","    });","  }","","  // Extract app URLs","  var appUrls = originalManifest.app.urls;","  if (appUrls && Array.isArray(appUrls)) {","    appUrls = utils.removeDupesInPlace(appUrls, function (a, b) {","      return a === b;","    }).map(function (url) {","      return url.trim().replace(/\\/$/, '/*');","    });","  }","","  if (appUrls) {","    manifest.mjs_extended_scope = appUrls;","  }","","  if (originalManifest.permissions) {","    var allPermissions = originalManifest.permissions.join(', ');","    manifest.mjs_api_access = [{ 'match': originalManifest.app.launch.web_url.replace(/\\/$/, '/*'), 'platform': 'chrome', 'access': allPermissions }];","","    if (appUrls && Array.isArray(appUrls)) {","      appUrls.forEach(function (url) {","        manifest.mjs_api_access.push({ 'match': url, 'platform': 'chrome', 'access': allPermissions });","      });","    }","  }","","  var convertedManifestInfo = {","    'content': manifest,","    'format': constants.BASE_MANIFEST_FORMAT","  };","","  return callback(undefined, convertedManifestInfo);","}","","// see https://developer.chrome.com/webstore/hosted_apps","var requiredRootProperties = ['name', 'version', 'manifest_version', 'app'];","","var validRootProperties = ['name', 'description', 'version', 'manifest_version', 'app',","                           'background_page', 'icons', 'key',","                           'minimum_chrome_version', 'offline_enabled',","                           'permissions', 'update_url', 'default_locale'];","","var validAppProperties = ['urls', 'launch'];","var validAppLaunchProperties = ['web_url', 'container', 'height', 'width'];","","function matchFormat(manifestObj) {","  var lowercasePropName;","","  // check required fields","  for (var i = 0; i < requiredRootProperties.length; i++) {","    if (!manifestObj.hasOwnProperty(requiredRootProperties[i])) {","      return false;","    }","  }","","  if (!manifestObj.app.hasOwnProperty('launch') ||","    !manifestObj.app.launch.hasOwnProperty('web_url')) {","    return false;","  }","","  for (var prop in manifestObj) {","    if (manifestObj.hasOwnProperty(prop)) {","      lowercasePropName = prop.toLowerCase();","      if (validRootProperties.indexOf(lowercasePropName) === -1) {","        return false;","      }","    }","","    if (lowercasePropName === 'app') {","      for (var appProp in manifestObj.app) {","        if (manifestObj.app.hasOwnProperty(appProp)) {","          if (validAppProperties.indexOf(appProp) === -1) {","            return false;","          }","","          if (appProp === 'launch') {","            for (var appLaunchProp in manifestObj.app.launch) {","              if (manifestObj.app.launch.hasOwnProperty(appLaunchProp)) {","                if (validAppLaunchProperties.indexOf(appLaunchProp) === -1) {","                  return false;","                }","              }","            }","          }","        }","      }","    }","  }","","  return true;","}","","module.exports = {","  convertToBase: convertToBase,","  matchFormat: matchFormat","};",""],"l":{"3":1,"6":1,"7":0,"8":0,"11":0,"13":0,"18":0,"19":0,"22":0,"23":0,"26":0,"27":0,"31":0,"32":0,"39":0,"40":0,"41":0,"42":0,"44":0,"48":0,"49":0,"52":0,"53":0,"54":0,"56":0,"57":0,"58":0,"63":0,"68":0,"72":1,"74":1,"79":1,"80":1,"82":1,"83":0,"86":0,"87":0,"88":0,"92":0,"94":0,"97":0,"98":0,"99":0,"100":0,"101":0,"105":0,"106":0,"107":0,"108":0,"109":0,"112":0,"113":0,"114":0,"115":0,"116":0,"126":0,"129":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/edgeextension.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/edgeextension.js","s":{"1":1,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"convertToBase","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":48}}},"2":{"name":"convertFromBase","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":50}}},"3":{"name":"matchFormat","line":24,"loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":35}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":9,"column":1}},"2":{"start":{"line":4,"column":2},"end":{"line":6,"column":3}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":80}},"4":{"start":{"line":8,"column":2},"end":{"line":8,"column":43}},"5":{"start":{"line":11,"column":0},"end":{"line":17,"column":1}},"6":{"start":{"line":12,"column":2},"end":{"line":14,"column":3}},"7":{"start":{"line":13,"column":4},"end":{"line":13,"column":80}},"8":{"start":{"line":16,"column":2},"end":{"line":16,"column":43}},"9":{"start":{"line":19,"column":0},"end":{"line":22,"column":49}},"10":{"start":{"line":24,"column":0},"end":{"line":37,"column":1}},"11":{"start":{"line":25,"column":2},"end":{"line":25,"column":24}},"12":{"start":{"line":27,"column":2},"end":{"line":34,"column":3}},"13":{"start":{"line":28,"column":4},"end":{"line":33,"column":5}},"14":{"start":{"line":29,"column":6},"end":{"line":29,"column":45}},"15":{"start":{"line":30,"column":6},"end":{"line":32,"column":7}},"16":{"start":{"line":31,"column":8},"end":{"line":31,"column":21}},"17":{"start":{"line":36,"column":2},"end":{"line":36,"column":14}},"18":{"start":{"line":39,"column":0},"end":{"line":43,"column":2}}},"branchMap":{"1":{"line":4,"type":"if","locations":[{"start":{"line":4,"column":2},"end":{"line":4,"column":2}},{"start":{"line":4,"column":2},"end":{"line":4,"column":2}}]},"2":{"line":4,"type":"binary-expr","locations":[{"start":{"line":4,"column":6},"end":{"line":4,"column":19}},{"start":{"line":4,"column":23},"end":{"line":4,"column":44}}]},"3":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]},"4":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":6},"end":{"line":12,"column":19}},{"start":{"line":12,"column":23},"end":{"line":12,"column":44}}]},"5":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"6":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":6},"end":{"line":30,"column":6}},{"start":{"line":30,"column":6},"end":{"line":30,"column":6}}]},"7":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":10},"end":{"line":30,"column":63}},{"start":{"line":30,"column":67},"end":{"line":30,"column":102}}]}},"code":["'use strict';","","function convertToBase (manifestInfo, callback) {","  if (!manifestInfo || !manifestInfo.content) {","    return callback(new Error('Manifest content is empty or not initialized.'));","  }","","  return callback(undefined, manifestInfo);","}","","function convertFromBase (manifestInfo, callback) {","  if (!manifestInfo || !manifestInfo.content) {","    return callback(new Error('Manifest content is empty or not initialized.'));","  }","","  return callback(undefined, manifestInfo);","}","","var validRootProperties = ['name', 'author', 'version', 'default_locale', 'description', 'manifest_version', 'icons', 'content_security_policy',","                           'browser_action', 'page_action', 'background', 'commands', 'content_scripts', 'externally_connectable', 'homepage_url',","                           'addressbar', 'options_page', 'permissions', 'optional_permissions', 'web_accessible_resources', 'minimum_edge_version',","                           'key', '-ms-preload'];","","function matchFormat (manifestObj) {","  var lowercasePropName;","","  for (var prop in manifestObj) {","    if (manifestObj.hasOwnProperty(prop)) {","      lowercasePropName = prop.toLowerCase();","      if (validRootProperties.indexOf(lowercasePropName) === -1 && lowercasePropName.indexOf('_') <= 0) {","        return false;","      }","    }","  }","","  return true;","}","","module.exports = {","  convertToBase: convertToBase,","  convertFromBase: convertFromBase,","  matchFormat: matchFormat","};",""],"l":{"3":1,"4":0,"5":0,"8":0,"11":1,"12":0,"13":0,"16":0,"19":1,"24":1,"25":0,"27":0,"28":0,"29":0,"30":0,"31":0,"36":0,"39":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/firefox.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/firefox.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"convertToBase","line":19,"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":47}}},"2":{"name":"matchFormat","line":62,"loc":{"start":{"line":62,"column":0},"end":{"line":62,"column":34}}}},"statementMap":{"1":{"start":{"line":17,"column":0},"end":{"line":17,"column":35}},"2":{"start":{"line":19,"column":0},"end":{"line":50,"column":1}},"3":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"4":{"start":{"line":21,"column":4},"end":{"line":21,"column":80}},"5":{"start":{"line":24,"column":2},"end":{"line":24,"column":46}},"6":{"start":{"line":25,"column":2},"end":{"line":29,"column":4}},"7":{"start":{"line":31,"column":2},"end":{"line":31,"column":17}},"8":{"start":{"line":33,"column":2},"end":{"line":40,"column":3}},"9":{"start":{"line":34,"column":4},"end":{"line":39,"column":5}},"10":{"start":{"line":35,"column":6},"end":{"line":38,"column":9}},"11":{"start":{"line":42,"column":2},"end":{"line":42,"column":25}},"12":{"start":{"line":44,"column":2},"end":{"line":47,"column":4}},"13":{"start":{"line":49,"column":2},"end":{"line":49,"column":52}},"14":{"start":{"line":52,"column":0},"end":{"line":52,"column":56}},"15":{"start":{"line":54,"column":0},"end":{"line":57,"column":56}},"16":{"start":{"line":59,"column":0},"end":{"line":59,"column":44}},"17":{"start":{"line":60,"column":0},"end":{"line":60,"column":75}},"18":{"start":{"line":62,"column":0},"end":{"line":107,"column":1}},"19":{"start":{"line":63,"column":2},"end":{"line":63,"column":24}},"20":{"start":{"line":66,"column":2},"end":{"line":70,"column":3}},"21":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"22":{"start":{"line":68,"column":6},"end":{"line":68,"column":19}},"23":{"start":{"line":72,"column":2},"end":{"line":75,"column":3}},"24":{"start":{"line":74,"column":4},"end":{"line":74,"column":17}},"25":{"start":{"line":77,"column":2},"end":{"line":104,"column":3}},"26":{"start":{"line":78,"column":4},"end":{"line":83,"column":5}},"27":{"start":{"line":79,"column":6},"end":{"line":79,"column":45}},"28":{"start":{"line":80,"column":6},"end":{"line":82,"column":7}},"29":{"start":{"line":81,"column":8},"end":{"line":81,"column":21}},"30":{"start":{"line":85,"column":4},"end":{"line":103,"column":5}},"31":{"start":{"line":86,"column":6},"end":{"line":102,"column":7}},"32":{"start":{"line":87,"column":8},"end":{"line":101,"column":9}},"33":{"start":{"line":88,"column":10},"end":{"line":90,"column":11}},"34":{"start":{"line":89,"column":12},"end":{"line":89,"column":25}},"35":{"start":{"line":92,"column":10},"end":{"line":100,"column":11}},"36":{"start":{"line":93,"column":12},"end":{"line":99,"column":13}},"37":{"start":{"line":94,"column":14},"end":{"line":98,"column":15}},"38":{"start":{"line":95,"column":16},"end":{"line":97,"column":17}},"39":{"start":{"line":96,"column":18},"end":{"line":96,"column":31}},"40":{"start":{"line":106,"column":2},"end":{"line":106,"column":14}},"41":{"start":{"line":109,"column":0},"end":{"line":112,"column":2}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"2":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":6},"end":{"line":20,"column":19}},{"start":{"line":20,"column":23},"end":{"line":20,"column":44}}]},"3":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":17},"end":{"line":26,"column":45}},{"start":{"line":26,"column":49},"end":{"line":26,"column":52}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"5":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]},"6":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":2},"end":{"line":72,"column":2}},{"start":{"line":72,"column":2},"end":{"line":72,"column":2}}]},"7":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":6},"end":{"line":72,"column":47}},{"start":{"line":73,"column":4},"end":{"line":73,"column":53}}]},"8":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":78,"column":4}},{"start":{"line":78,"column":4},"end":{"line":78,"column":4}}]},"9":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":6},"end":{"line":80,"column":6}},{"start":{"line":80,"column":6},"end":{"line":80,"column":6}}]},"10":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":4}},{"start":{"line":85,"column":4},"end":{"line":85,"column":4}}]},"11":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":87,"column":8}},{"start":{"line":87,"column":8},"end":{"line":87,"column":8}}]},"12":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":10},"end":{"line":88,"column":10}},{"start":{"line":88,"column":10},"end":{"line":88,"column":10}}]},"13":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":10},"end":{"line":92,"column":10}},{"start":{"line":92,"column":10},"end":{"line":92,"column":10}}]},"14":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":14},"end":{"line":94,"column":14}},{"start":{"line":94,"column":14},"end":{"line":94,"column":14}}]},"15":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":16},"end":{"line":95,"column":16}},{"start":{"line":95,"column":16},"end":{"line":95,"column":16}}]}},"code":["'use strict';","","// App manifest must contain the following fields (if publishing to Firefox Marketplace):","//  - name","//  - description","//  - launch_path(for Packaged Apps)","//  - icons (1 icon of 128x128 required, 1 icon of 512x512 recommended)","//  - developer","//  - default_locale (if locales is defined)","//  - type (for privileged and internal(certified) apps)","","// App manifest must contain the following fields (if NOT publishing to Firefox Marketplace):","//  - name","//  - description","//  - icons (1 icon of 128x128 required, 1 icon of 512x512 recommended)","","var c = require('../../constants');","","function convertToBase(manifestInfo, callback) {","  if (!manifestInfo || !manifestInfo.content) {","    return callback(new Error('Manifest content is empty or not initialized.'));","  }","","  var originalManifest = manifestInfo.content;","  var manifest = {","    'start_url': originalManifest.launch_path || '/',","    'name': originalManifest.description,","    'short_name': originalManifest.name","  };","","  var icons = [];","","  for (var size in originalManifest.icons) {","    if (originalManifest.icons.hasOwnProperty(size)) {","      icons.push({","        'sizes' : size + 'x' + size,","        'src': originalManifest.icons[size]","      });","    }","  }","","  manifest.icons = icons;","","  var convertedManifestInfo = {","    'content': manifest,","    'format': c.BASE_MANIFEST_FORMAT","  };","","  return callback(undefined, convertedManifestInfo);","}","","var requiredRootProperties = ['name', 'version', 'app'];","","var validRootProperties = ['name', 'description', 'version', 'app',","                           'background_page', 'icons', 'key',","                           'minimum_chrome_version', 'offline_enabled',","                           'permissions', 'update_url'];","","var validAppProperties = ['urls', 'launch'];","var validAppLaunchProperties = ['web_url', 'container', 'height', 'width'];","","function matchFormat(manifestObj) {","  var lowercasePropName;","","  // check required fields","  for (var i = 0; i < requiredRootProperties.length; i++) {","    if (!manifestObj.hasOwnProperty(requiredRootProperties[i])) {","      return false;","    }","  }","","  if (!manifestObj.app.hasOwnProperty('launch') ||","    !manifestObj.app.launch.hasOwnProperty('web_url')) {","    return false;","  }","","  for (var prop in manifestObj) {","    if (manifestObj.hasOwnProperty(prop)) {","      lowercasePropName = prop.toLowerCase();","      if (validRootProperties.indexOf(lowercasePropName) === -1) {","        return false;","      }","    }","","    if (lowercasePropName === 'app') {","      for (var appProp in manifestObj.app) {","        if (manifestObj.app.hasOwnProperty(appProp)) {","          if (validAppProperties.indexOf(appProp) === -1) {","            return false;","          }","","          if (appProp === 'launch') {","            for (var appLaunchProp in manifestObj.app.launch) {","              if (manifestObj.app.launch.hasOwnProperty(appLaunchProp)) {","                if (validAppLaunchProperties.indexOf(appLaunchProp) === -1) {","                  return false;","                }","              }","            }","          }","        }","      }","    }","  }","","  return true;","}","","module.exports = {","  convertToBase: convertToBase,","  matchFormat: matchFormat","};",""],"l":{"17":1,"19":1,"20":0,"21":0,"24":0,"25":0,"31":0,"33":0,"34":0,"35":0,"42":0,"44":0,"49":0,"52":1,"54":1,"59":1,"60":1,"62":1,"63":0,"66":0,"67":0,"68":0,"72":0,"74":0,"77":0,"78":0,"79":0,"80":0,"81":0,"85":0,"86":0,"87":0,"88":0,"89":0,"92":0,"93":0,"94":0,"95":0,"96":0,"106":0,"109":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/w3c.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/w3c.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"convertToBase","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":48}}},"2":{"name":"convertFromBase","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":50}}},"3":{"name":"matchFormat","line":22,"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":35}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":4,"column":27}},"2":{"start":{"line":6,"column":0},"end":{"line":12,"column":1}},"3":{"start":{"line":7,"column":2},"end":{"line":9,"column":3}},"4":{"start":{"line":8,"column":4},"end":{"line":8,"column":80}},"5":{"start":{"line":11,"column":2},"end":{"line":11,"column":43}},"6":{"start":{"line":14,"column":0},"end":{"line":20,"column":1}},"7":{"start":{"line":15,"column":2},"end":{"line":17,"column":3}},"8":{"start":{"line":16,"column":4},"end":{"line":16,"column":80}},"9":{"start":{"line":19,"column":2},"end":{"line":19,"column":43}},"10":{"start":{"line":22,"column":0},"end":{"line":49,"column":1}},"11":{"start":{"line":23,"column":2},"end":{"line":23,"column":80}},"12":{"start":{"line":24,"column":2},"end":{"line":24,"column":66}},"13":{"start":{"line":26,"column":2},"end":{"line":26,"column":24}},"14":{"start":{"line":28,"column":2},"end":{"line":46,"column":3}},"15":{"start":{"line":29,"column":4},"end":{"line":45,"column":5}},"16":{"start":{"line":30,"column":6},"end":{"line":30,"column":45}},"17":{"start":{"line":31,"column":6},"end":{"line":33,"column":7}},"18":{"start":{"line":32,"column":8},"end":{"line":32,"column":21}},"19":{"start":{"line":35,"column":6},"end":{"line":44,"column":7}},"20":{"start":{"line":36,"column":8},"end":{"line":36,"column":38}},"21":{"start":{"line":37,"column":8},"end":{"line":43,"column":9}},"22":{"start":{"line":38,"column":10},"end":{"line":42,"column":11}},"23":{"start":{"line":39,"column":12},"end":{"line":41,"column":13}},"24":{"start":{"line":40,"column":14},"end":{"line":40,"column":27}},"25":{"start":{"line":48,"column":2},"end":{"line":48,"column":14}},"26":{"start":{"line":51,"column":0},"end":{"line":55,"column":2}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":2},"end":{"line":7,"column":2}},{"start":{"line":7,"column":2},"end":{"line":7,"column":2}}]},"2":{"line":7,"type":"binary-expr","locations":[{"start":{"line":7,"column":6},"end":{"line":7,"column":19}},{"start":{"line":7,"column":23},"end":{"line":7,"column":44}}]},"3":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":15,"column":2}},{"start":{"line":15,"column":2},"end":{"line":15,"column":2}}]},"4":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":6},"end":{"line":15,"column":19}},{"start":{"line":15,"column":23},"end":{"line":15,"column":44}}]},"5":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":29,"column":4}},{"start":{"line":29,"column":4},"end":{"line":29,"column":4}}]},"6":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":6},"end":{"line":31,"column":6}},{"start":{"line":31,"column":6},"end":{"line":31,"column":6}}]},"7":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":10},"end":{"line":31,"column":62}},{"start":{"line":31,"column":66},"end":{"line":31,"column":101}}]},"8":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":6},"end":{"line":35,"column":6}},{"start":{"line":35,"column":6},"end":{"line":35,"column":6}}]},"9":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":12},"end":{"line":39,"column":12}},{"start":{"line":39,"column":12},"end":{"line":39,"column":12}}]},"10":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":16},"end":{"line":39,"column":49}},{"start":{"line":39,"column":53},"end":{"line":39,"column":113}}]}},"code":["'use strict';","","var fs = require('fs'),","    path = require('path');","","function convertToBase (manifestInfo, callback) {","  if (!manifestInfo || !manifestInfo.content) {","    return callback(new Error('Manifest content is empty or not initialized.'));","  }","","  return callback(undefined, manifestInfo);","}","","function convertFromBase (manifestInfo, callback) {","  if (!manifestInfo || !manifestInfo.content) {","    return callback(new Error('Manifest content is empty or not initialized.'));","  }","","  return callback(undefined, manifestInfo);","}","","function matchFormat (manifestObj) {","  var schemaFile = path.resolve(__dirname, '..', 'assets', 'web-manifest.json');","  var schema = JSON.parse(fs.readFileSync(schemaFile).toString());","","  var lowercasePropName;","","  for (var prop in manifestObj) {","    if (manifestObj.hasOwnProperty(prop)) {","      lowercasePropName = prop.toLowerCase();","      if (!schema.properties.hasOwnProperty(lowercasePropName) && lowercasePropName.indexOf('_') <= 0) {","        return false;","      }","","      if (lowercasePropName === 'icons') {","        var icons = manifestObj[prop];","        for (var i = 0; i < icons.length; i++) {","          for (var iconProp in icons[i]) {","            if (icons[i].hasOwnProperty(iconProp) && !schema.definitions.icon.properties.hasOwnProperty(iconProp)) {","              return false;","            }","          }","        }","      }","    }","  }","","  return true;","}","","module.exports = {","  convertToBase: convertToBase,","  convertFromBase: convertFromBase,","  matchFormat: matchFormat","};",""],"l":{"3":1,"6":1,"7":0,"8":0,"11":0,"14":1,"15":0,"16":0,"19":0,"22":1,"23":0,"24":0,"26":0,"28":0,"29":0,"30":0,"31":0,"32":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"48":0,"51":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/windows10.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/transformations/windows10.js","s":{"1":1,"2":0,"3":1,"4":0,"5":1},"b":{},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"convertToBase","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":47}}},"2":{"name":"matchFormat","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":23}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":6,"column":1}},"2":{"start":{"line":5,"column":2},"end":{"line":5,"column":53}},"3":{"start":{"line":9,"column":0},"end":{"line":11,"column":1}},"4":{"start":{"line":10,"column":2},"end":{"line":10,"column":15}},"5":{"start":{"line":13,"column":0},"end":{"line":16,"column":2}}},"branchMap":{},"code":["﻿'use strict';","","// TODO: implement convertToBase function","function convertToBase(manifestInfo, callback) {","  return callback(new Error('Not yet implemented.'));","}","","// TODO: implement matchFormat function","function matchFormat() { //param: manifestObj","  return false;","}","","module.exports = {","  convertToBase: convertToBase,","  matchFormat: matchFormat","};",""],"l":{"4":1,"5":0,"9":1,"10":0,"13":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestLoader.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestLoader.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":1,"74":0,"75":0,"76":0,"77":0,"78":1,"79":2,"80":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":2},"fnMap":{"1":{"name":"fetchManifestUrlFromSite","line":28,"loc":{"start":{"line":28,"column":0},"end":{"line":28,"column":54}}},"2":{"name":"(anonymous_2)","line":31,"loc":{"start":{"line":31,"column":28},"end":{"line":31,"column":59}}},"3":{"name":"processManifestContents","line":51,"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":66}}},"4":{"name":"(anonymous_4)","line":82,"loc":{"start":{"line":82,"column":44},"end":{"line":82,"column":72}}},"5":{"name":"downloadManifestFromUrl","line":96,"loc":{"start":{"line":96,"column":0},"end":{"line":96,"column":73}}},"6":{"name":"(anonymous_6)","line":106,"loc":{"start":{"line":106,"column":32},"end":{"line":106,"column":63}}},"7":{"name":"(anonymous_7)","line":111,"loc":{"start":{"line":111,"column":65},"end":{"line":111,"column":89}}},"8":{"name":"(anonymous_8)","line":118,"loc":{"start":{"line":118,"column":11},"end":{"line":118,"column":26}}},"9":{"name":"getManifestFromSite","line":126,"loc":{"start":{"line":126,"column":0},"end":{"line":126,"column":65}}},"10":{"name":"(anonymous_10)","line":135,"loc":{"start":{"line":135,"column":48},"end":{"line":135,"column":71}}},"11":{"name":"getManifestFromFile","line":157,"loc":{"start":{"line":157,"column":0},"end":{"line":157,"column":66}}},"12":{"name":"(anonymous_12)","line":166,"loc":{"start":{"line":166,"column":46},"end":{"line":166,"column":62}}},"13":{"name":"writeToFile","line":172,"loc":{"start":{"line":172,"column":0},"end":{"line":172,"column":56}}},"14":{"name":"listAvailableManifestFormats","line":181,"loc":{"start":{"line":181,"column":0},"end":{"line":181,"column":40}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":4,"column":25}},"2":{"start":{"line":6,"column":0},"end":{"line":8,"column":21}},"3":{"start":{"line":10,"column":0},"end":{"line":14,"column":32}},"4":{"start":{"line":17,"column":0},"end":{"line":26,"column":3}},"5":{"start":{"line":28,"column":0},"end":{"line":49,"column":1}},"6":{"start":{"line":30,"column":2},"end":{"line":30,"column":27}},"7":{"start":{"line":31,"column":2},"end":{"line":46,"column":5}},"8":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"9":{"start":{"line":33,"column":6},"end":{"line":33,"column":82}},"10":{"start":{"line":36,"column":4},"end":{"line":36,"column":31}},"11":{"start":{"line":37,"column":4},"end":{"line":37,"column":62}},"12":{"start":{"line":38,"column":4},"end":{"line":43,"column":5}},"13":{"start":{"line":39,"column":6},"end":{"line":39,"column":53}},"14":{"start":{"line":40,"column":6},"end":{"line":42,"column":7}},"15":{"start":{"line":41,"column":8},"end":{"line":41,"column":71}},"16":{"start":{"line":45,"column":4},"end":{"line":45,"column":41}},"17":{"start":{"line":48,"column":2},"end":{"line":48,"column":44}},"18":{"start":{"line":51,"column":0},"end":{"line":94,"column":1}},"19":{"start":{"line":52,"column":2},"end":{"line":52,"column":42}},"20":{"start":{"line":54,"column":2},"end":{"line":56,"column":3}},"21":{"start":{"line":55,"column":4},"end":{"line":55,"column":59}},"22":{"start":{"line":58,"column":2},"end":{"line":58,"column":64}},"23":{"start":{"line":60,"column":2},"end":{"line":66,"column":3}},"24":{"start":{"line":61,"column":4},"end":{"line":61,"column":60}},"25":{"start":{"line":62,"column":4},"end":{"line":62,"column":36}},"26":{"start":{"line":63,"column":9},"end":{"line":66,"column":3}},"27":{"start":{"line":64,"column":4},"end":{"line":64,"column":69}},"28":{"start":{"line":65,"column":4},"end":{"line":65,"column":191}},"29":{"start":{"line":68,"column":2},"end":{"line":68,"column":57}},"30":{"start":{"line":70,"column":2},"end":{"line":73,"column":4}},"31":{"start":{"line":75,"column":2},"end":{"line":77,"column":3}},"32":{"start":{"line":76,"column":4},"end":{"line":76,"column":40}},"33":{"start":{"line":80,"column":2},"end":{"line":80,"column":65}},"34":{"start":{"line":82,"column":2},"end":{"line":93,"column":5}},"35":{"start":{"line":84,"column":4},"end":{"line":84,"column":70}},"36":{"start":{"line":85,"column":4},"end":{"line":87,"column":5}},"37":{"start":{"line":86,"column":6},"end":{"line":86,"column":64}},"38":{"start":{"line":89,"column":4},"end":{"line":92,"column":7}},"39":{"start":{"line":96,"column":0},"end":{"line":124,"column":1}},"40":{"start":{"line":98,"column":2},"end":{"line":103,"column":3}},"41":{"start":{"line":99,"column":4},"end":{"line":102,"column":5}},"42":{"start":{"line":100,"column":6},"end":{"line":100,"column":32}},"43":{"start":{"line":101,"column":6},"end":{"line":101,"column":33}},"44":{"start":{"line":105,"column":2},"end":{"line":105,"column":27}},"45":{"start":{"line":106,"column":2},"end":{"line":121,"column":5}},"46":{"start":{"line":107,"column":4},"end":{"line":109,"column":5}},"47":{"start":{"line":108,"column":6},"end":{"line":108,"column":77}},"48":{"start":{"line":111,"column":4},"end":{"line":120,"column":7}},"49":{"start":{"line":112,"column":6},"end":{"line":114,"column":7}},"50":{"start":{"line":113,"column":8},"end":{"line":113,"column":48}},"51":{"start":{"line":116,"column":6},"end":{"line":116,"column":44}},"52":{"start":{"line":119,"column":6},"end":{"line":119,"column":34}},"53":{"start":{"line":123,"column":2},"end":{"line":123,"column":44}},"54":{"start":{"line":126,"column":0},"end":{"line":155,"column":1}},"55":{"start":{"line":128,"column":2},"end":{"line":133,"column":3}},"56":{"start":{"line":129,"column":4},"end":{"line":132,"column":5}},"57":{"start":{"line":130,"column":6},"end":{"line":130,"column":32}},"58":{"start":{"line":131,"column":6},"end":{"line":131,"column":33}},"59":{"start":{"line":135,"column":2},"end":{"line":154,"column":21}},"60":{"start":{"line":136,"column":4},"end":{"line":152,"column":5}},"61":{"start":{"line":137,"column":6},"end":{"line":137,"column":76}},"62":{"start":{"line":140,"column":6},"end":{"line":140,"column":69}},"63":{"start":{"line":142,"column":6},"end":{"line":142,"column":57}},"64":{"start":{"line":143,"column":6},"end":{"line":149,"column":8}},"65":{"start":{"line":151,"column":6},"end":{"line":151,"column":25}},"66":{"start":{"line":157,"column":0},"end":{"line":170,"column":1}},"67":{"start":{"line":159,"column":2},"end":{"line":164,"column":3}},"68":{"start":{"line":160,"column":4},"end":{"line":163,"column":5}},"69":{"start":{"line":161,"column":6},"end":{"line":161,"column":32}},"70":{"start":{"line":162,"column":6},"end":{"line":162,"column":33}},"71":{"start":{"line":166,"column":2},"end":{"line":169,"column":21}},"72":{"start":{"line":167,"column":4},"end":{"line":167,"column":67}},"73":{"start":{"line":172,"column":0},"end":{"line":179,"column":1}},"74":{"start":{"line":173,"column":2},"end":{"line":176,"column":3}},"75":{"start":{"line":174,"column":4},"end":{"line":174,"column":72}},"76":{"start":{"line":175,"column":4},"end":{"line":175,"column":74}},"77":{"start":{"line":178,"column":2},"end":{"line":178,"column":88}},"78":{"start":{"line":181,"column":0},"end":{"line":183,"column":1}},"79":{"start":{"line":182,"column":2},"end":{"line":182,"column":118}},"80":{"start":{"line":185,"column":0},"end":{"line":192,"column":2}}},"branchMap":{"1":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":32,"column":4}},{"start":{"line":32,"column":4},"end":{"line":32,"column":4}}]},"2":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":11}},{"start":{"line":32,"column":15},"end":{"line":32,"column":42}}]},"3":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},{"start":{"line":38,"column":4},"end":{"line":38,"column":4}}]},"4":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":6},"end":{"line":40,"column":6}},{"start":{"line":40,"column":6},"end":{"line":40,"column":6}}]},"5":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":2},"end":{"line":54,"column":2}},{"start":{"line":54,"column":2},"end":{"line":54,"column":2}}]},"6":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":2},"end":{"line":60,"column":2}},{"start":{"line":60,"column":2},"end":{"line":60,"column":2}}]},"7":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":9},"end":{"line":63,"column":9}},{"start":{"line":63,"column":9},"end":{"line":63,"column":9}}]},"8":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":2},"end":{"line":75,"column":2}},{"start":{"line":75,"column":2},"end":{"line":75,"column":2}}]},"9":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":4},"end":{"line":85,"column":4}},{"start":{"line":85,"column":4},"end":{"line":85,"column":4}}]},"10":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":2},"end":{"line":98,"column":2}},{"start":{"line":98,"column":2},"end":{"line":98,"column":2}}]},"11":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":4},"end":{"line":99,"column":4}},{"start":{"line":99,"column":4},"end":{"line":99,"column":4}}]},"12":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":4},"end":{"line":107,"column":4}},{"start":{"line":107,"column":4},"end":{"line":107,"column":4}}]},"13":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":8},"end":{"line":107,"column":11}},{"start":{"line":107,"column":15},"end":{"line":107,"column":42}}]},"14":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":6},"end":{"line":112,"column":6}},{"start":{"line":112,"column":6},"end":{"line":112,"column":6}}]},"15":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":2},"end":{"line":128,"column":2}},{"start":{"line":128,"column":2},"end":{"line":128,"column":2}}]},"16":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":4},"end":{"line":129,"column":4}},{"start":{"line":129,"column":4},"end":{"line":129,"column":4}}]},"17":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":4},"end":{"line":136,"column":4}},{"start":{"line":136,"column":4},"end":{"line":136,"column":4}}]},"18":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":2},"end":{"line":159,"column":2}},{"start":{"line":159,"column":2},"end":{"line":159,"column":2}}]},"19":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":4},"end":{"line":160,"column":4}},{"start":{"line":160,"column":4},"end":{"line":160,"column":4}}]},"20":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":2},"end":{"line":173,"column":2}},{"start":{"line":173,"column":2},"end":{"line":173,"column":2}}]},"21":{"line":173,"type":"binary-expr","locations":[{"start":{"line":173,"column":6},"end":{"line":173,"column":18}},{"start":{"line":173,"column":22},"end":{"line":173,"column":42}}]}},"code":["'use strict';","","var fs = require('fs'),","    url = require('url');","","var cheerio = require('cheerio'),","    request = require('request'),","    Q = require('q');","    ","var constants = require('../constants'),","    manifestConverter = require('./manifestConverter'),","    manifestTypeDetector = require('./manifestTypeDetector'),","    log = require('../log'),","    utils = require('../utils');","    ","// Request settings taken from https://github.com/InternetExplorer/modern.IE-static-code-scan/blob/master/app.js","var request = request.defaults({","  followAllRedirects: true,","  encoding: null,","  jar: false,","  headers: {","    'Accept': 'text/html, application/xhtml+xml, */*',","    'Accept-Language': 'en-US,en;q=0.5',","    'User-Agent': 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)'","  }","});","","function fetchManifestUrlFromSite (siteUrl, callback) {","  ","  var deferred = Q.defer();","  request({ uri: siteUrl }, function (err, response, body) {","    if (err || response.statusCode !== 200) {","      return deferred.reject(new Error('Failed to retrieve manifest from site.'));","    }","","    var $ = cheerio.load(body);","    var manifestUrl = $('link[rel~=\"manifest\"]').attr('href');","    if (manifestUrl) {","      var parsedManifestUrl = url.parse(manifestUrl);","      if (!parsedManifestUrl.host) {","        manifestUrl = url.resolve(siteUrl, parsedManifestUrl.pathname);","      }","    }","","    return deferred.resolve(manifestUrl);","  });","  ","  return deferred.promise.nodeify(callback);","}","","function processManifestContents (data, manifestFormat, callback) {","  var manifestObj = utils.parseJSON(data);","","  if (!manifestObj) {","    return callback(new Error('Invalid manifest format.'));","  }","","  var detectedFormat = manifestTypeDetector.detect(manifestObj);","","  if (manifestFormat) {","    log.warn('Forcing to format ' + manifestFormat + '...');","    detectedFormat = manifestFormat;","  } else if (!detectedFormat) {","    var availableFormats = listAvailableManifestFormats().join(', ');","    return callback(new Error('Unable to detect the input manifest format. Try specifying the correct format using the -f <format> option. Available formats are: ' + availableFormats + '.'));","  }","  ","  log.info('Found a ' + detectedFormat + ' manifest...');","  ","  var manifestInfo = {","    content: manifestObj,","    format: detectedFormat","  };","  ","  if (detectedFormat !== constants.CHROME_MANIFEST_FORMAT) {","    return callback(null, manifestInfo);","  }","","  // If the detected format is ChromeOS, convert it to W3C Manifest format. ","  log.info('Converting the Chrome OS manifest to W3C format...');","  ","  manifestConverter.convertTo(manifestInfo, function (err, w3cManifest) {","    // Assuming conversion was successful, running the manifest JSON through the detector again will return the W3C format type.","    detectedFormat = manifestTypeDetector.detect(w3cManifest.content);","    if (detectedFormat === constants.BASE_MANIFEST_FORMAT) {","      log.info('Conversion to W3C Manifest format successful.');","    }","","    return callback(null, {","      content: w3cManifest.content,","      format: detectedFormat","    });","  });","}","","function downloadManifestFromUrl (manifestUrl, manifestFormat, callback) {","","  if (arguments.length < 3) {","    if (utils.isFunction(manifestFormat)) {","      callback = manifestFormat;","      manifestFormat = undefined;      ","    }","  }","","  var deferred = Q.defer();","  request({ uri: manifestUrl }, function (err, response, data) {","    if (err || response.statusCode !== 200) {","      return deferred.reject(new Error('Failed to download manifest data.'));","    }","","    Q.nfcall(processManifestContents, data, manifestFormat).then(function (manifestInfo) {","      if (manifestInfo) {","        manifestInfo.generatedUrl = manifestUrl;","      }","      ","      return deferred.resolve(manifestInfo);","    })","    .catch(function (err) {","      return deferred.reject(err);","    });","  });","  ","  return deferred.promise.nodeify(callback);","}","","function getManifestFromSite (siteUrl, manifestFormat, callback) {","","  if (arguments.length < 3) {","    if (utils.isFunction(manifestFormat)) {","      callback = manifestFormat;","      manifestFormat = undefined;      ","    }","  }","","  return fetchManifestUrlFromSite(siteUrl).then(function (manifestUrl) {","    if (manifestUrl) {","      return Q.nfcall(downloadManifestFromUrl, manifestUrl, manifestFormat);","    } else {","      // TODO: review what to do in this case. (manifest meta tag is not present)","      log.warn('No manifest found. A new manifest will be created.');","","      var shortName = utils.getDefaultShortName(siteUrl);","      var manifestObj = {","        content: {","          'start_url': siteUrl,","          'short_name': shortName","        },","        format: constants.BASE_MANIFEST_FORMAT","      };","      ","      return manifestObj;","    }","  })","  .nodeify(callback);","}","","function getManifestFromFile (filePath, manifestFormat, callback) {","","  if (arguments.length < 3) {","    if (utils.isFunction(manifestFormat)) {","      callback = manifestFormat;","      manifestFormat = undefined;      ","    }","  }","","  return Q.nfcall(fs.readFile, filePath).then(function (data) {","    return Q.nfcall(processManifestContents, data, manifestFormat);    ","  })","  .nodeify(callback);","}","","function writeToFile (manifestInfo, filePath, callback) {","  if (manifestInfo && manifestInfo.content) {","    var jsonString = JSON.stringify(manifestInfo.content, undefined, 4);","    return Q.nfcall(fs.writeFile, filePath, jsonString).nodeify(callback);","  } ","  ","  return Q.reject(new Error('Manifest content is empty or invalid.')).nodeify(callback);","}","","function listAvailableManifestFormats() {","  return [constants.BASE_MANIFEST_FORMAT, constants.CHROME_MANIFEST_FORMAT, constants.EDGE_EXTENSION_MANIFEST_FORMAT];","}","","module.exports = {","  getManifestFromSite: getManifestFromSite,","  getManifestFromFile: getManifestFromFile,","  writeToFile: writeToFile,","  fetchManifestUrlFromSite: fetchManifestUrlFromSite,","  downloadManifestFromUrl: downloadManifestFromUrl,","  listAvailableManifestFormats: listAvailableManifestFormats","};",""],"l":{"3":1,"6":1,"10":1,"17":1,"28":1,"30":0,"31":0,"32":0,"33":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"45":0,"48":0,"51":1,"52":0,"54":0,"55":0,"58":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"68":0,"70":0,"75":0,"76":0,"80":0,"82":0,"84":0,"85":0,"86":0,"89":0,"96":1,"98":0,"99":0,"100":0,"101":0,"105":0,"106":0,"107":0,"108":0,"111":0,"112":0,"113":0,"116":0,"119":0,"123":0,"126":1,"128":0,"129":0,"130":0,"131":0,"135":0,"136":0,"137":0,"140":0,"142":0,"143":0,"151":0,"157":1,"159":0,"160":0,"161":0,"162":0,"166":0,"167":0,"172":1,"173":0,"174":0,"175":0,"178":0,"181":1,"182":2,"185":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestTypeDetector.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestTypeDetector.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"detect","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":29}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":59}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":32}},"3":{"start":{"line":6,"column":0},"end":{"line":25,"column":1}},"4":{"start":{"line":7,"column":2},"end":{"line":7,"column":19}},"5":{"start":{"line":8,"column":2},"end":{"line":18,"column":3}},"6":{"start":{"line":9,"column":4},"end":{"line":17,"column":5}},"7":{"start":{"line":10,"column":6},"end":{"line":16,"column":7}},"8":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"9":{"start":{"line":12,"column":10},"end":{"line":12,"column":40}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":33}},"11":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"12":{"start":{"line":21,"column":4},"end":{"line":21,"column":21}},"13":{"start":{"line":24,"column":2},"end":{"line":24,"column":20}},"14":{"start":{"line":27,"column":0},"end":{"line":29,"column":2}}},"branchMap":{"1":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":4}},{"start":{"line":9,"column":4},"end":{"line":9,"column":4}}]},"2":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":6},"end":{"line":10,"column":6}},{"start":{"line":10,"column":6},"end":{"line":10,"column":6}}]},"3":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":11,"column":8}},{"start":{"line":11,"column":8},"end":{"line":11,"column":8}}]},"4":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]}},"code":["'use strict';","","var transformations = require('./manifestTransformations');","var c = require('../constants');","","function detect(manifestObj) {","  var results = [];","  for (var formatType in transformations) {","    if (transformations.hasOwnProperty(formatType)) {","      if (transformations[formatType].matchFormat(manifestObj)) {","        if (formatType === c.BASE_MANIFEST_FORMAT) {","          return c.BASE_MANIFEST_FORMAT;","        }","","        results.push(formatType);","      }","    }","  }","","  if (results.length === 0) {","    return undefined;","  }","","  return results[0];","}","","module.exports = {","  detect: detect","};",""],"l":{"3":1,"4":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"15":0,"20":0,"21":0,"24":0,"27":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestValidator.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/manifestTools/manifestValidator.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":1,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":1,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},"fnMap":{"1":{"name":"loadValidationRules","line":16,"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":61}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":46},"end":{"line":21,"column":63}}},"3":{"name":"(anonymous_3)","line":22,"loc":{"start":{"line":22,"column":34},"end":{"line":22,"column":50}}},"4":{"name":"(anonymous_4)","line":24,"loc":{"start":{"line":24,"column":33},"end":{"line":24,"column":49}}},"5":{"name":"(anonymous_5)","line":47,"loc":{"start":{"line":47,"column":11},"end":{"line":47,"column":30}}},"6":{"name":"(anonymous_6)","line":49,"loc":{"start":{"line":49,"column":28},"end":{"line":49,"column":63}}},"7":{"name":"(anonymous_7)","line":68,"loc":{"start":{"line":68,"column":10},"end":{"line":68,"column":25}}},"8":{"name":"(anonymous_8)","line":77,"loc":{"start":{"line":77,"column":9},"end":{"line":77,"column":24}}},"9":{"name":"runValidationRules","line":83,"loc":{"start":{"line":83,"column":0},"end":{"line":83,"column":62}}},"10":{"name":"(anonymous_10)","line":88,"loc":{"start":{"line":88,"column":16},"end":{"line":88,"column":42}}},"11":{"name":"(anonymous_11)","line":92,"loc":{"start":{"line":92,"column":44},"end":{"line":92,"column":71}}},"12":{"name":"applyValidationRules","line":112,"loc":{"start":{"line":112,"column":0},"end":{"line":112,"column":75}}},"13":{"name":"validateAllPlatforms","line":116,"loc":{"start":{"line":116,"column":2},"end":{"line":116,"column":34}}},"14":{"name":"(anonymous_14)","line":119,"loc":{"start":{"line":119,"column":56},"end":{"line":119,"column":73}}},"15":{"name":"(anonymous_15)","line":120,"loc":{"start":{"line":120,"column":61},"end":{"line":120,"column":80}}},"16":{"name":"validatePlatform","line":126,"loc":{"start":{"line":126,"column":2},"end":{"line":126,"column":30}}},"17":{"name":"(anonymous_17)","line":128,"loc":{"start":{"line":128,"column":44},"end":{"line":128,"column":64}}},"18":{"name":"(anonymous_18)","line":129,"loc":{"start":{"line":129,"column":57},"end":{"line":129,"column":74}}},"19":{"name":"(anonymous_19)","line":130,"loc":{"start":{"line":130,"column":63},"end":{"line":130,"column":82}}},"20":{"name":"validateManifest","line":150,"loc":{"start":{"line":150,"column":0},"end":{"line":150,"column":64}}},"21":{"name":"(anonymous_21)","line":160,"loc":{"start":{"line":160,"column":53},"end":{"line":160,"column":80}}},"22":{"name":"imageValidation","line":166,"loc":{"start":{"line":166,"column":0},"end":{"line":166,"column":101}}},"23":{"name":"imageGroupValidation","line":209,"loc":{"start":{"line":209,"column":0},"end":{"line":209,"column":96}}},"24":{"name":"validateAndNormalizeStartUrl","line":238,"loc":{"start":{"line":238,"column":0},"end":{"line":238,"column":71}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":0},"end":{"line":11,"column":32}},"3":{"start":{"line":13,"column":0},"end":{"line":13,"column":49}},"4":{"start":{"line":16,"column":0},"end":{"line":81,"column":1}},"5":{"start":{"line":18,"column":2},"end":{"line":18,"column":31}},"6":{"start":{"line":21,"column":2},"end":{"line":80,"column":21}},"7":{"start":{"line":22,"column":4},"end":{"line":66,"column":7}},"8":{"start":{"line":23,"column":6},"end":{"line":23,"column":48}},"9":{"start":{"line":24,"column":6},"end":{"line":45,"column":9}},"10":{"start":{"line":26,"column":8},"end":{"line":34,"column":9}},"11":{"start":{"line":28,"column":10},"end":{"line":30,"column":11}},"12":{"start":{"line":29,"column":14},"end":{"line":29,"column":33}},"13":{"start":{"line":33,"column":10},"end":{"line":33,"column":51}},"14":{"start":{"line":37,"column":8},"end":{"line":37,"column":50}},"15":{"start":{"line":38,"column":8},"end":{"line":44,"column":9}},"16":{"start":{"line":40,"column":10},"end":{"line":40,"column":35}},"17":{"start":{"line":43,"column":10},"end":{"line":43,"column":125}},"18":{"start":{"line":49,"column":6},"end":{"line":65,"column":13}},"19":{"start":{"line":50,"column":8},"end":{"line":62,"column":9}},"20":{"start":{"line":51,"column":10},"end":{"line":58,"column":11}},"21":{"start":{"line":52,"column":12},"end":{"line":57,"column":13}},"22":{"start":{"line":53,"column":14},"end":{"line":53,"column":72}},"23":{"start":{"line":56,"column":14},"end":{"line":56,"column":49}},"24":{"start":{"line":61,"column":10},"end":{"line":61,"column":48}},"25":{"start":{"line":64,"column":8},"end":{"line":64,"column":31}},"26":{"start":{"line":69,"column":4},"end":{"line":71,"column":5}},"27":{"start":{"line":70,"column":6},"end":{"line":70,"column":16}},"28":{"start":{"line":74,"column":4},"end":{"line":74,"column":35}},"29":{"start":{"line":75,"column":4},"end":{"line":75,"column":50}},"30":{"start":{"line":78,"column":4},"end":{"line":78,"column":139}},"31":{"start":{"line":83,"column":0},"end":{"line":110,"column":1}},"32":{"start":{"line":85,"column":2},"end":{"line":85,"column":19}},"33":{"start":{"line":86,"column":2},"end":{"line":86,"column":30}},"34":{"start":{"line":88,"column":2},"end":{"line":105,"column":5}},"35":{"start":{"line":89,"column":4},"end":{"line":89,"column":35}},"36":{"start":{"line":90,"column":4},"end":{"line":90,"column":52}},"37":{"start":{"line":92,"column":4},"end":{"line":104,"column":7}},"38":{"start":{"line":93,"column":6},"end":{"line":95,"column":7}},"39":{"start":{"line":94,"column":8},"end":{"line":94,"column":42}},"40":{"start":{"line":97,"column":6},"end":{"line":101,"column":7}},"41":{"start":{"line":98,"column":8},"end":{"line":98,"column":48}},"42":{"start":{"line":99,"column":13},"end":{"line":101,"column":7}},"43":{"start":{"line":100,"column":8},"end":{"line":100,"column":33}},"44":{"start":{"line":103,"column":6},"end":{"line":103,"column":31}},"45":{"start":{"line":107,"column":2},"end":{"line":109,"column":23}},"46":{"start":{"line":112,"column":0},"end":{"line":148,"column":1}},"47":{"start":{"line":114,"column":2},"end":{"line":114,"column":22}},"48":{"start":{"line":116,"column":2},"end":{"line":124,"column":3}},"49":{"start":{"line":118,"column":4},"end":{"line":118,"column":69}},"50":{"start":{"line":119,"column":4},"end":{"line":123,"column":7}},"51":{"start":{"line":120,"column":6},"end":{"line":122,"column":9}},"52":{"start":{"line":121,"column":8},"end":{"line":121,"column":51}},"53":{"start":{"line":126,"column":2},"end":{"line":137,"column":3}},"54":{"start":{"line":128,"column":4},"end":{"line":134,"column":7}},"55":{"start":{"line":129,"column":6},"end":{"line":133,"column":9}},"56":{"start":{"line":130,"column":8},"end":{"line":132,"column":11}},"57":{"start":{"line":131,"column":10},"end":{"line":131,"column":53}},"58":{"start":{"line":136,"column":4},"end":{"line":136,"column":39}},"59":{"start":{"line":140,"column":2},"end":{"line":147,"column":3}},"60":{"start":{"line":141,"column":4},"end":{"line":143,"column":31}},"61":{"start":{"line":145,"column":4},"end":{"line":146,"column":31}},"62":{"start":{"line":150,"column":0},"end":{"line":164,"column":1}},"63":{"start":{"line":152,"column":2},"end":{"line":154,"column":3}},"64":{"start":{"line":153,"column":4},"end":{"line":153,"column":90}},"65":{"start":{"line":156,"column":2},"end":{"line":158,"column":3}},"66":{"start":{"line":157,"column":4},"end":{"line":157,"column":107}},"67":{"start":{"line":160,"column":2},"end":{"line":163,"column":21}},"68":{"start":{"line":161,"column":4},"end":{"line":161,"column":77}},"69":{"start":{"line":166,"column":0},"end":{"line":207,"column":1}},"70":{"start":{"line":167,"column":2},"end":{"line":167,"column":36}},"71":{"start":{"line":169,"column":2},"end":{"line":176,"column":4}},"72":{"start":{"line":178,"column":2},"end":{"line":180,"column":3}},"73":{"start":{"line":179,"column":4},"end":{"line":179,"column":39}},"74":{"start":{"line":182,"column":2},"end":{"line":182,"column":29}},"75":{"start":{"line":183,"column":2},"end":{"line":183,"column":12}},"76":{"start":{"line":185,"column":2},"end":{"line":198,"column":3}},"77":{"start":{"line":186,"column":4},"end":{"line":186,"column":44}},"78":{"start":{"line":187,"column":4},"end":{"line":187,"column":18}},"79":{"start":{"line":189,"column":4},"end":{"line":193,"column":5}},"80":{"start":{"line":190,"column":6},"end":{"line":192,"column":7}},"81":{"start":{"line":191,"column":8},"end":{"line":191,"column":21}},"82":{"start":{"line":195,"column":4},"end":{"line":197,"column":5}},"83":{"start":{"line":196,"column":6},"end":{"line":196,"column":43}},"84":{"start":{"line":200,"column":2},"end":{"line":200,"column":34}},"85":{"start":{"line":202,"column":2},"end":{"line":206,"column":3}},"86":{"start":{"line":203,"column":4},"end":{"line":203,"column":15}},"87":{"start":{"line":205,"column":4},"end":{"line":205,"column":32}},"88":{"start":{"line":209,"column":0},"end":{"line":236,"column":1}},"89":{"start":{"line":210,"column":2},"end":{"line":210,"column":36}},"90":{"start":{"line":212,"column":2},"end":{"line":219,"column":4}},"91":{"start":{"line":221,"column":2},"end":{"line":223,"column":3}},"92":{"start":{"line":222,"column":4},"end":{"line":222,"column":39}},"93":{"start":{"line":225,"column":2},"end":{"line":233,"column":3}},"94":{"start":{"line":226,"column":4},"end":{"line":226,"column":35}},"95":{"start":{"line":228,"column":4},"end":{"line":232,"column":5}},"96":{"start":{"line":229,"column":6},"end":{"line":231,"column":7}},"97":{"start":{"line":230,"column":8},"end":{"line":230,"column":26}},"98":{"start":{"line":235,"column":2},"end":{"line":235,"column":30}},"99":{"start":{"line":238,"column":0},"end":{"line":278,"column":1}},"100":{"start":{"line":239,"column":2},"end":{"line":241,"column":3}},"101":{"start":{"line":240,"column":4},"end":{"line":240,"column":90}},"102":{"start":{"line":243,"column":2},"end":{"line":249,"column":3}},"103":{"start":{"line":244,"column":4},"end":{"line":246,"column":5}},"104":{"start":{"line":245,"column":6},"end":{"line":245,"column":146}},"105":{"start":{"line":248,"column":4},"end":{"line":248,"column":41}},"106":{"start":{"line":251,"column":2},"end":{"line":275,"column":3}},"107":{"start":{"line":252,"column":4},"end":{"line":254,"column":5}},"108":{"start":{"line":253,"column":6},"end":{"line":253,"column":103}},"109":{"start":{"line":256,"column":4},"end":{"line":256,"column":43}},"110":{"start":{"line":257,"column":4},"end":{"line":257,"column":75}},"111":{"start":{"line":258,"column":4},"end":{"line":270,"column":5}},"112":{"start":{"line":260,"column":6},"end":{"line":260,"column":91}},"113":{"start":{"line":261,"column":6},"end":{"line":261,"column":71}},"114":{"start":{"line":262,"column":6},"end":{"line":262,"column":45}},"115":{"start":{"line":263,"column":6},"end":{"line":266,"column":7}},"116":{"start":{"line":264,"column":8},"end":{"line":265,"column":130}},"117":{"start":{"line":267,"column":6},"end":{"line":269,"column":7}},"118":{"start":{"line":268,"column":8},"end":{"line":268,"column":219}},"119":{"start":{"line":272,"column":4},"end":{"line":272,"column":90}},"120":{"start":{"line":274,"column":4},"end":{"line":274,"column":78}},"121":{"start":{"line":277,"column":2},"end":{"line":277,"column":43}},"122":{"start":{"line":280,"column":0},"end":{"line":288,"column":2}}},"branchMap":{"1":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":26,"column":8}},{"start":{"line":26,"column":8},"end":{"line":26,"column":8}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":10},"end":{"line":28,"column":10}},{"start":{"line":28,"column":10},"end":{"line":28,"column":10}}]},"3":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":50,"column":8}},{"start":{"line":50,"column":8},"end":{"line":50,"column":8}}]},"4":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":10},"end":{"line":51,"column":10}},{"start":{"line":51,"column":10},"end":{"line":51,"column":10}}]},"5":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":52,"column":12}},{"start":{"line":52,"column":12},"end":{"line":52,"column":12}}]},"6":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"7":{"line":75,"type":"cond-expr","locations":[{"start":{"line":75,"column":34},"end":{"line":75,"column":39}},{"start":{"line":75,"column":42},"end":{"line":75,"column":49}}]},"8":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":6},"end":{"line":93,"column":6}},{"start":{"line":93,"column":6},"end":{"line":93,"column":6}}]},"9":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":6},"end":{"line":97,"column":6}},{"start":{"line":97,"column":6},"end":{"line":97,"column":6}}]},"10":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":13},"end":{"line":99,"column":13}},{"start":{"line":99,"column":13},"end":{"line":99,"column":13}}]},"11":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":2},"end":{"line":140,"column":2}},{"start":{"line":140,"column":2},"end":{"line":140,"column":2}}]},"12":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":2},"end":{"line":152,"column":2}},{"start":{"line":152,"column":2},"end":{"line":152,"column":2}}]},"13":{"line":152,"type":"binary-expr","locations":[{"start":{"line":152,"column":6},"end":{"line":152,"column":22}},{"start":{"line":152,"column":26},"end":{"line":152,"column":50}}]},"14":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":2},"end":{"line":156,"column":2}},{"start":{"line":156,"column":2},"end":{"line":156,"column":2}}]},"15":{"line":178,"type":"if","locations":[{"start":{"line":178,"column":2},"end":{"line":178,"column":2}},{"start":{"line":178,"column":2},"end":{"line":178,"column":2}}]},"16":{"line":178,"type":"binary-expr","locations":[{"start":{"line":178,"column":6},"end":{"line":178,"column":12}},{"start":{"line":178,"column":16},"end":{"line":178,"column":34}}]},"17":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":6},"end":{"line":190,"column":6}},{"start":{"line":190,"column":6},"end":{"line":190,"column":6}}]},"18":{"line":195,"type":"if","locations":[{"start":{"line":195,"column":4},"end":{"line":195,"column":4}},{"start":{"line":195,"column":4},"end":{"line":195,"column":4}}]},"19":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":2},"end":{"line":202,"column":2}},{"start":{"line":202,"column":2},"end":{"line":202,"column":2}}]},"20":{"line":202,"type":"binary-expr","locations":[{"start":{"line":202,"column":6},"end":{"line":202,"column":24}},{"start":{"line":202,"column":28},"end":{"line":202,"column":58}}]},"21":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":2},"end":{"line":221,"column":2}},{"start":{"line":221,"column":2},"end":{"line":221,"column":2}}]},"22":{"line":221,"type":"binary-expr","locations":[{"start":{"line":221,"column":6},"end":{"line":221,"column":12}},{"start":{"line":221,"column":16},"end":{"line":221,"column":34}}]},"23":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":6},"end":{"line":229,"column":6}},{"start":{"line":229,"column":6},"end":{"line":229,"column":6}}]},"24":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":2},"end":{"line":239,"column":2}},{"start":{"line":239,"column":2},"end":{"line":239,"column":2}}]},"25":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":2},"end":{"line":243,"column":2}},{"start":{"line":243,"column":2},"end":{"line":243,"column":2}}]},"26":{"line":244,"type":"if","locations":[{"start":{"line":244,"column":4},"end":{"line":244,"column":4}},{"start":{"line":244,"column":4},"end":{"line":244,"column":4}}]},"27":{"line":251,"type":"if","locations":[{"start":{"line":251,"column":2},"end":{"line":251,"column":2}},{"start":{"line":251,"column":2},"end":{"line":251,"column":2}}]},"28":{"line":252,"type":"if","locations":[{"start":{"line":252,"column":4},"end":{"line":252,"column":4}},{"start":{"line":252,"column":4},"end":{"line":252,"column":4}}]},"29":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":4},"end":{"line":258,"column":4}},{"start":{"line":258,"column":4},"end":{"line":258,"column":4}}]},"30":{"line":258,"type":"binary-expr","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":39}},{"start":{"line":258,"column":43},"end":{"line":258,"column":101}}]},"31":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":6},"end":{"line":263,"column":6}},{"start":{"line":263,"column":6},"end":{"line":263,"column":6}}]},"32":{"line":267,"type":"if","locations":[{"start":{"line":267,"column":6},"end":{"line":267,"column":6}},{"start":{"line":267,"column":6},"end":{"line":267,"column":6}}]},"33":{"line":267,"type":"binary-expr","locations":[{"start":{"line":267,"column":9},"end":{"line":267,"column":37}},{"start":{"line":267,"column":41},"end":{"line":267,"column":82}},{"start":{"line":267,"column":86},"end":{"line":267,"column":168}}]}},"code":["'use strict';","","var path = require('path'),","    fs = require('fs'),","    Q = require('q'),","    url = require('url');","","var constants = require('../constants'),","    log = require('../log'),","    platformTools = require('../platformTools'),","    utils = require('../utils');","","var toStringFunction = Object.prototype.toString;","","// load the rule(s) from a folder or file","function loadValidationRules(fileOrDir, platforms, callback) {","","  var stat = Q.nfbind(fs.stat); ","","  // list contents of the validation rules folder","  return Q.nfcall(fs.readdir, fileOrDir).then(function (files) {","    return Q.allSettled(files.map(function (file) {","      var filePath = path.join(fileOrDir, file);","      return stat(filePath).then(function (info) {","        // test if file system object is a directory or a file","        if (info.isDirectory()) {","          // ignore any directory that doesn't  match one of the requested platforms ","          if (platforms.indexOf(file) < 0) {","              return Q.resolve();","          }","          ","          // process the rules in the platform folder","          return loadValidationRules(filePath, []);","        }","        ","        // load the rules defined in the file","        var rulePath = path.join(fileOrDir, file);","        try {","          // load the rule from the file","          return require(rulePath);","        }","        catch (err) {","          return Q.reject(new Error('Failed to load validation rule from file: \\'' + rulePath + '\\'. ' + err.message + '.'));","        }","      });","    }))","    .then (function (results) {","      // verify the results and consolidate the loaded rules  ","      return results.reduce(function (validationRules, result) {","        if (result.state === 'fulfilled') {","          if (result.value) {","            if (Array.isArray(result.value)) {","              validationRules.push.apply(validationRules, result.value);","            }","            else {","              validationRules.push(result.value);            ","            }              ","          }            ","        }","        else {","          log.error(result.reason.getMessage());","        }","        ","        return validationRules;","      }, []);","    });","  })","  .catch (function (err) {","    if (err.code !== 'ENOTDIR') {","      throw err;","    }","    ","    // fileOrDir is a file","    var rules = require(fileOrDir);","    return Array.isArray(rules) ? rules : [rules];","  })  ","  .catch(function (err) {","    return Q.reject(new Error('Failed to read validation rules from the specified location: \\'' + fileOrDir + '\\'. ' + err.message + '.'));","  })","  .nodeify(callback);","}","","function runValidationRules(w3cManifestInfo, rules, callback) {","","  var results = [];","  var pendingValidations = [];","","  rules.forEach(function (validationRule) {","    var validationTask = Q.defer();","    pendingValidations.push(validationTask.promise);","","    validationRule(w3cManifestInfo.content, function (err, ruleResult) {","      if (err) {","        return validationTask.reject(err);","      }","","      if (toStringFunction.call(ruleResult) === '[object Array]') {","        results.push.apply(results, ruleResult);","      } else if (ruleResult) {","        results.push(ruleResult);","      }","","      validationTask.resolve();","    });","  });","","  return Q.allSettled(pendingValidations)","    .thenResolve(results)","    .nodeify(callback);","}","","function applyValidationRules(w3cManifestInfo, platformModules, platforms) {","","  var allResults = [];","","  function validateAllPlatforms() {","    // load and run validation rules for \"all platforms\"","    var validationRulesDir = path.join(__dirname, 'validationRules');","    return loadValidationRules(validationRulesDir).then(function (rules) {","      return runValidationRules(w3cManifestInfo, rules).then(function (results) {","        allResults.push.apply(allResults, results);","      });","    });","  }","","  function validatePlatform() {","    // run platform-specific validation rules ","    var platformTasks = platformModules.map(function (platform) {","      return platform.getValidationRules(platforms).then(function (rules) {","        return runValidationRules(w3cManifestInfo, rules).then(function (results) {","          allResults.push.apply(allResults, results);","        });","      });","    });","","    return Q.allSettled(platformTasks);","  }","  ","  // Only run the \"All Platform\" validations for W3C manifests","  if (w3cManifestInfo.format === constants.BASE_MANIFEST_FORMAT) {","    return validateAllPlatforms()","      .then(validatePlatform)","      .thenResolve(allResults);","  } else {","    return validatePlatform()","      .thenResolve(allResults);","  }","}","","function validateManifest(w3cManifestInfo, platforms, callback) {","","  if (!w3cManifestInfo || !w3cManifestInfo.content) {","    return Q.reject(new Error('Manifest content is empty or invalid.')).nodeify(callback);","  }","","  if (w3cManifestInfo.format !== constants.BASE_MANIFEST_FORMAT) {","    return Q.reject(new Error('The manifest passed as argument is not a W3C manifest.')).nodeify(callback);","  }","","  return platformTools.loadPlatforms(platforms).then(function (platformModules) {","    return applyValidationRules(w3cManifestInfo, platformModules, platforms);","  })","  .nodeify(callback);    ","}","","function imageValidation(manifestContent, description, platform, level, requiredIconSizes, callback) {","  var icons = manifestContent.icons;","","  var result = {","    description: description,","    platform: platform,","    level: level,","    member: constants.validation.manifestMembers.icons,","    code: constants.validation.codes.missingImage,","    data: requiredIconSizes.slice()","  };","","  if (!icons || icons.length === 0) {","    return callback(undefined, result);","  }","","  var missingIconsSizes = [];","  var found;","","  for (var i = 0; i < requiredIconSizes.length; i++) {","    var requiredIcon = requiredIconSizes[i];","    found = false;","","    for (var j = 0; j < icons.length; j++) {","      if (requiredIcon === icons[j].sizes) {","        found = true;","      }","    }","","    if (!found) {","      missingIconsSizes.push(requiredIcon);","    }","  }","","  result.data = missingIconsSizes;","","  if (!missingIconsSizes || missingIconsSizes.length === 0) {","    callback();","  } else {","    callback(undefined, result);","  }","}","","function imageGroupValidation(manifestContent, description, platform, validIconSizes, callback) {","  var icons = manifestContent.icons;","","  var result = {","    description: description,","    platform: platform,","    level: constants.validation.levels.warning,","    member: constants.validation.manifestMembers.icons,","    code: constants.validation.codes.missingImageGroup,","    data: validIconSizes.slice()","  };","","  if (!icons || icons.length === 0) {","    return callback(undefined, result);","  }","","  for (var i = 0; i < icons.length; i++) {","    var iconSizes = icons[i].sizes;","","    for (var j = 0; j < validIconSizes.length; j++) {","      if (iconSizes === validIconSizes[j]) {","        return callback();","      }","    }","  }","","  callback(undefined, result);","}","","function validateAndNormalizeStartUrl(siteUrl, manifestInfo, callback) {","  if (manifestInfo.format !== constants.BASE_MANIFEST_FORMAT) {","    return callback(new Error('The manifest found is not a W3C manifest.'), manifestInfo);","  }","  ","  if (manifestInfo.content.start_url) {","    if (!utils.isURL(manifestInfo.content.start_url)) {","      return callback(new Error('The manifest\\'s start_url member is not a valid URL: \\'' + manifestInfo.content.start_url + '\\''), manifestInfo);","    }","  } else {","    manifestInfo.content.start_url = '/';","  }","  ","  if (siteUrl) {","    if (!utils.isURL(siteUrl)) {","      return callback(new Error('The site URL is not a valid URL: \\'' + siteUrl + '\\''), manifestInfo);","    }","    ","    var parsedSiteUrl = url.parse(siteUrl);","    var parsedManifestStartUrl = url.parse(manifestInfo.content.start_url);","    if (parsedManifestStartUrl.hostname && parsedSiteUrl.hostname !== parsedManifestStartUrl.hostname) {","       // issue #88 - bis","      var subDomainOfManifestStartUrlSplitted = parsedManifestStartUrl.hostname.split('.');","      var lengthSubDomain = subDomainOfManifestStartUrlSplitted.length;","      var subDomainOfManifestStartUrl = null;","      if(lengthSubDomain >= 2){","        subDomainOfManifestStartUrl = ","        subDomainOfManifestStartUrlSplitted[lengthSubDomain - 2] + '.' + subDomainOfManifestStartUrlSplitted[lengthSubDomain - 1];","      }","      if(!subDomainOfManifestStartUrl || !utils.isURL(subDomainOfManifestStartUrl) || parsedSiteUrl.hostname.toLowerCase() !== subDomainOfManifestStartUrl.toLowerCase()){","        return callback(new Error('The domain of the hosted site (' + parsedSiteUrl.hostname + ') does not match the domain of the manifest\\'s start_url member (' + parsedManifestStartUrl.hostname + ')'), manifestInfo);","      }","    }","    ","    manifestInfo.content.start_url = url.resolve(siteUrl, manifestInfo.content.start_url);","    ","    manifestInfo.default = { short_name: utils.getDefaultShortName(siteUrl) };","  }","","  return callback(undefined, manifestInfo);","}","","module.exports = {","  validateManifest: validateManifest,","  loadValidationRules: loadValidationRules,","  runValidationRules: runValidationRules,","  imageValidation: imageValidation,","  imageGroupValidation: imageGroupValidation,","  validateAndNormalizeStartUrl: validateAndNormalizeStartUrl,","  applyValidationRules: applyValidationRules","};",""],"l":{"3":1,"8":1,"13":1,"16":1,"18":0,"21":0,"22":0,"23":0,"24":0,"26":0,"28":0,"29":0,"33":0,"37":0,"38":0,"40":0,"43":0,"49":0,"50":0,"51":0,"52":0,"53":0,"56":0,"61":0,"64":0,"69":0,"70":0,"74":0,"75":0,"78":0,"83":1,"85":0,"86":0,"88":0,"89":0,"90":0,"92":0,"93":0,"94":0,"97":0,"98":0,"99":0,"100":0,"103":0,"107":0,"112":1,"114":0,"116":1,"118":0,"119":0,"120":0,"121":0,"126":1,"128":0,"129":0,"130":0,"131":0,"136":0,"140":0,"141":0,"145":0,"150":1,"152":0,"153":0,"156":0,"157":0,"160":0,"161":0,"166":1,"167":0,"169":0,"178":0,"179":0,"182":0,"183":0,"185":0,"186":0,"187":0,"189":0,"190":0,"191":0,"195":0,"196":0,"200":0,"202":0,"203":0,"205":0,"209":1,"210":0,"212":0,"221":0,"222":0,"225":0,"226":0,"228":0,"229":0,"230":0,"235":0,"238":1,"239":0,"240":0,"243":0,"244":0,"245":0,"248":0,"251":0,"252":0,"253":0,"256":0,"257":0,"258":0,"260":0,"261":0,"262":0,"263":0,"264":0,"267":0,"268":0,"272":0,"274":0,"277":0,"280":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/platformTools.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/platformTools.js","s":{"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":1,"24":2,"25":2,"26":2,"27":2,"28":2,"29":2,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":1,"71":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1,"95":2,"96":0,"97":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[2,0],"5":[2,0],"6":[2,2],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[2,2]},"f":{"1":2,"2":0,"3":0,"4":0,"5":0,"6":2,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":2},"fnMap":{"1":{"name":"getDefaultConfigPath","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":33}}},"2":{"name":"getPlatformModule","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":48}}},"3":{"name":"(anonymous_3)","line":39,"loc":{"start":{"line":39,"column":75},"end":{"line":39,"column":86}}},"4":{"name":"loadPlatform","line":46,"loc":{"start":{"line":46,"column":0},"end":{"line":46,"column":53}}},"5":{"name":"(anonymous_5)","line":48,"loc":{"start":{"line":48,"column":53},"end":{"line":48,"column":70}}},"6":{"name":"configurePlatforms","line":56,"loc":{"start":{"line":56,"column":0},"end":{"line":56,"column":36}}},"7":{"name":"loadPlatforms","line":75,"loc":{"start":{"line":75,"column":0},"end":{"line":75,"column":52}}},"8":{"name":"(anonymous_8)","line":90,"loc":{"start":{"line":90,"column":38},"end":{"line":90,"column":70}}},"9":{"name":"(anonymous_9)","line":104,"loc":{"start":{"line":104,"column":67},"end":{"line":104,"column":86}}},"10":{"name":"(anonymous_10)","line":125,"loc":{"start":{"line":125,"column":34},"end":{"line":125,"column":53}}},"11":{"name":"(anonymous_11)","line":126,"loc":{"start":{"line":126,"column":26},"end":{"line":126,"column":53}}},"12":{"name":"getPlatformPackageInfo","line":140,"loc":{"start":{"line":140,"column":0},"end":{"line":140,"column":47}}},"13":{"name":"(anonymous_13)","line":143,"loc":{"start":{"line":143,"column":50},"end":{"line":143,"column":65}}},"14":{"name":"(anonymous_14)","line":148,"loc":{"start":{"line":148,"column":9},"end":{"line":148,"column":24}}},"15":{"name":"updatePlatformConfig","line":169,"loc":{"start":{"line":169,"column":0},"end":{"line":169,"column":59}}},"16":{"name":"addPlatform","line":173,"loc":{"start":{"line":173,"column":0},"end":{"line":173,"column":63}}},"17":{"name":"(anonymous_17)","line":182,"loc":{"start":{"line":182,"column":45},"end":{"line":182,"column":68}}},"18":{"name":"(anonymous_18)","line":184,"loc":{"start":{"line":184,"column":44},"end":{"line":184,"column":60}}},"19":{"name":"removePlatform","line":193,"loc":{"start":{"line":193,"column":0},"end":{"line":193,"column":58}}},"20":{"name":"(anonymous_20)","line":202,"loc":{"start":{"line":202,"column":42},"end":{"line":202,"column":58}}},"21":{"name":"listPlatforms","line":214,"loc":{"start":{"line":214,"column":0},"end":{"line":214,"column":35}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":4,"column":21}},"2":{"start":{"line":6,"column":0},"end":{"line":10,"column":31}},"3":{"start":{"line":12,"column":0},"end":{"line":12,"column":26}},"4":{"start":{"line":14,"column":0},"end":{"line":16,"column":1}},"5":{"start":{"line":15,"column":2},"end":{"line":15,"column":82}},"6":{"start":{"line":18,"column":0},"end":{"line":44,"column":1}},"7":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"8":{"start":{"line":21,"column":6},"end":{"line":21,"column":73}},"9":{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},"10":{"start":{"line":25,"column":6},"end":{"line":25,"column":83}},"11":{"start":{"line":28,"column":2},"end":{"line":43,"column":3}},"12":{"start":{"line":29,"column":4},"end":{"line":29,"column":38}},"13":{"start":{"line":30,"column":4},"end":{"line":30,"column":29}},"14":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"15":{"start":{"line":34,"column":6},"end":{"line":34,"column":98}},"16":{"start":{"line":39,"column":4},"end":{"line":42,"column":7}},"17":{"start":{"line":40,"column":6},"end":{"line":40,"column":40}},"18":{"start":{"line":41,"column":6},"end":{"line":41,"column":31}},"19":{"start":{"line":46,"column":0},"end":{"line":52,"column":1}},"20":{"start":{"line":47,"column":2},"end":{"line":47,"column":55}},"21":{"start":{"line":48,"column":2},"end":{"line":51,"column":21}},"22":{"start":{"line":49,"column":4},"end":{"line":49,"column":27}},"23":{"start":{"line":56,"column":0},"end":{"line":72,"column":1}},"24":{"start":{"line":57,"column":2},"end":{"line":59,"column":3}},"25":{"start":{"line":58,"column":4},"end":{"line":58,"column":36}},"26":{"start":{"line":62,"column":2},"end":{"line":69,"column":3}},"27":{"start":{"line":63,"column":4},"end":{"line":68,"column":5}},"28":{"start":{"line":64,"column":6},"end":{"line":64,"column":31}},"29":{"start":{"line":67,"column":6},"end":{"line":67,"column":103}},"30":{"start":{"line":71,"column":2},"end":{"line":71,"column":33}},"31":{"start":{"line":75,"column":0},"end":{"line":137,"column":1}},"32":{"start":{"line":77,"column":2},"end":{"line":82,"column":3}},"33":{"start":{"line":78,"column":4},"end":{"line":81,"column":5}},"34":{"start":{"line":79,"column":6},"end":{"line":79,"column":24}},"35":{"start":{"line":80,"column":6},"end":{"line":80,"column":25}},"36":{"start":{"line":85,"column":2},"end":{"line":85,"column":54}},"37":{"start":{"line":87,"column":1},"end":{"line":87,"column":22}},"38":{"start":{"line":90,"column":1},"end":{"line":119,"column":8}},"39":{"start":{"line":93,"column":4},"end":{"line":93,"column":57}},"40":{"start":{"line":94,"column":2},"end":{"line":116,"column":3}},"41":{"start":{"line":95,"column":6},"end":{"line":95,"column":49}},"42":{"start":{"line":98,"column":3},"end":{"line":98,"column":47}},"43":{"start":{"line":100,"column":3},"end":{"line":109,"column":4}},"44":{"start":{"line":103,"column":4},"end":{"line":103,"column":49}},"45":{"start":{"line":104,"column":4},"end":{"line":106,"column":11}},"46":{"start":{"line":105,"column":10},"end":{"line":105,"column":91}},"47":{"start":{"line":108,"column":4},"end":{"line":108,"column":24}},"48":{"start":{"line":112,"column":3},"end":{"line":112,"column":33}},"49":{"start":{"line":115,"column":3},"end":{"line":115,"column":92}},"50":{"start":{"line":118,"column":2},"end":{"line":118,"column":18}},"51":{"start":{"line":122,"column":2},"end":{"line":122,"column":39}},"52":{"start":{"line":125,"column":2},"end":{"line":136,"column":21}},"53":{"start":{"line":126,"column":4},"end":{"line":134,"column":11}},"54":{"start":{"line":127,"column":6},"end":{"line":131,"column":7}},"55":{"start":{"line":129,"column":8},"end":{"line":129,"column":34}},"56":{"start":{"line":130,"column":8},"end":{"line":130,"column":80}},"57":{"start":{"line":133,"column":6},"end":{"line":133,"column":21}},"58":{"start":{"line":140,"column":0},"end":{"line":167,"column":1}},"59":{"start":{"line":143,"column":2},"end":{"line":166,"column":21}},"60":{"start":{"line":144,"column":4},"end":{"line":144,"column":77}},"61":{"start":{"line":146,"column":4},"end":{"line":146,"column":56}},"62":{"start":{"line":149,"column":4},"end":{"line":149,"column":67}},"63":{"start":{"line":150,"column":4},"end":{"line":164,"column":5}},"64":{"start":{"line":152,"column":6},"end":{"line":152,"column":51}},"65":{"start":{"line":155,"column":6},"end":{"line":155,"column":77}},"66":{"start":{"line":156,"column":6},"end":{"line":163,"column":7}},"67":{"start":{"line":158,"column":8},"end":{"line":158,"column":54}},"68":{"start":{"line":161,"column":8},"end":{"line":161,"column":68}},"69":{"start":{"line":162,"column":8},"end":{"line":162,"column":91}},"70":{"start":{"line":169,"column":0},"end":{"line":171,"column":1}},"71":{"start":{"line":170,"column":2},"end":{"line":170,"column":92}},"72":{"start":{"line":173,"column":0},"end":{"line":191,"column":1}},"73":{"start":{"line":175,"column":2},"end":{"line":180,"column":3}},"74":{"start":{"line":176,"column":4},"end":{"line":179,"column":5}},"75":{"start":{"line":177,"column":6},"end":{"line":177,"column":28}},"76":{"start":{"line":178,"column":6},"end":{"line":178,"column":29}},"77":{"start":{"line":182,"column":2},"end":{"line":190,"column":21}},"78":{"start":{"line":183,"column":4},"end":{"line":183,"column":39}},"79":{"start":{"line":184,"column":4},"end":{"line":188,"column":7}},"80":{"start":{"line":185,"column":6},"end":{"line":185,"column":39}},"81":{"start":{"line":186,"column":6},"end":{"line":186,"column":75}},"82":{"start":{"line":187,"column":6},"end":{"line":187,"column":48}},"83":{"start":{"line":193,"column":0},"end":{"line":212,"column":1}},"84":{"start":{"line":195,"column":2},"end":{"line":200,"column":3}},"85":{"start":{"line":196,"column":4},"end":{"line":199,"column":5}},"86":{"start":{"line":197,"column":6},"end":{"line":197,"column":28}},"87":{"start":{"line":198,"column":6},"end":{"line":198,"column":29}},"88":{"start":{"line":202,"column":2},"end":{"line":211,"column":21}},"89":{"start":{"line":203,"column":4},"end":{"line":203,"column":37}},"90":{"start":{"line":204,"column":4},"end":{"line":206,"column":5}},"91":{"start":{"line":205,"column":6},"end":{"line":205,"column":76}},"92":{"start":{"line":208,"column":4},"end":{"line":208,"column":33}},"93":{"start":{"line":209,"column":4},"end":{"line":209,"column":46}},"94":{"start":{"line":214,"column":0},"end":{"line":220,"column":1}},"95":{"start":{"line":216,"column":2},"end":{"line":216,"column":58}},"96":{"start":{"line":219,"column":2},"end":{"line":219,"column":44}},"97":{"start":{"line":222,"column":0},"end":{"line":230,"column":2}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"2":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":2},"end":{"line":24,"column":2}},{"start":{"line":24,"column":2},"end":{"line":24,"column":2}}]},"3":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"4":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":2},"end":{"line":57,"column":2}},{"start":{"line":57,"column":2},"end":{"line":57,"column":2}}]},"5":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":2},"end":{"line":62,"column":2}},{"start":{"line":62,"column":2},"end":{"line":62,"column":2}}]},"6":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":6},"end":{"line":62,"column":12}},{"start":{"line":62,"column":16},"end":{"line":62,"column":42}}]},"7":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":2},"end":{"line":77,"column":2}},{"start":{"line":77,"column":2},"end":{"line":77,"column":2}}]},"8":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":4},"end":{"line":78,"column":4}},{"start":{"line":78,"column":4},"end":{"line":78,"column":4}}]},"9":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":21},"end":{"line":85,"column":27}},{"start":{"line":85,"column":31},"end":{"line":85,"column":52}}]},"10":{"line":90,"type":"binary-expr","locations":[{"start":{"line":90,"column":14},"end":{"line":90,"column":23}},{"start":{"line":90,"column":27},"end":{"line":90,"column":29}}]},"11":{"line":94,"type":"if","locations":[{"start":{"line":94,"column":2},"end":{"line":94,"column":2}},{"start":{"line":94,"column":2},"end":{"line":94,"column":2}}]},"12":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":6},"end":{"line":94,"column":18}},{"start":{"line":94,"column":22},"end":{"line":94,"column":46}}]},"13":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":3},"end":{"line":100,"column":3}},{"start":{"line":100,"column":3},"end":{"line":100,"column":3}}]},"14":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":6},"end":{"line":127,"column":6}},{"start":{"line":127,"column":6},"end":{"line":127,"column":6}}]},"15":{"line":170,"type":"binary-expr","locations":[{"start":{"line":170,"column":38},"end":{"line":170,"column":48}},{"start":{"line":170,"column":52},"end":{"line":170,"column":74}}]},"16":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":2},"end":{"line":175,"column":2}},{"start":{"line":175,"column":2},"end":{"line":175,"column":2}}]},"17":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":4},"end":{"line":176,"column":4}},{"start":{"line":176,"column":4},"end":{"line":176,"column":4}}]},"18":{"line":195,"type":"if","locations":[{"start":{"line":195,"column":2},"end":{"line":195,"column":2}},{"start":{"line":195,"column":2},"end":{"line":195,"column":2}}]},"19":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":4},"end":{"line":196,"column":4}},{"start":{"line":196,"column":4},"end":{"line":196,"column":4}}]},"20":{"line":204,"type":"if","locations":[{"start":{"line":204,"column":4},"end":{"line":204,"column":4}},{"start":{"line":204,"column":4},"end":{"line":204,"column":4}}]},"21":{"line":216,"type":"binary-expr","locations":[{"start":{"line":216,"column":21},"end":{"line":216,"column":31}},{"start":{"line":216,"column":35},"end":{"line":216,"column":56}}]}},"code":["'use strict';","","var path = require('path'),","    Q = require('q');","","var fileTools = require('./fileTools'), ","    CustomError = require('./customError'),","    log = require('./log'),","    packageTools = require('./packageTools'),","    utils = require('./utils');","","var platformConfiguration;","","function getDefaultConfigPath () {","  return path.resolve(path.dirname(utils.getRootPackagePath()), 'platforms.json');","}","","function getPlatformModule(packageName, source) {","  ","  if (!packageName) {","      return Q.reject(new Error('Platform name is missing or invalid.'));","  }","","  if (!source) {","      return Q.reject(new Error('Platform package source is missing or invalid.'));","  }","","  try {","    var module = require(packageName);","    return Q.resolve(module);","  }","  catch (err) {","    if (err.code !== 'MODULE_NOT_FOUND') {","      return Q.reject(new CustomError('Failed to resolve module: \\'' + packageName + '\\'.', err));","    }","","    // queue the installation of the package, it will be installed once installQueuedPackages ","    // is called, then re-attempt to require the package.","    return packageTools.queuePackageInstallation(packageName, source).then(function() {","      var module = require(packageName);","      return Q.resolve(module);              ","    });","  }","}","","function loadPlatform(packageName, source, callback) {","  log.debug('Loading platform module: ' + packageName);","  return getPlatformModule(packageName, source).then(function(module) {","    return module.Platform;","  })","  .nodeify(callback);","}","","// configures the platforms with the provided configuration or attempts to load ","// the configuration from a 'platforms.json' file in the root of the main app","function configurePlatforms(config) {","  if (!config) {","    config = getDefaultConfigPath();","  }","  ","  // if config is a file path, load the file ","  if (config && typeof config === 'string') {","    try {","      config = require(config);","    }","    catch (err) {","      throw new Error('Platform configuration file is missing or invalid - path: \\'' + config + '\\'.');","    }    ","  }","  ","  platformConfiguration = config;","}","","// returns the modules implementing the requested platforms ","function loadPlatforms(platforms, config, callback) {","","  if (arguments.length < 3) {","    if (utils.isFunction(config)) {","      callback = config;","      config = undefined;      ","    }","  }","  ","  // if configurePlatforms has not been called yet, loads the default configuration","  configurePlatforms(config || platformConfiguration);","  ","\tvar platformMap = {};","\t// load all platform modules and map the corresponding platforms to each one, taking into account that","\t// multiple platforms may map to a single module (e.g. manifoldjs-cordova => android, ios, windows...)","\tvar tasks = (platforms || []).reduce(function (taskList, platformId) {","","\t\t// ensure that the platform is registered and is assigned a package name","    var platformInfo = platformConfiguration[platformId];","\t\tif (platformInfo && platformInfo.packageName) {","      var packageName = platformInfo.packageName;","      ","\t\t\t// check if the module has already been loaded","\t\t\tvar platformList = platformMap[packageName];","      ","\t\t\tif (!platformList) {","","\t\t\t\t// create a new task to load the platform module","\t\t\t\tplatformMap[packageName] = platformList = [];","\t\t\t\tvar task = loadPlatform(packageName, platformInfo.source).then(function(Platform) {","          return { packageName: packageName, Platform: Platform, platforms: platformList };\t\t\t\t\t\t","        });","","\t\t\t\ttaskList.push(task);","\t\t\t}","","\t\t\t// assign the current platform to the module","\t\t\tplatformList.push(platformId);","\t\t}","\t\telse {","\t\t\ttaskList.push(Q.reject(new Error('Platform \\'' + platformId + '\\' is not registered!')));","\t\t}","","\t\treturn taskList;","\t}, []);","","  // launch the installation of all queued packages","  packageTools.installQueuedPackages();","  ","\t// wait for all modules to load","  return Q.allSettled(tasks).then(function (results) {","    return results.reduce(function (modules, result) {","      if (result.state === 'fulfilled') {","        // create instances of each platform module","        var module = result.value;","        modules.push(new module.Platform(module.packageName, module.platforms));","      }","      ","      return modules;","    }, []);","  })","  .nodeify(callback);","}","","// get the platform package information (package.json)","function getPlatformPackageInfo (id, callback) {","  /* jshint unused: vars */","  // check if package is in the npm registry","  return packageTools.getNpmPackageInfo(id).catch(function (err) {","    log.debug('Failed to locate the plaform package in the npm registry...');    ","    // check if package is in a GitHub repository","    return packageTools.getGitHubPackageInformation(id);","  })","  .catch(function (err) {","    log.debug('Failed to locate the plaform package in GitHub...');","    try {","      // check if package is in a local path","      return packageTools.getModuleInformation(id);    ","    }","    catch (err) {","      log.debug('Failed to locate the plaform package in the local disk...');","      try {","        // check if package is in an installed module","        return packageTools.getPackageInformation(id);    ","      }","      catch (err) {","        log.debug('Failed to locate the plaform package module...');","        return Q.reject(new Error('Failed to retrieve the platform package information.'));","      }    ","    }        ","  })","  .nodeify(callback);  ","}","","function updatePlatformConfig (configPath, updateFunction) {","  return fileTools.replaceFileContent(configPath || getDefaultConfigPath(), updateFunction);","}","","function addPlatform(platformId, source, configPath, callback) {","  ","  if (arguments.length === 3) {","    if (utils.isFunction(configPath)) {","      callback = configPath;","      configPath = undefined;      ","    }","  }","  ","  return getPlatformPackageInfo(source).then(function (packageInfo) {","    var packageName = packageInfo.name;    ","    return updatePlatformConfig(configPath, function (data) {","      var platforms = JSON.parse(data);","      platforms[platformId] = { packageName: packageName, source: source };","      return JSON.stringify(platforms, null, 4); ","    });","  })","  .nodeify(callback);","}","","function removePlatform(platformId, configPath, callback) {","  ","  if (arguments.length === 2) {","    if (utils.isFunction(configPath)) {","      callback = configPath;","      configPath = undefined;      ","    }","  }","  ","  return updatePlatformConfig(configPath, function (data) {","    var platforms = JSON.parse(data);","    if (!platforms[platformId]) {","      throw new Error('Platform \\'' + platformId + '\\' is not registered.');","    }","    ","    delete platforms[platformId];","    return JSON.stringify(platforms, null, 4); ","  })","  .nodeify(callback);","}","","function listPlatforms(configPath) {","  // if configurePlatforms has not been called yet, loads the default configuration","  configurePlatforms(configPath || platformConfiguration);","","  // return all registered platforms","  return Object.keys(platformConfiguration);","}","","module.exports = {","  configurePlatforms: configurePlatforms,","  loadPlatform: loadPlatform,","  loadPlatforms: loadPlatforms,","  addPlatform: addPlatform,","  removePlatform: removePlatform,","  listPlatforms: listPlatforms,","  getPlatformPackageInfo: getPlatformPackageInfo","};",""],"l":{"3":1,"6":1,"12":1,"14":1,"15":2,"18":1,"20":0,"21":0,"24":0,"25":0,"28":0,"29":0,"30":0,"33":0,"34":0,"39":0,"40":0,"41":0,"46":1,"47":0,"48":0,"49":0,"56":1,"57":2,"58":2,"62":2,"63":2,"64":2,"67":2,"71":0,"75":1,"77":0,"78":0,"79":0,"80":0,"85":0,"87":0,"90":0,"93":0,"94":0,"95":0,"98":0,"100":0,"103":0,"104":0,"105":0,"108":0,"112":0,"115":0,"118":0,"122":0,"125":0,"126":0,"127":0,"129":0,"130":0,"133":0,"140":1,"143":0,"144":0,"146":0,"149":0,"150":0,"152":0,"155":0,"156":0,"158":0,"161":0,"162":0,"169":1,"170":0,"173":1,"175":0,"176":0,"177":0,"178":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"193":1,"195":0,"196":0,"197":0,"198":0,"202":0,"203":0,"204":0,"205":0,"208":0,"209":0,"214":1,"216":2,"219":0,"222":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/customError.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/customError.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":1,"29":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":11,"loc":{"start":{"line":11,"column":20},"end":{"line":11,"column":31}}},"2":{"name":"getMessage","line":19,"loc":{"start":{"line":19,"column":29},"end":{"line":19,"column":65}}},"3":{"name":"CustomError","line":50,"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":42}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":8}},"3":{"start":{"line":6,"column":0},"end":{"line":12,"column":1}},"4":{"start":{"line":7,"column":2},"end":{"line":7,"column":25}},"5":{"start":{"line":11,"column":2},"end":{"line":11,"column":46}},"6":{"start":{"line":11,"column":33},"end":{"line":11,"column":42}},"7":{"start":{"line":14,"column":0},"end":{"line":14,"column":91}},"8":{"start":{"line":19,"column":0},"end":{"line":47,"column":2}},"9":{"start":{"line":21,"column":2},"end":{"line":23,"column":3}},"10":{"start":{"line":22,"column":4},"end":{"line":22,"column":30}},"11":{"start":{"line":25,"column":2},"end":{"line":27,"column":3}},"12":{"start":{"line":26,"column":4},"end":{"line":26,"column":75}},"13":{"start":{"line":29,"column":2},"end":{"line":31,"column":3}},"14":{"start":{"line":30,"column":4},"end":{"line":30,"column":36}},"15":{"start":{"line":33,"column":2},"end":{"line":33,"column":20}},"16":{"start":{"line":34,"column":2},"end":{"line":34,"column":14}},"17":{"start":{"line":35,"column":2},"end":{"line":40,"column":3}},"18":{"start":{"line":36,"column":4},"end":{"line":36,"column":74}},"19":{"start":{"line":39,"column":4},"end":{"line":39,"column":26}},"20":{"start":{"line":42,"column":2},"end":{"line":44,"column":3}},"21":{"start":{"line":43,"column":4},"end":{"line":43,"column":63}},"22":{"start":{"line":46,"column":2},"end":{"line":46,"column":17}},"23":{"start":{"line":50,"column":0},"end":{"line":75,"column":1}},"24":{"start":{"line":53,"column":2},"end":{"line":58,"column":5}},"25":{"start":{"line":60,"column":2},"end":{"line":65,"column":5}},"26":{"start":{"line":67,"column":2},"end":{"line":72,"column":5}},"27":{"start":{"line":74,"column":2},"end":{"line":74,"column":45}},"28":{"start":{"line":77,"column":0},"end":{"line":77,"column":34}},"29":{"start":{"line":79,"column":0},"end":{"line":79,"column":29}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":21,"column":2}},{"start":{"line":21,"column":2},"end":{"line":21,"column":2}}]},"2":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":2},"end":{"line":25,"column":2}},{"start":{"line":25,"column":2},"end":{"line":25,"column":2}}]},"3":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":15},"end":{"line":26,"column":50}},{"start":{"line":26,"column":54},"end":{"line":26,"column":74}}]},"4":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":2},"end":{"line":29,"column":2}},{"start":{"line":29,"column":2},"end":{"line":29,"column":2}}]},"5":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":6},"end":{"line":29,"column":34}},{"start":{"line":29,"column":39},"end":{"line":29,"column":51}},{"start":{"line":29,"column":55},"end":{"line":29,"column":84}}]},"6":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":11}},{"start":{"line":33,"column":15},"end":{"line":33,"column":19}}]},"7":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":2},"end":{"line":35,"column":2}},{"start":{"line":35,"column":2},"end":{"line":35,"column":2}}]},"8":{"line":36,"type":"cond-expr","locations":[{"start":{"line":36,"column":26},"end":{"line":36,"column":59}},{"start":{"line":36,"column":62},"end":{"line":36,"column":73}}]},"9":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":2},"end":{"line":42,"column":2}},{"start":{"line":42,"column":2},"end":{"line":42,"column":2}}]}},"code":["'use strict';","","var util = require('util');","","var log;","try {","  log = require('./log');","} ","catch (error) {","  // if log is not available, assume 'info' trace level  ","  log = { getLevel: function() { return 2; }};","}","","var traceLevels = { 'TRACE': 0, 'DEBUG': 1, 'INFO': 2, 'WARN': 3, 'ERROR': 4, 'SILENT': 5};","","// When log level is (0 || 'debug'), return error message + stack trace ","// for current error as well as any \"inner errors\". Otherwise, return","// error message for current error only and without the stack trace.  ","Error.prototype.getMessage = function getMessage (logLevel, err) {","  ","  if (typeof logLevel === 'undefined') {","    logLevel = log.getLevel();","  }","  ","  if (typeof logLevel === 'string') {","    logLevel = traceLevels[logLevel.toUpperCase()] || traceLevels['DEBUG'];  ","  }","  ","  if (typeof logLevel === 'number' && (logLevel < 0 || logLevel > traceLevels.SILENT)) {","    logLevel = traceLevels['DEBUG'];","  }","  ","  err = err || this;","  var message;","  if (logLevel <= 1) {","    message = err.stack ? err.stack.replace(/^Error: /, '') : err.message;","  }","  else {","    message = err.message;","  }","  ","  if (err.innerError) {","    message += '\\n' + err.getMessage(logLevel, err.innerError);","  }    ","  ","  return message;","};  ","","// allows constructing Error objects with an innerError property","function CustomError(message, innerError) {","","  // configure properties so that CustomError behaves similarly to Error base type  ","  Object.defineProperty(this, 'innerError', {","    enumerable: false,","    configurable: true,","    writable: false,","    value: innerError","  });","","  Object.defineProperty(this, 'name', {","    enumerable: false,","    configurable: false,","    writable: false,","    value: 'Error'","  });","","  Object.defineProperty(this, 'message', {","    enumerable: false,","    configurable: true,","    writable: true,","    value: message","  });","  ","  Error.captureStackTrace(this, CustomError);","}","","util.inherits(CustomError, Error);","","module.exports = CustomError;",""],"l":{"3":1,"5":1,"6":1,"7":1,"11":0,"14":1,"19":1,"21":0,"22":0,"25":0,"26":0,"29":0,"30":0,"33":0,"34":0,"35":0,"36":0,"39":0,"42":0,"43":0,"46":0,"50":1,"53":0,"60":0,"67":0,"74":0,"77":1,"79":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/packageTools.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/packageTools.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1,"85":0,"86":0,"87":1,"88":0,"89":0,"90":0,"91":0,"92":1,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":1,"101":0,"102":0,"103":0,"104":0,"105":1,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},"fnMap":{"1":{"name":"downloadFile","line":23,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":43}}},"2":{"name":"(anonymous_2)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":39}}},"3":{"name":"(anonymous_3)","line":40,"loc":{"start":{"line":40,"column":19},"end":{"line":40,"column":34}}},"4":{"name":"(anonymous_4)","line":42,"loc":{"start":{"line":42,"column":17},"end":{"line":42,"column":28}}},"5":{"name":"(anonymous_5)","line":50,"loc":{"start":{"line":50,"column":16},"end":{"line":50,"column":34}}},"6":{"name":"(anonymous_6)","line":51,"loc":{"start":{"line":51,"column":17},"end":{"line":51,"column":32}}},"7":{"name":"(anonymous_7)","line":55,"loc":{"start":{"line":55,"column":19},"end":{"line":55,"column":33}}},"8":{"name":"(anonymous_8)","line":58,"loc":{"start":{"line":58,"column":17},"end":{"line":58,"column":32}}},"9":{"name":"getPackageInformation","line":66,"loc":{"start":{"line":66,"column":0},"end":{"line":66,"column":64}}},"10":{"name":"getModuleInformation","line":98,"loc":{"start":{"line":98,"column":0},"end":{"line":98,"column":36}}},"11":{"name":"getNpmPackageInfo","line":128,"loc":{"start":{"line":128,"column":0},"end":{"line":128,"column":51}}},"12":{"name":"(anonymous_12)","line":130,"loc":{"start":{"line":130,"column":67},"end":{"line":130,"column":82}}},"13":{"name":"(anonymous_13)","line":133,"loc":{"start":{"line":133,"column":19},"end":{"line":133,"column":36}}},"14":{"name":"(anonymous_14)","line":137,"loc":{"start":{"line":137,"column":18},"end":{"line":137,"column":30}}},"15":{"name":"(anonymous_15)","line":151,"loc":{"start":{"line":151,"column":17},"end":{"line":151,"column":32}}},"16":{"name":"getGitHubPackageInformation","line":159,"loc":{"start":{"line":159,"column":0},"end":{"line":159,"column":63}}},"17":{"name":"(anonymous_17)","line":182,"loc":{"start":{"line":182,"column":35},"end":{"line":182,"column":55}}},"18":{"name":"(anonymous_18)","line":185,"loc":{"start":{"line":185,"column":9},"end":{"line":185,"column":24}}},"19":{"name":"getNpmPackageLatestVersion","line":191,"loc":{"start":{"line":191,"column":0},"end":{"line":191,"column":60}}},"20":{"name":"(anonymous_20)","line":192,"loc":{"start":{"line":192,"column":45},"end":{"line":192,"column":68}}},"21":{"name":"checkForUpdate","line":199,"loc":{"start":{"line":199,"column":0},"end":{"line":199,"column":35}}},"22":{"name":"(anonymous_22)","line":202,"loc":{"start":{"line":202,"column":58},"end":{"line":202,"column":83}}},"23":{"name":"installPackage","line":210,"loc":{"start":{"line":210,"column":0},"end":{"line":210,"column":56}}},"24":{"name":"(anonymous_24)","line":217,"loc":{"start":{"line":217,"column":101},"end":{"line":217,"column":113}}},"25":{"name":"(anonymous_25)","line":221,"loc":{"start":{"line":221,"column":9},"end":{"line":221,"column":24}}},"26":{"name":"queuePackageInstallation","line":233,"loc":{"start":{"line":233,"column":0},"end":{"line":233,"column":66}}},"27":{"name":"installQueuedPackages","line":244,"loc":{"start":{"line":244,"column":0},"end":{"line":244,"column":34}}},"28":{"name":"(anonymous_28)","line":250,"loc":{"start":{"line":250,"column":39},"end":{"line":250,"column":68}}},"29":{"name":"(anonymous_29)","line":259,"loc":{"start":{"line":259,"column":33},"end":{"line":259,"column":49}}},"30":{"name":"(anonymous_30)","line":264,"loc":{"start":{"line":264,"column":111},"end":{"line":264,"column":123}}},"31":{"name":"(anonymous_31)","line":268,"loc":{"start":{"line":268,"column":9},"end":{"line":268,"column":24}}},"32":{"name":"(anonymous_32)","line":271,"loc":{"start":{"line":271,"column":11},"end":{"line":271,"column":23}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":9,"column":21}},"2":{"start":{"line":11,"column":0},"end":{"line":14,"column":31}},"3":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}},"4":{"start":{"line":17,"column":0},"end":{"line":17,"column":33}},"5":{"start":{"line":19,"column":0},"end":{"line":19,"column":16}},"6":{"start":{"line":20,"column":0},"end":{"line":20,"column":22}},"7":{"start":{"line":23,"column":0},"end":{"line":63,"column":1}},"8":{"start":{"line":25,"column":2},"end":{"line":25,"column":32}},"9":{"start":{"line":27,"column":2},"end":{"line":32,"column":4}},"10":{"start":{"line":34,"column":2},"end":{"line":34,"column":58}},"11":{"start":{"line":36,"column":2},"end":{"line":36,"column":27}},"12":{"start":{"line":37,"column":2},"end":{"line":60,"column":5}},"13":{"start":{"line":39,"column":4},"end":{"line":39,"column":20}},"14":{"start":{"line":40,"column":4},"end":{"line":57,"column":7}},"15":{"start":{"line":41,"column":6},"end":{"line":41,"column":21}},"16":{"start":{"line":43,"column":6},"end":{"line":45,"column":7}},"17":{"start":{"line":44,"column":8},"end":{"line":44,"column":162}},"18":{"start":{"line":48,"column":6},"end":{"line":52,"column":7}},"19":{"start":{"line":49,"column":8},"end":{"line":51,"column":59}},"20":{"start":{"line":50,"column":36},"end":{"line":50,"column":61}},"21":{"start":{"line":51,"column":34},"end":{"line":51,"column":55}},"22":{"start":{"line":54,"column":6},"end":{"line":54,"column":152}},"23":{"start":{"line":56,"column":6},"end":{"line":56,"column":34}},"24":{"start":{"line":59,"column":4},"end":{"line":59,"column":32}},"25":{"start":{"line":62,"column":2},"end":{"line":62,"column":44}},"26":{"start":{"line":66,"column":0},"end":{"line":95,"column":1}},"27":{"start":{"line":68,"column":2},"end":{"line":92,"column":3}},"28":{"start":{"line":69,"column":4},"end":{"line":71,"column":5}},"29":{"start":{"line":70,"column":6},"end":{"line":70,"column":67}},"30":{"start":{"line":73,"column":4},"end":{"line":73,"column":39}},"31":{"start":{"line":75,"column":4},"end":{"line":78,"column":5}},"32":{"start":{"line":76,"column":6},"end":{"line":76,"column":115}},"33":{"start":{"line":77,"column":6},"end":{"line":77,"column":54}},"34":{"start":{"line":79,"column":4},"end":{"line":79,"column":52}},"35":{"start":{"line":81,"column":4},"end":{"line":81,"column":31}},"36":{"start":{"line":84,"column":4},"end":{"line":86,"column":5}},"37":{"start":{"line":85,"column":6},"end":{"line":85,"column":16}},"38":{"start":{"line":88,"column":4},"end":{"line":88,"column":53}},"39":{"start":{"line":89,"column":4},"end":{"line":91,"column":5}},"40":{"start":{"line":90,"column":6},"end":{"line":90,"column":54}},"41":{"start":{"line":94,"column":2},"end":{"line":94,"column":99}},"42":{"start":{"line":98,"column":0},"end":{"line":125,"column":1}},"43":{"start":{"line":100,"column":2},"end":{"line":122,"column":3}},"44":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"45":{"start":{"line":102,"column":6},"end":{"line":102,"column":39}},"46":{"start":{"line":105,"column":4},"end":{"line":105,"column":32}},"47":{"start":{"line":106,"column":4},"end":{"line":108,"column":5}},"48":{"start":{"line":107,"column":6},"end":{"line":107,"column":30}},"49":{"start":{"line":110,"column":4},"end":{"line":110,"column":64}},"50":{"start":{"line":111,"column":4},"end":{"line":111,"column":32}},"51":{"start":{"line":114,"column":4},"end":{"line":116,"column":5}},"52":{"start":{"line":115,"column":6},"end":{"line":115,"column":16}},"53":{"start":{"line":118,"column":4},"end":{"line":118,"column":39}},"54":{"start":{"line":119,"column":4},"end":{"line":121,"column":5}},"55":{"start":{"line":120,"column":6},"end":{"line":120,"column":40}},"56":{"start":{"line":124,"column":2},"end":{"line":124,"column":91}},"57":{"start":{"line":128,"column":0},"end":{"line":156,"column":1}},"58":{"start":{"line":129,"column":2},"end":{"line":129,"column":27}},"59":{"start":{"line":130,"column":2},"end":{"line":153,"column":5}},"60":{"start":{"line":131,"column":4},"end":{"line":131,"column":18}},"61":{"start":{"line":133,"column":4},"end":{"line":135,"column":7}},"62":{"start":{"line":134,"column":6},"end":{"line":134,"column":20}},"63":{"start":{"line":137,"column":4},"end":{"line":150,"column":7}},"64":{"start":{"line":138,"column":6},"end":{"line":149,"column":7}},"65":{"start":{"line":140,"column":8},"end":{"line":140,"column":43}},"66":{"start":{"line":141,"column":8},"end":{"line":143,"column":9}},"67":{"start":{"line":142,"column":10},"end":{"line":142,"column":47}},"68":{"start":{"line":145,"column":8},"end":{"line":145,"column":188}},"69":{"start":{"line":148,"column":8},"end":{"line":148,"column":142}},"70":{"start":{"line":152,"column":4},"end":{"line":152,"column":134}},"71":{"start":{"line":155,"column":2},"end":{"line":155,"column":44}},"72":{"start":{"line":159,"column":0},"end":{"line":188,"column":1}},"73":{"start":{"line":161,"column":2},"end":{"line":161,"column":37}},"74":{"start":{"line":162,"column":2},"end":{"line":164,"column":3}},"75":{"start":{"line":163,"column":4},"end":{"line":163,"column":87}},"76":{"start":{"line":166,"column":2},"end":{"line":168,"column":3}},"77":{"start":{"line":167,"column":4},"end":{"line":167,"column":28}},"78":{"start":{"line":170,"column":2},"end":{"line":172,"column":3}},"79":{"start":{"line":171,"column":4},"end":{"line":171,"column":124}},"80":{"start":{"line":174,"column":2},"end":{"line":180,"column":5}},"81":{"start":{"line":182,"column":2},"end":{"line":187,"column":5}},"82":{"start":{"line":183,"column":4},"end":{"line":183,"column":37}},"83":{"start":{"line":186,"column":4},"end":{"line":186,"column":101}},"84":{"start":{"line":191,"column":0},"end":{"line":196,"column":1}},"85":{"start":{"line":192,"column":2},"end":{"line":195,"column":21}},"86":{"start":{"line":193,"column":4},"end":{"line":193,"column":31}},"87":{"start":{"line":199,"column":0},"end":{"line":207,"column":1}},"88":{"start":{"line":201,"column":2},"end":{"line":201,"column":43}},"89":{"start":{"line":202,"column":2},"end":{"line":206,"column":21}},"90":{"start":{"line":203,"column":4},"end":{"line":203,"column":97}},"91":{"start":{"line":204,"column":4},"end":{"line":204,"column":36}},"92":{"start":{"line":210,"column":0},"end":{"line":225,"column":1}},"93":{"start":{"line":212,"column":2},"end":{"line":212,"column":52}},"94":{"start":{"line":215,"column":2},"end":{"line":215,"column":63}},"95":{"start":{"line":216,"column":2},"end":{"line":216,"column":57}},"96":{"start":{"line":217,"column":2},"end":{"line":224,"column":21}},"97":{"start":{"line":218,"column":4},"end":{"line":218,"column":38}},"98":{"start":{"line":219,"column":4},"end":{"line":219,"column":29}},"99":{"start":{"line":222,"column":4},"end":{"line":222,"column":96}},"100":{"start":{"line":233,"column":0},"end":{"line":241,"column":1}},"101":{"start":{"line":235,"column":2},"end":{"line":235,"column":66}},"102":{"start":{"line":236,"column":2},"end":{"line":238,"column":3}},"103":{"start":{"line":237,"column":4},"end":{"line":237,"column":28}},"104":{"start":{"line":240,"column":2},"end":{"line":240,"column":47}},"105":{"start":{"line":244,"column":0},"end":{"line":276,"column":1}},"106":{"start":{"line":246,"column":2},"end":{"line":248,"column":3}},"107":{"start":{"line":247,"column":4},"end":{"line":247,"column":11}},"108":{"start":{"line":250,"column":2},"end":{"line":250,"column":141}},"109":{"start":{"line":250,"column":70},"end":{"line":250,"column":133}},"110":{"start":{"line":252,"column":2},"end":{"line":252,"column":76}},"111":{"start":{"line":255,"column":2},"end":{"line":255,"column":63}},"112":{"start":{"line":256,"column":2},"end":{"line":256,"column":57}},"113":{"start":{"line":259,"column":2},"end":{"line":261,"column":5}},"114":{"start":{"line":260,"column":4},"end":{"line":260,"column":23}},"115":{"start":{"line":264,"column":2},"end":{"line":275,"column":5}},"116":{"start":{"line":266,"column":4},"end":{"line":266,"column":38}},"117":{"start":{"line":269,"column":4},"end":{"line":269,"column":122}},"118":{"start":{"line":273,"column":4},"end":{"line":273,"column":28}},"119":{"start":{"line":274,"column":4},"end":{"line":274,"column":22}},"120":{"start":{"line":278,"column":0},"end":{"line":288,"column":2}}},"branchMap":{"1":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":10},"end":{"line":29,"column":18}},{"start":{"line":29,"column":23},"end":{"line":29,"column":59}}]},"2":{"line":29,"type":"cond-expr","locations":[{"start":{"line":29,"column":51},"end":{"line":29,"column":54}},{"start":{"line":29,"column":57},"end":{"line":29,"column":59}}]},"3":{"line":34,"type":"cond-expr","locations":[{"start":{"line":34,"column":45},"end":{"line":34,"column":50}},{"start":{"line":34,"column":53},"end":{"line":34,"column":57}}]},"4":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":6},"end":{"line":43,"column":6}},{"start":{"line":43,"column":6},"end":{"line":43,"column":6}}]},"5":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":6},"end":{"line":48,"column":6}},{"start":{"line":48,"column":6},"end":{"line":48,"column":6}}]},"6":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"7":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"8":{"line":76,"type":"cond-expr","locations":[{"start":{"line":76,"column":66},"end":{"line":76,"column":76}},{"start":{"line":76,"column":79},"end":{"line":76,"column":114}}]},"9":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"10":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":4},"end":{"line":89,"column":4}},{"start":{"line":89,"column":4},"end":{"line":89,"column":4}}]},"11":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":67},"end":{"line":94,"column":78}},{"start":{"line":94,"column":82},"end":{"line":94,"column":88}}]},"12":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]},"13":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":4},"end":{"line":106,"column":4}},{"start":{"line":106,"column":4},"end":{"line":106,"column":4}}]},"14":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":4},"end":{"line":114,"column":4}},{"start":{"line":114,"column":4},"end":{"line":114,"column":4}}]},"15":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":4},"end":{"line":119,"column":4}},{"start":{"line":119,"column":4},"end":{"line":119,"column":4}}]},"16":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":67},"end":{"line":124,"column":70}},{"start":{"line":124,"column":74},"end":{"line":124,"column":80}}]},"17":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":8}},{"start":{"line":141,"column":8},"end":{"line":141,"column":8}}]},"18":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":12},"end":{"line":141,"column":28}},{"start":{"line":141,"column":32},"end":{"line":141,"column":51}}]},"19":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":2},"end":{"line":162,"column":2}},{"start":{"line":162,"column":2},"end":{"line":162,"column":2}}]},"20":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":2},"end":{"line":166,"column":2}},{"start":{"line":166,"column":2},"end":{"line":166,"column":2}}]},"21":{"line":170,"type":"if","locations":[{"start":{"line":170,"column":2},"end":{"line":170,"column":2}},{"start":{"line":170,"column":2},"end":{"line":170,"column":2}}]},"22":{"line":170,"type":"binary-expr","locations":[{"start":{"line":170,"column":6},"end":{"line":170,"column":30}},{"start":{"line":170,"column":34},"end":{"line":170,"column":59}}]},"23":{"line":178,"type":"cond-expr","locations":[{"start":{"line":178,"column":46},"end":{"line":178,"column":48}},{"start":{"line":178,"column":51},"end":{"line":178,"column":54}}]},"24":{"line":203,"type":"cond-expr","locations":[{"start":{"line":203,"column":71},"end":{"line":203,"column":84}},{"start":{"line":203,"column":87},"end":{"line":203,"column":96}}]},"25":{"line":215,"type":"cond-expr","locations":[{"start":{"line":215,"column":44},"end":{"line":215,"column":53}},{"start":{"line":215,"column":56},"end":{"line":215,"column":61}}]},"26":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":2},"end":{"line":236,"column":2}},{"start":{"line":236,"column":2},"end":{"line":236,"column":2}}]},"27":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":2},"end":{"line":246,"column":2}},{"start":{"line":246,"column":2},"end":{"line":246,"column":2}}]},"28":{"line":250,"type":"cond-expr","locations":[{"start":{"line":250,"column":100},"end":{"line":250,"column":104}},{"start":{"line":250,"column":107},"end":{"line":250,"column":109}}]},"29":{"line":255,"type":"cond-expr","locations":[{"start":{"line":255,"column":44},"end":{"line":255,"column":53}},{"start":{"line":255,"column":56},"end":{"line":255,"column":61}}]}},"code":["'use strict';","","var fs = require('fs'),","    http = require('http'),","    https = require('https'),","    path = require('path'),","    semver = require('semver'),","    url = require('url'),","    Q = require('q');","","var CustomError = require('./customError'),","    exec = require('./processTools').exec,","    log = require('./log'),","    utils = require('./utils');","    ","var node_modules = 'node_modules';","var packageJson = 'package.json';","","var installTask;","var installQueue = [];","","// downloads a file","function downloadFile (inputUri, callback) {","","  var uri = url.parse(inputUri);","","  var options = {","    host: uri.hostname,","    port: uri.port || (uri.protocol === 'https:' ? 443 : 80),","    path: uri.path,","    agent: false","  };","","  var protocol = uri.protocol === 'https:' ? https : http;","","  var deferred = Q.defer();","  protocol.get(options, function (res) {","    ","    var buffer = '';","    res.on('data', function(data) {","      buffer += data;","    }).on('end', function() {","      if (res.statusCode === 200) {","        return deferred.resolve({ 'statusCode': res.statusCode, 'statusMessage': res.statusMessage, 'contentType': res.headers['content-type'], 'data': buffer });","      }","      ","      // If status is Moved Permanently or Found, redirect to new URL","      if ([301, 302].indexOf(res.statusCode) > -1) {","        return downloadFile(res.headers.location)","          .then(function (result) { deferred.resolve(result); })","          .catch(function (err) { deferred.reject(err); });","      }","      ","      return deferred.reject(new Error('Error downloading \\'' + inputUri + '\\'. Response was \\'' + res.statusCode + ' - ' + res.statusMessage + '\\'.'));        ","    }).on('error', function(err) {","      return deferred.reject(err);","    });","  }).on('error', function (err) {","    return deferred.reject(err);","  });","","  return deferred.promise.nodeify(callback);","}","","// returns package information (package.json) given a package name ","function getPackageInformation (packageName, parentPackagePath) {","","  try {","    if (!parentPackagePath) {","      parentPackagePath = path.dirname(utils.getRootPackagePath());","    }","","    var modulePath = parentPackagePath;","    ","    if (packageName) {","      modulePath = (path.basename(modulePath) === node_modules) ? modulePath : path.join(modulePath, node_modules);","      modulePath = path.join(modulePath, packageName);      ","    }","    modulePath = path.join(modulePath, packageJson);","","    return require(modulePath);","  }","  catch (err) {","    if (err.code !== 'MODULE_NOT_FOUND') {","      throw err;","    }","    ","    var next = path.resolve(parentPackagePath, '..');","    if (parentPackagePath !== next) {","      return getPackageInformation(packageName, next);      ","    }    ","  }","  ","  throw new Error('Error retrieving information for module: \\'' + (packageName || 'main') + '\\'.');","}","","// returns package information (package.json) given a file or directory ","function getModuleInformation (dir) {","    ","  try {","    if (!dir) {","      dir = utils.getRootPackagePath();","    }","","    var info = fs.statSync(dir);","    if (info.isFile()) {","      dir = path.dirname(dir);","    }","    ","    var packagePath = path.resolve(path.join(dir, packageJson));","    return require(packagePath);","  }","  catch (err) {","    if (err.code !== 'MODULE_NOT_FOUND') {","      throw err;","    }","    ","    var next = path.resolve(dir, '..');","    if (dir !== next) {","      return getModuleInformation(next);      ","    }    ","  }","  ","  throw new Error('Error retrieving information for module: \\'' + (dir || 'main') + '\\'.');","} ","","// get package information from the npm registry","function getNpmPackageInfo (packageName, callback) {","  var deferred = Q.defer();","  http.get('http://registry.npmjs.org/' + packageName + '/latest', function (res) {","    var data = '';","    ","    res.on('data', function (chunk) {","      data += chunk;","    });","    ","    res.on('end', function () {","      try","      {","        var packageJson = JSON.parse(data);","        if (packageJson.name && packageJson.version) {","          return deferred.resolve(packageJson);          ","        }","        ","        deferred.reject(new Error('Failed to retrieve information for npm package: \\'' + packageName + '\\'. npm registry returned: ' + packageJson.error + '-' + packageJson.reason + '.'));","      }","      catch (err) {","        return deferred.reject(new Error('Error parsing version information for npm package: \\'' + packageName + '\\'. ' + err.message + '.'));","      }","    });","  }).on('error', function (err) {","    deferred.reject(new Error('Error retrieving version information for npm package: \\'' + packageName + '\\'. ' + err.message + '.'));","  });","  ","  return deferred.promise.nodeify(callback);","}","","// get package information from a GitHub repository","function getGitHubPackageInformation (repositoryUrl, callback) {","  ","  var src = url.parse(repositoryUrl);","  if (!src.protocol) {","    return Q.reject(new Error('Repository URL is not a valid URL.')).nodeify(callback);","  }"," ","  if (src.protocol === 'git:') {","    src.protocol = 'https:';","  }","  ","  if (src.protocol !== 'http:' && src.protocol !== 'https:') {","    return Q.reject(new Error('Source parameter uses an unsupported protocol \\'' + src.protocol + '\\'.')).nodeify(callback);","  }","","  var gitUrl = url.format({","    protocol: src.protocol,","    host: src.host.replace(/^github.com/, 'raw.githubusercontent.com'),","    pathname: src.pathname.replace(/.git$/, '') + ","                  (/\\/$/.test(src.pathname) ? '' : '/') + ","                  'master/package.json' ","  });   ","  ","  return downloadFile(gitUrl).then(function (response) {","    return JSON.parse(response.data);","  })","  .catch(function (err) {","    return Q.reject(new CustomError('Failed to retrieve the package information from GitHub.', err));","  });","}","","// get the latest version for an npm package","function getNpmPackageLatestVersion (packageName, callback) {","  return getNpmPackageInfo(packageName).then(function (packageJson) {","    return packageJson.version;","  })","  .nodeify(callback);","}","","// checks for updates to the application","function checkForUpdate (callback) {","  ","  var mainModule = getPackageInformation();","  return getNpmPackageLatestVersion(mainModule.name).then(function (latestVersion) {","    var updateVersion = semver.lt(mainModule.version, latestVersion) ? latestVersion : undefined;","    return Q.resolve(updateVersion);","  })","  .nodeify(callback);","}","","// installs an npm package","function installPackage (packageName, source, callback) {","","  log.info('Installing new module: ' + packageName);","","  // npm command in Windows is a batch file and needs to include extension to be resolved by spawn call","  var npm = (process.platform === 'win32' ? 'npm.cmd' : 'npm');","  var appRoot = path.dirname(utils.getRootPackagePath());","  return exec(npm, ['install', source], { cwd: appRoot, statusMessage: 'Installing package ' }).then(function () {","    var module = require(packageName);","    return Q.resolve(module);","  })","  .catch(function (err) {","    return Q.reject(new CustomError('Failed to install module: \\'' + packageName + '\\'.', err));","  })","  .nodeify(callback);","}","","// Returns a promise that is fulfilled when the requested package is installed.","//","// Queued installation is recommended when installing multiple packages. This builds a queue of packages to install and then ","// launches a single npm instance to install all of them in a single operation. Launching multiple npm instances in parallel ","// sometimes runs into issues if an npm instance detects that some dependencies are missing because they are still being installed ","// by a different instance (npm WARN unmet dependency ...)","function queuePackageInstallation (packageName, source, callback) {","","  installQueue.push({ packageName: packageName, source: source });","  if (!installTask) {","    installTask = Q.defer();","  }","  ","  return installTask.promise.nodeify(callback);","}","","// Triggers the installation of all queued npm packages.","function installQueuedPackages () {","","  if (installQueue.length === 0) {","    return;","  }","","  var moduleList = installQueue.reduce(function (previous, current) { return previous + (previous ? ', ' : '') + current.packageName; }, '');","","  log.info('Installing the following module(s): \\'' + moduleList + '\\'...');","","  // npm command in Windows is a batch file and needs to include extension to be resolved by spawn call","  var npm = (process.platform === 'win32' ? 'npm.cmd' : 'npm');","  var appRoot = path.dirname(utils.getRootPackagePath());","","  // build package list                    ","  var sources = installQueue.map(function (item) { ","    return item.source;","  });","  ","  // launch npm  ","  return exec(npm, ['install'].concat(sources), { cwd: appRoot, statusMessage: 'Installing packages '  }).then(function () {","    // signal completion","    installTask.resolve(installQueue);","  })","  .catch(function (err) {","    return installTask.reject(new CustomError('Failed to install the following module(s): \\'' + moduleList + '\\'.', err));","  })","  .finally(function () {","    // clear queue","    installTask = undefined;","    installQueue = [];      ","  });","}","","module.exports = {","  getPackageInformation: getPackageInformation,","  getModuleInformation: getModuleInformation,","  getGitHubPackageInformation: getGitHubPackageInformation,","  getNpmPackageInfo: getNpmPackageInfo,","  getNpmPackageLatestVersion: getNpmPackageLatestVersion,","  checkForUpdate: checkForUpdate,","  installPackage: installPackage,","  queuePackageInstallation: queuePackageInstallation,","  installQueuedPackages: installQueuedPackages","};",""],"l":{"3":1,"11":1,"16":1,"17":1,"19":1,"20":1,"23":1,"25":0,"27":0,"34":0,"36":0,"37":0,"39":0,"40":0,"41":0,"43":0,"44":0,"48":0,"49":0,"50":0,"51":0,"54":0,"56":0,"59":0,"62":0,"66":1,"68":0,"69":0,"70":0,"73":0,"75":0,"76":0,"77":0,"79":0,"81":0,"84":0,"85":0,"88":0,"89":0,"90":0,"94":0,"98":1,"100":0,"101":0,"102":0,"105":0,"106":0,"107":0,"110":0,"111":0,"114":0,"115":0,"118":0,"119":0,"120":0,"124":0,"128":1,"129":0,"130":0,"131":0,"133":0,"134":0,"137":0,"138":0,"140":0,"141":0,"142":0,"145":0,"148":0,"152":0,"155":0,"159":1,"161":0,"162":0,"163":0,"166":0,"167":0,"170":0,"171":0,"174":0,"182":0,"183":0,"186":0,"191":1,"192":0,"193":0,"199":1,"201":0,"202":0,"203":0,"204":0,"210":1,"212":0,"215":0,"216":0,"217":0,"218":0,"219":0,"222":0,"233":1,"235":0,"236":0,"237":0,"240":0,"244":1,"246":0,"247":0,"250":0,"252":0,"255":0,"256":0,"259":0,"260":0,"264":0,"266":0,"269":0,"273":0,"274":0,"278":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/processTools.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/processTools.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"writeOutput","line":15,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":58}}},"2":{"name":"(anonymous_2)","line":24,"loc":{"start":{"line":24,"column":16},"end":{"line":24,"column":32}}},"3":{"name":"exec","line":32,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":49}}},"4":{"name":"(anonymous_4)","line":65,"loc":{"start":{"line":65,"column":33},"end":{"line":65,"column":49}}},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":33},"end":{"line":78,"column":49}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":27},"end":{"line":91,"column":42}}},"7":{"name":"(anonymous_7)","line":96,"loc":{"start":{"line":96,"column":26},"end":{"line":96,"column":42}}},"8":{"name":"(anonymous_8)","line":117,"loc":{"start":{"line":117,"column":34},"end":{"line":117,"column":46}}},"9":{"name":"getCommandPath","line":125,"loc":{"start":{"line":125,"column":0},"end":{"line":125,"column":46}}},"10":{"name":"(anonymous_10)","line":131,"loc":{"start":{"line":131,"column":42},"end":{"line":131,"column":62}}},"11":{"name":"(anonymous_11)","line":135,"loc":{"start":{"line":135,"column":11},"end":{"line":135,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":6,"column":21}},"2":{"start":{"line":8,"column":0},"end":{"line":9,"column":46}},"3":{"start":{"line":11,"column":0},"end":{"line":11,"column":39}},"4":{"start":{"line":13,"column":0},"end":{"line":13,"column":34}},"5":{"start":{"line":15,"column":0},"end":{"line":30,"column":1}},"6":{"start":{"line":18,"column":2},"end":{"line":18,"column":61}},"7":{"start":{"line":21,"column":2},"end":{"line":21,"column":31}},"8":{"start":{"line":24,"column":2},"end":{"line":26,"column":5}},"9":{"start":{"line":25,"column":4},"end":{"line":25,"column":28}},"10":{"start":{"line":29,"column":2},"end":{"line":29,"column":24}},"11":{"start":{"line":32,"column":0},"end":{"line":123,"column":1}},"12":{"start":{"line":34,"column":2},"end":{"line":34,"column":27}},"13":{"start":{"line":36,"column":2},"end":{"line":36,"column":18}},"14":{"start":{"line":37,"column":2},"end":{"line":37,"column":18}},"15":{"start":{"line":38,"column":2},"end":{"line":38,"column":27}},"16":{"start":{"line":39,"column":2},"end":{"line":39,"column":27}},"17":{"start":{"line":41,"column":2},"end":{"line":48,"column":3}},"18":{"start":{"line":42,"column":4},"end":{"line":47,"column":5}},"19":{"start":{"line":43,"column":6},"end":{"line":43,"column":19}},"20":{"start":{"line":45,"column":6},"end":{"line":45,"column":21}},"21":{"start":{"line":46,"column":6},"end":{"line":46,"column":16}},"22":{"start":{"line":51,"column":2},"end":{"line":51,"column":89}},"23":{"start":{"line":54,"column":2},"end":{"line":54,"column":65}},"24":{"start":{"line":57,"column":2},"end":{"line":59,"column":3}},"25":{"start":{"line":58,"column":4},"end":{"line":58,"column":42}},"26":{"start":{"line":62,"column":2},"end":{"line":62,"column":41}},"27":{"start":{"line":65,"column":2},"end":{"line":75,"column":5}},"28":{"start":{"line":66,"column":4},"end":{"line":66,"column":31}},"29":{"start":{"line":67,"column":4},"end":{"line":67,"column":19}},"30":{"start":{"line":69,"column":4},"end":{"line":74,"column":5}},"31":{"start":{"line":70,"column":6},"end":{"line":70,"column":23}},"32":{"start":{"line":71,"column":6},"end":{"line":71,"column":72}},"33":{"start":{"line":72,"column":6},"end":{"line":72,"column":17}},"34":{"start":{"line":73,"column":6},"end":{"line":73,"column":44}},"35":{"start":{"line":78,"column":2},"end":{"line":88,"column":5}},"36":{"start":{"line":79,"column":4},"end":{"line":79,"column":31}},"37":{"start":{"line":80,"column":4},"end":{"line":80,"column":19}},"38":{"start":{"line":82,"column":4},"end":{"line":87,"column":5}},"39":{"start":{"line":83,"column":6},"end":{"line":83,"column":23}},"40":{"start":{"line":84,"column":6},"end":{"line":84,"column":72}},"41":{"start":{"line":85,"column":6},"end":{"line":85,"column":17}},"42":{"start":{"line":86,"column":6},"end":{"line":86,"column":44}},"43":{"start":{"line":91,"column":2},"end":{"line":93,"column":5}},"44":{"start":{"line":92,"column":4},"end":{"line":92,"column":32}},"45":{"start":{"line":96,"column":2},"end":{"line":115,"column":5}},"46":{"start":{"line":98,"column":4},"end":{"line":100,"column":5}},"47":{"start":{"line":99,"column":6},"end":{"line":99,"column":34}},"48":{"start":{"line":102,"column":4},"end":{"line":104,"column":5}},"49":{"start":{"line":103,"column":6},"end":{"line":103,"column":34}},"50":{"start":{"line":106,"column":4},"end":{"line":106,"column":70}},"51":{"start":{"line":108,"column":4},"end":{"line":112,"column":5}},"52":{"start":{"line":109,"column":6},"end":{"line":109,"column":138}},"53":{"start":{"line":110,"column":6},"end":{"line":110,"column":72}},"54":{"start":{"line":110,"column":37},"end":{"line":110,"column":70}},"55":{"start":{"line":111,"column":6},"end":{"line":111,"column":34}},"56":{"start":{"line":114,"column":4},"end":{"line":114,"column":29}},"57":{"start":{"line":117,"column":2},"end":{"line":122,"column":21}},"58":{"start":{"line":118,"column":4},"end":{"line":120,"column":5}},"59":{"start":{"line":119,"column":6},"end":{"line":119,"column":23}},"60":{"start":{"line":125,"column":0},"end":{"line":149,"column":1}},"61":{"start":{"line":126,"column":2},"end":{"line":128,"column":3}},"62":{"start":{"line":127,"column":4},"end":{"line":127,"column":21}},"63":{"start":{"line":130,"column":2},"end":{"line":130,"column":71}},"64":{"start":{"line":131,"column":2},"end":{"line":148,"column":5}},"65":{"start":{"line":132,"column":4},"end":{"line":134,"column":5}},"66":{"start":{"line":133,"column":6},"end":{"line":133,"column":33}},"67":{"start":{"line":136,"column":4},"end":{"line":138,"column":5}},"68":{"start":{"line":137,"column":6},"end":{"line":137,"column":27}},"69":{"start":{"line":140,"column":4},"end":{"line":140,"column":78}},"70":{"start":{"line":141,"column":4},"end":{"line":145,"column":5}},"71":{"start":{"line":142,"column":6},"end":{"line":144,"column":7}},"72":{"start":{"line":143,"column":8},"end":{"line":143,"column":89}},"73":{"start":{"line":147,"column":4},"end":{"line":147,"column":48}},"74":{"start":{"line":151,"column":0},"end":{"line":154,"column":2}}},"branchMap":{"1":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":2},"end":{"line":41,"column":2}},{"start":{"line":41,"column":2},"end":{"line":41,"column":2}}]},"2":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":4},"end":{"line":42,"column":4}},{"start":{"line":42,"column":4},"end":{"line":42,"column":4}}]},"3":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":2},"end":{"line":57,"column":2}},{"start":{"line":57,"column":2},"end":{"line":57,"column":2}}]},"4":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"5":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":4},"end":{"line":82,"column":4}},{"start":{"line":82,"column":4},"end":{"line":82,"column":4}}]},"6":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":4},"end":{"line":98,"column":4}},{"start":{"line":98,"column":4},"end":{"line":98,"column":4}}]},"7":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":4},"end":{"line":102,"column":4}},{"start":{"line":102,"column":4},"end":{"line":102,"column":4}}]},"8":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":4},"end":{"line":108,"column":4}},{"start":{"line":108,"column":4},"end":{"line":108,"column":4}}]},"9":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":4},"end":{"line":118,"column":4}},{"start":{"line":118,"column":4},"end":{"line":118,"column":4}}]},"10":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":2},"end":{"line":126,"column":2}},{"start":{"line":126,"column":2},"end":{"line":126,"column":2}}]},"11":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":4},"end":{"line":132,"column":4}},{"start":{"line":132,"column":4},"end":{"line":132,"column":4}}]},"12":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":4},"end":{"line":136,"column":4}},{"start":{"line":136,"column":4},"end":{"line":136,"column":4}}]},"13":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":4},"end":{"line":141,"column":4}},{"start":{"line":141,"column":4},"end":{"line":141,"column":4}}]},"14":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":6},"end":{"line":142,"column":6}},{"start":{"line":142,"column":6},"end":{"line":142,"column":6}}]}},"code":["'use strict';","","var child_process = require('child_process'),","    fs = require('fs'),","    path = require('path'),","    Q = require('q');","","var log = require('./log'),","    ProgressIndicator = require('./progress');","","var progress = new ProgressIndicator();  ","","var node_modules = 'node_modules';","","function writeOutput(text, bufferedOutput, source, title) {","","  // split output by line","  var lines = (title + bufferedOutput + text).split(/\\r?\\n/);","  ","  // buffer content from last line, in case it hasn't been read completely","  bufferedOutput = lines.pop();    ","  ","  // write complete lines to output","  lines.forEach(function (line) {","    log.debug(line, source);","  });","  ","  // return buffered output","  return bufferedOutput;","}","","function exec (command, args, options, callback) {","  ","  var deferred = Q.defer();","  ","  var stdout = '';","  var stderr = '';","  var bufferedStdout  = '';","  var bufferedStderr  = '';","  ","  if (arguments.length === 2) {","    if (Array.isArray(args)) {","      options = {};","    } else {","      options = args;","      args = [];","    }","  }","","  // log command line","  var title = 'Launching external process: \\'' + command + ' ' + args.join(' ') + '\\'\\n';","","  // spawn new process","  var childProcess = child_process.spawn(command, args, options);","","  // show progress indicator","  if (!options.suppressOutput) {","    progress.start(options.statusMessage);","  }  ","  ","  // console log source displays the process ID ","  var source = 'pid:' + childProcess.pid;","","  // capture stdout","  childProcess.stdout.on('data', function (data) {      ","    var text = data.toString();","    stdout += text;","        ","    if (!options.suppressOutput) {","      progress.reset();","      bufferedStdout = writeOutput(text, bufferedStdout, source, title);","      title = '';","      progress.start(options.statusMessage);","    }    ","  });","","  // capture stderr","  childProcess.stderr.on('data', function (data) {","    var text = data.toString();","    stderr += text;","    ","    if (!options.suppressOutput) {","      progress.reset();","      bufferedStderr = writeOutput(text, bufferedStderr, source, title);","      title = '';","      progress.start(options.statusMessage);","    }","  });","  ","  // handle errors","  childProcess.on('error', function (err) {","    return deferred.reject(err);","  });","    ","  // process has exited","  childProcess.on('exit', function (code) {","    // write pending output to console","    if (bufferedStdout) {","      writeOutput(bufferedStdout);","    }","    ","    if (bufferedStderr) {","      writeOutput(bufferedStderr);","    }","    ","    var result = { 'code': code, 'stdout': stdout, 'stderr': stderr };","    ","    if (code !== 0) {","      var err = new Error('External process [process ID: ' + childProcess.pid + '] completed with errors. ' + stderr.replace(/\\n*$/, ''));","      for (var attrname in result) { err[attrname] = result[attrname]; }","      return deferred.reject(err);","    }","    ","    deferred.resolve(result);","  });","  ","  return deferred.promise.finally(function () {","    if (!options.suppressOutput) {","      progress.reset();","    }","  })","  .nodeify(callback);","}","","function getCommandPath(currentPath, command) {","  if (!currentPath) {","    return undefined;","  }","  ","  var testPath = path.join(currentPath, node_modules, '.bin', command);","  return Q.nfcall(fs.stat, testPath).then(function (fileInfo) {","    if (fileInfo.isFile()) {","      return Q.resolve(testPath);","    }","  }).catch(function (err) {","    if (err.code !== 'ENOENT') {","      return Q.reject(err);","    }","    ","    currentPath = currentPath.substring(0, currentPath.lastIndexOf(path.sep));","    if (currentPath.indexOf(node_modules) >= 0) {","      if (currentPath.substr(currentPath.length - node_modules.length) === node_modules) {","        currentPath = currentPath.substring(0, currentPath.length - node_modules.length);","      }      ","    }","    ","    return getCommandPath(currentPath, command);    ","  });  ","}","","module.exports = {","  exec: exec,","  getCommandPath: getCommandPath","};",""],"l":{"3":1,"8":1,"11":1,"13":1,"15":1,"18":0,"21":0,"24":0,"25":0,"29":0,"32":1,"34":0,"36":0,"37":0,"38":0,"39":0,"41":0,"42":0,"43":0,"45":0,"46":0,"51":0,"54":0,"57":0,"58":0,"62":0,"65":0,"66":0,"67":0,"69":0,"70":0,"71":0,"72":0,"73":0,"78":0,"79":0,"80":0,"82":0,"83":0,"84":0,"85":0,"86":0,"91":0,"92":0,"96":0,"98":0,"99":0,"102":0,"103":0,"106":0,"108":0,"109":0,"110":0,"111":0,"114":0,"117":0,"118":0,"119":0,"125":1,"126":0,"127":0,"130":0,"131":0,"132":0,"133":0,"136":0,"137":0,"140":0,"141":0,"142":0,"143":0,"147":0,"151":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/validations.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/validations.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":1,"17":0,"18":0,"19":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"platformsValid","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":35}}},"2":{"name":"platformToRunValid","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":38}}},"3":{"name":"logLevelValid","line":28,"loc":{"start":{"line":28,"column":0},"end":{"line":28,"column":30}}},"4":{"name":"manifestFormatValid","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":37}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":4,"column":47}},"2":{"start":{"line":6,"column":0},"end":{"line":16,"column":1}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":57}},"4":{"start":{"line":9,"column":2},"end":{"line":13,"column":3}},"5":{"start":{"line":10,"column":4},"end":{"line":12,"column":5}},"6":{"start":{"line":11,"column":6},"end":{"line":11,"column":19}},"7":{"start":{"line":15,"column":2},"end":{"line":15,"column":14}},"8":{"start":{"line":18,"column":0},"end":{"line":26,"column":1}},"9":{"start":{"line":19,"column":2},"end":{"line":19,"column":46}},"10":{"start":{"line":21,"column":2},"end":{"line":23,"column":3}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":17}},"12":{"start":{"line":25,"column":2},"end":{"line":25,"column":14}},"13":{"start":{"line":28,"column":0},"end":{"line":31,"column":1}},"14":{"start":{"line":29,"column":2},"end":{"line":29,"column":59}},"15":{"start":{"line":30,"column":2},"end":{"line":30,"column":59}},"16":{"start":{"line":33,"column":0},"end":{"line":36,"column":1}},"17":{"start":{"line":34,"column":2},"end":{"line":34,"column":70}},"18":{"start":{"line":35,"column":2},"end":{"line":35,"column":61}},"19":{"start":{"line":38,"column":0},"end":{"line":43,"column":2}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":4}},{"start":{"line":10,"column":4},"end":{"line":10,"column":4}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":21,"column":2}},{"start":{"line":21,"column":2},"end":{"line":21,"column":2}}]},"3":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":6},"end":{"line":21,"column":15}},{"start":{"line":21,"column":19},"end":{"line":21,"column":69}}]}},"code":["﻿'use strict';","","var platformTools = require('./platformTools'),","    manifestTools = require('./manifestTools');","","function platformsValid(platforms) {","  var availablePlatforms = platformTools.listPlatforms();","","  for (var i = 0; i < platforms.length; i++) {","    if (availablePlatforms.indexOf(platforms[i].toLowerCase()) < 0) {","      return false;","    }","  }","","  return true;","}","","function platformToRunValid(platform) {","  var platformsToRun = ['windows', 'android'];","","  if (!platform || platformsToRun.indexOf(platform.toLowerCase()) < 0) {","    return false;","  }","","  return true;","}","","function logLevelValid(level) {","  var availableLevels = ['debug', 'info', 'warn', 'error'];","  return availableLevels.indexOf(level.toLowerCase()) >= 0;","}","","function manifestFormatValid(format) {","  var availableFormats = manifestTools.listAvailableManifestFormats();","  return availableFormats.indexOf(format.toLowerCase()) >= 0;","}","","module.exports = {","  platformsValid: platformsValid,","  platformToRunValid: platformToRunValid,","  logLevelValid: logLevelValid,","  manifestFormatValid: manifestFormatValid","};",""],"l":{"3":1,"6":1,"7":0,"9":0,"10":0,"11":0,"15":0,"18":1,"19":0,"21":0,"22":0,"25":0,"28":1,"29":0,"30":0,"33":1,"34":0,"35":0,"38":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/projectBuilder.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/projectBuilder.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},"fnMap":{"1":{"name":"processPlatformTasks","line":16,"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":38}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":34},"end":{"line":17,"column":53}}},"3":{"name":"(anonymous_3)","line":18,"loc":{"start":{"line":18,"column":32},"end":{"line":18,"column":59}}},"4":{"name":"validateManifest","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":71}}},"5":{"name":"(anonymous_5)","line":34,"loc":{"start":{"line":34,"column":94},"end":{"line":34,"column":123}}},"6":{"name":"(anonymous_6)","line":38,"loc":{"start":{"line":38,"column":30},"end":{"line":38,"column":48}}},"7":{"name":"createApps","line":56,"loc":{"start":{"line":56,"column":0},"end":{"line":56,"column":77}}},"8":{"name":"(anonymous_8)","line":78,"loc":{"start":{"line":78,"column":48},"end":{"line":78,"column":60}}},"9":{"name":"(anonymous_9)","line":82,"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":35}}},"10":{"name":"(anonymous_10)","line":86,"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":35}}},"11":{"name":"(anonymous_11)","line":88,"loc":{"start":{"line":88,"column":36},"end":{"line":88,"column":56}}},"12":{"name":"(anonymous_12)","line":91,"loc":{"start":{"line":91,"column":93},"end":{"line":91,"column":105}}},"13":{"name":"(anonymous_13)","line":94,"loc":{"start":{"line":94,"column":15},"end":{"line":94,"column":30}}},"14":{"name":"packageApps","line":109,"loc":{"start":{"line":109,"column":0},"end":{"line":109,"column":57}}},"15":{"name":"(anonymous_15)","line":124,"loc":{"start":{"line":124,"column":64},"end":{"line":124,"column":83}}},"16":{"name":"(anonymous_16)","line":131,"loc":{"start":{"line":131,"column":55},"end":{"line":131,"column":82}}},"17":{"name":"(anonymous_17)","line":133,"loc":{"start":{"line":133,"column":38},"end":{"line":133,"column":58}}},"18":{"name":"(anonymous_18)","line":136,"loc":{"start":{"line":136,"column":71},"end":{"line":136,"column":83}}},"19":{"name":"(anonymous_19)","line":139,"loc":{"start":{"line":139,"column":18},"end":{"line":139,"column":33}}},"20":{"name":"runApp","line":153,"loc":{"start":{"line":153,"column":0},"end":{"line":153,"column":53}}},"21":{"name":"(anonymous_21)","line":167,"loc":{"start":{"line":167,"column":64},"end":{"line":167,"column":83}}},"22":{"name":"(anonymous_22)","line":174,"loc":{"start":{"line":174,"column":58},"end":{"line":174,"column":85}}},"23":{"name":"(anonymous_23)","line":179,"loc":{"start":{"line":179,"column":66},"end":{"line":179,"column":81}}},"24":{"name":"openApp","line":190,"loc":{"start":{"line":190,"column":0},"end":{"line":190,"column":54}}},"25":{"name":"(anonymous_25)","line":204,"loc":{"start":{"line":204,"column":64},"end":{"line":204,"column":83}}},"26":{"name":"(anonymous_26)","line":211,"loc":{"start":{"line":211,"column":58},"end":{"line":211,"column":85}}},"27":{"name":"(anonymous_27)","line":216,"loc":{"start":{"line":216,"column":67},"end":{"line":216,"column":82}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":21}},"3":{"start":{"line":7,"column":0},"end":{"line":14,"column":58}},"4":{"start":{"line":16,"column":0},"end":{"line":31,"column":1}},"5":{"start":{"line":17,"column":2},"end":{"line":30,"column":5}},"6":{"start":{"line":18,"column":4},"end":{"line":25,"column":13}},"7":{"start":{"line":19,"column":6},"end":{"line":22,"column":7}},"8":{"start":{"line":20,"column":8},"end":{"line":20,"column":46}},"9":{"start":{"line":21,"column":8},"end":{"line":21,"column":21}},"10":{"start":{"line":24,"column":6},"end":{"line":24,"column":21}},"11":{"start":{"line":27,"column":4},"end":{"line":29,"column":5}},"12":{"start":{"line":28,"column":6},"end":{"line":28,"column":95}},"13":{"start":{"line":33,"column":0},"end":{"line":54,"column":1}},"14":{"start":{"line":34,"column":2},"end":{"line":53,"column":5}},"15":{"start":{"line":36,"column":4},"end":{"line":36,"column":32}},"16":{"start":{"line":37,"column":4},"end":{"line":37,"column":28}},"17":{"start":{"line":38,"column":4},"end":{"line":47,"column":7}},"18":{"start":{"line":39,"column":6},"end":{"line":39,"column":48}},"19":{"start":{"line":40,"column":6},"end":{"line":40,"column":204}},"20":{"start":{"line":41,"column":6},"end":{"line":46,"column":7}},"21":{"start":{"line":42,"column":8},"end":{"line":42,"column":53}},"22":{"start":{"line":43,"column":13},"end":{"line":46,"column":7}},"23":{"start":{"line":44,"column":8},"end":{"line":44,"column":54}},"24":{"start":{"line":45,"column":8},"end":{"line":45,"column":31}},"25":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"26":{"start":{"line":51,"column":6},"end":{"line":51,"column":128}},"27":{"start":{"line":56,"column":0},"end":{"line":107,"column":1}},"28":{"start":{"line":59,"column":2},"end":{"line":61,"column":3}},"29":{"start":{"line":60,"column":4},"end":{"line":60,"column":96}},"30":{"start":{"line":63,"column":2},"end":{"line":68,"column":3}},"31":{"start":{"line":64,"column":4},"end":{"line":67,"column":5}},"32":{"start":{"line":65,"column":6},"end":{"line":65,"column":25}},"33":{"start":{"line":66,"column":6},"end":{"line":66,"column":19}},"34":{"start":{"line":71,"column":2},"end":{"line":71,"column":75}},"35":{"start":{"line":72,"column":2},"end":{"line":72,"column":60}},"36":{"start":{"line":75,"column":2},"end":{"line":75,"column":98}},"37":{"start":{"line":78,"column":2},"end":{"line":106,"column":21}},"38":{"start":{"line":80,"column":4},"end":{"line":80,"column":50}},"39":{"start":{"line":84,"column":4},"end":{"line":84,"column":102}},"40":{"start":{"line":88,"column":4},"end":{"line":100,"column":7}},"41":{"start":{"line":89,"column":6},"end":{"line":97,"column":7}},"42":{"start":{"line":90,"column":8},"end":{"line":90,"column":67}},"43":{"start":{"line":91,"column":8},"end":{"line":96,"column":11}},"44":{"start":{"line":92,"column":10},"end":{"line":92,"column":78}},"45":{"start":{"line":95,"column":10},"end":{"line":95,"column":99}},"46":{"start":{"line":99,"column":6},"end":{"line":99,"column":25}},"47":{"start":{"line":102,"column":4},"end":{"line":102,"column":39}},"48":{"start":{"line":109,"column":0},"end":{"line":151,"column":1}},"49":{"start":{"line":112,"column":2},"end":{"line":114,"column":3}},"50":{"start":{"line":113,"column":4},"end":{"line":113,"column":96}},"51":{"start":{"line":116,"column":2},"end":{"line":121,"column":3}},"52":{"start":{"line":117,"column":4},"end":{"line":120,"column":5}},"53":{"start":{"line":118,"column":6},"end":{"line":118,"column":25}},"54":{"start":{"line":119,"column":6},"end":{"line":119,"column":19}},"55":{"start":{"line":124,"column":2},"end":{"line":150,"column":21}},"56":{"start":{"line":126,"column":4},"end":{"line":128,"column":5}},"57":{"start":{"line":127,"column":6},"end":{"line":127,"column":115}},"58":{"start":{"line":131,"column":4},"end":{"line":148,"column":7}},"59":{"start":{"line":133,"column":6},"end":{"line":145,"column":9}},"60":{"start":{"line":134,"column":8},"end":{"line":142,"column":9}},"61":{"start":{"line":135,"column":10},"end":{"line":135,"column":70}},"62":{"start":{"line":136,"column":10},"end":{"line":141,"column":13}},"63":{"start":{"line":137,"column":12},"end":{"line":137,"column":81}},"64":{"start":{"line":140,"column":12},"end":{"line":140,"column":102}},"65":{"start":{"line":144,"column":8},"end":{"line":144,"column":27}},"66":{"start":{"line":147,"column":6},"end":{"line":147,"column":41}},"67":{"start":{"line":153,"column":0},"end":{"line":188,"column":1}},"68":{"start":{"line":155,"column":2},"end":{"line":157,"column":3}},"69":{"start":{"line":156,"column":4},"end":{"line":156,"column":96}},"70":{"start":{"line":159,"column":2},"end":{"line":164,"column":3}},"71":{"start":{"line":160,"column":4},"end":{"line":163,"column":5}},"72":{"start":{"line":161,"column":6},"end":{"line":161,"column":25}},"73":{"start":{"line":162,"column":6},"end":{"line":162,"column":19}},"74":{"start":{"line":167,"column":2},"end":{"line":187,"column":21}},"75":{"start":{"line":169,"column":4},"end":{"line":171,"column":5}},"76":{"start":{"line":170,"column":6},"end":{"line":170,"column":115}},"77":{"start":{"line":174,"column":4},"end":{"line":185,"column":7}},"78":{"start":{"line":176,"column":6},"end":{"line":182,"column":7}},"79":{"start":{"line":177,"column":8},"end":{"line":177,"column":42}},"80":{"start":{"line":178,"column":8},"end":{"line":178,"column":69}},"81":{"start":{"line":179,"column":8},"end":{"line":181,"column":11}},"82":{"start":{"line":180,"column":10},"end":{"line":180,"column":99}},"83":{"start":{"line":184,"column":6},"end":{"line":184,"column":25}},"84":{"start":{"line":190,"column":0},"end":{"line":225,"column":1}},"85":{"start":{"line":192,"column":2},"end":{"line":194,"column":3}},"86":{"start":{"line":193,"column":4},"end":{"line":193,"column":96}},"87":{"start":{"line":196,"column":2},"end":{"line":201,"column":3}},"88":{"start":{"line":197,"column":4},"end":{"line":200,"column":5}},"89":{"start":{"line":198,"column":6},"end":{"line":198,"column":25}},"90":{"start":{"line":199,"column":6},"end":{"line":199,"column":19}},"91":{"start":{"line":204,"column":2},"end":{"line":224,"column":21}},"92":{"start":{"line":206,"column":4},"end":{"line":208,"column":5}},"93":{"start":{"line":207,"column":6},"end":{"line":207,"column":115}},"94":{"start":{"line":211,"column":4},"end":{"line":222,"column":7}},"95":{"start":{"line":213,"column":6},"end":{"line":219,"column":7}},"96":{"start":{"line":214,"column":8},"end":{"line":214,"column":42}},"97":{"start":{"line":215,"column":8},"end":{"line":215,"column":66}},"98":{"start":{"line":216,"column":8},"end":{"line":218,"column":11}},"99":{"start":{"line":217,"column":10},"end":{"line":217,"column":97}},"100":{"start":{"line":221,"column":6},"end":{"line":221,"column":25}},"101":{"start":{"line":227,"column":0},"end":{"line":232,"column":2}}},"branchMap":{"1":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":6},"end":{"line":19,"column":6}},{"start":{"line":19,"column":6},"end":{"line":19,"column":6}}]},"2":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"3":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":6},"end":{"line":41,"column":6}},{"start":{"line":41,"column":6},"end":{"line":41,"column":6}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":10},"end":{"line":41,"column":64}},{"start":{"line":41,"column":68},"end":{"line":41,"column":119}}]},"5":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":13},"end":{"line":43,"column":13}},{"start":{"line":43,"column":13},"end":{"line":43,"column":13}}]},"6":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"7":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":2},"end":{"line":59,"column":2}},{"start":{"line":59,"column":2},"end":{"line":59,"column":2}}]},"8":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":2},"end":{"line":63,"column":2}},{"start":{"line":63,"column":2},"end":{"line":63,"column":2}}]},"9":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":4},"end":{"line":64,"column":4}},{"start":{"line":64,"column":4},"end":{"line":64,"column":4}}]},"10":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":6},"end":{"line":89,"column":6}},{"start":{"line":89,"column":6},"end":{"line":89,"column":6}}]},"11":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":2},"end":{"line":112,"column":2}},{"start":{"line":112,"column":2},"end":{"line":112,"column":2}}]},"12":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":2},"end":{"line":116,"column":2}},{"start":{"line":116,"column":2},"end":{"line":116,"column":2}}]},"13":{"line":117,"type":"if","locations":[{"start":{"line":117,"column":4},"end":{"line":117,"column":4}},{"start":{"line":117,"column":4},"end":{"line":117,"column":4}}]},"14":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":37},"end":{"line":124,"column":40}},{"start":{"line":124,"column":44},"end":{"line":124,"column":57}}]},"15":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":126,"column":4}},{"start":{"line":126,"column":4},"end":{"line":126,"column":4}}]},"16":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":134,"column":8}},{"start":{"line":134,"column":8},"end":{"line":134,"column":8}}]},"17":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":2},"end":{"line":155,"column":2}},{"start":{"line":155,"column":2},"end":{"line":155,"column":2}}]},"18":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":2},"end":{"line":159,"column":2}},{"start":{"line":159,"column":2},"end":{"line":159,"column":2}}]},"19":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":4},"end":{"line":160,"column":4}},{"start":{"line":160,"column":4},"end":{"line":160,"column":4}}]},"20":{"line":167,"type":"binary-expr","locations":[{"start":{"line":167,"column":37},"end":{"line":167,"column":40}},{"start":{"line":167,"column":44},"end":{"line":167,"column":57}}]},"21":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":4},"end":{"line":169,"column":4}},{"start":{"line":169,"column":4},"end":{"line":169,"column":4}}]},"22":{"line":176,"type":"if","locations":[{"start":{"line":176,"column":6},"end":{"line":176,"column":6}},{"start":{"line":176,"column":6},"end":{"line":176,"column":6}}]},"23":{"line":176,"type":"binary-expr","locations":[{"start":{"line":176,"column":10},"end":{"line":176,"column":25}},{"start":{"line":176,"column":29},"end":{"line":176,"column":55}}]},"24":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":2},"end":{"line":192,"column":2}},{"start":{"line":192,"column":2},"end":{"line":192,"column":2}}]},"25":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":2},"end":{"line":196,"column":2}},{"start":{"line":196,"column":2},"end":{"line":196,"column":2}}]},"26":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":4},"end":{"line":197,"column":4}},{"start":{"line":197,"column":4},"end":{"line":197,"column":4}}]},"27":{"line":204,"type":"binary-expr","locations":[{"start":{"line":204,"column":37},"end":{"line":204,"column":40}},{"start":{"line":204,"column":44},"end":{"line":204,"column":57}}]},"28":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":4},"end":{"line":206,"column":4}},{"start":{"line":206,"column":4},"end":{"line":206,"column":4}}]},"29":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":6},"end":{"line":213,"column":6}},{"start":{"line":213,"column":6},"end":{"line":213,"column":6}}]},"30":{"line":213,"type":"binary-expr","locations":[{"start":{"line":213,"column":10},"end":{"line":213,"column":25}},{"start":{"line":213,"column":29},"end":{"line":213,"column":55}}]}},"code":["'use strict';","","var path = require('path');","","var Q = require('q');    ","","var CustomError = require('./customError'),","    fileTools = require('./fileTools'),","    log = require('./log'),","    manifestTools = require('./manifestTools'),","    platformTools = require('./platformTools'),","    projectTools = require('./projectTools'),","    utils = require('./utils'),","\t\tvalidationConstants = require('./constants').validation;","","function processPlatformTasks (tasks) {","  return Q.allSettled(tasks).then(function (results) {","    var result = results.reduce(function (success, result) {","      if (result.state !== 'fulfilled') {","        log.error(result.reason.getMessage());","        return false;","      }","      ","      return success;","    }, true);","    ","    if (!result) {","      return Q.reject(new Error('One or more platforms could not be generated successfully.'));","    }","  });","}","","function validateManifest(w3cManifestInfo, platformModules, platforms) {","  return manifestTools.applyValidationRules(w3cManifestInfo, platformModules, platforms).then(function (validationResults) {","    // output validation results","    var invalidManifest = false;","    var maxLenSeverity = 10;","    validationResults.forEach(function (result) {","      var severity = result.level.toUpperCase();          ","      var validationMessage = 'Manifest validation ' + severity + new Array(Math.max(maxLenSeverity - severity.length + 1, 0)).join(' ') + ' - ' +  result.description + '(member: ' + result.member + ').';","      if (result.level === validationConstants.levels.suggestion || result.level === validationConstants.levels.warning) {","        log.warn(validationMessage, result.platform);        ","      } else if (result.level === validationConstants.levels.error) {","        log.error(validationMessage, result.platform);        ","        invalidManifest = true;","      }","    });","    ","    // report manifest validation errors","    if (invalidManifest) {","      return Q.reject(new Error('The manifest is not valid. Review the validation messages above for additional information.'));","    }","  });","}","","function createApps (w3cManifestInfo, rootDir, platforms, options, callback) {","","  // validate arguments","  if (arguments.length < 3) {","    return Q.reject(new Error('One or more required arguments are missing.')).nodeify(callback);","  }","  ","  if (arguments.length === 4) {","    if (utils.isFunction(options)) {","      callback = options;","      options = {};      ","    }","  }","  ","  // determine the path where the app will be created","  options.appName = utils.sanitizeName(w3cManifestInfo.content.short_name);","  var generatedAppDir = path.join(rootDir, options.appName);","","  // Add timestamp to manifest information for telemetry purposes only","  w3cManifestInfo.timestamp = new Date().toISOString().replace(/T/, ' ').replace(/\\.[0-9]+/, ' ');","  ","  // create app directory","  return fileTools.mkdirp(generatedAppDir).then(function () {","    // load the platform modules","    return platformTools.loadPlatforms(platforms);","  })","  .then(function (platformModules) {","    // validate the manifest","    return validateManifest(w3cManifestInfo, platformModules, platforms).thenResolve(platformModules);","  })","  .then(function (platformModules) {","    // create apps for each platform","    var tasks = platformModules.map(function (platform) {","      if (platform) {","        log.debug('Creating the \\'' + platform.name + '\\' app...');","        return Q.ninvoke(platform, 'create', w3cManifestInfo, generatedAppDir, options).then(function () {","          log.info('The ' + platform.name + ' app was created successfully!');","        })","        .catch(function (err) {","          return Q.reject(new CustomError('Failed to create the ' + platform.name + ' app.', err));","        });","      }","            ","      return Q.resolve();","    });","","    return processPlatformTasks(tasks);","  })","  // return path to project folder","  .thenResolve(generatedAppDir)","  .nodeify(callback);","}","","function packageApps (platforms, dir, options, callback) {","","  // validate arguments","  if (arguments.length < 2) {","    return Q.reject(new Error('One or more required arguments are missing.')).nodeify(callback);","  }","  ","  if (arguments.length === 3) {","    if (utils.isFunction(options)) {","      callback = options;","      options = {};","    }","  }","  ","  // find the root of the project","  return projectTools.getProjectRoot(dir || process.cwd()).then(function (rootDir) {","","    if (!rootDir) {","      return Q.reject(new Error('The specified directory does not appear to contain a valid manifoldjs project.'));","    }","    ","    // load all platforms specified in the command line","    return platformTools.loadPlatforms(platforms).then(function (platformModules) {","      // package apps for each platform","      var tasks = platformModules.map(function (platform) {","        if (platform) {","          log.debug('Packaging the \\'' + platform.name + '\\' app...');","          return Q.ninvoke(platform, 'package', rootDir, options).then(function () {","            log.info('The ' + platform.name + ' app was packaged successfully!');","          })    ","          .catch (function (err) {","            return Q.reject(new CustomError('Failed to package the ' + platform.name + ' app.', err));","          });","        }","","        return Q.resolve();","      });","","      return processPlatformTasks(tasks);","    });","  })","  .nodeify(callback);","}","","function runApp (platformId, dir, options, callback) {","  // validate arguments","  if (arguments.length < 2) {","    return Q.reject(new Error('One or more required arguments are missing.')).nodeify(callback);","  }","  ","  if (arguments.length === 3) {","    if (utils.isFunction(options)) {","      callback = options;","      options = {};","    }","  }","    ","  // find the root of the project","  return projectTools.getProjectRoot(dir || process.cwd()).then(function (rootDir) {","","    if (!rootDir) {","      return Q.reject(new Error('The specified directory does not appear to contain a valid manifoldjs project.'));","    }","    ","    // load the specified platform","    return platformTools.loadPlatforms([platformId]).then(function (platformModules) {","      // run the app for the platform","      if (platformModules && platformModules.length > 0) {","        var platform = platformModules[0];","        log.debug('Launching the \\'' + platform.name + '\\' app ...');","        return Q.ninvoke(platform, 'run', rootDir, options).catch(function (err) {","          return Q.reject(new CustomError('Failed to launch the ' + platform.name + ' app.', err));","        });","      }","","      return Q.resolve();","    });","  })","  .nodeify(callback);  ","}","","function openApp (platformId, dir, options, callback) {","  // validate arguments","  if (arguments.length < 2) {","    return Q.reject(new Error('One or more required arguments are missing.')).nodeify(callback);","  }","  ","  if (arguments.length === 3) {","    if (utils.isFunction(options)) {","      callback = options;","      options = {};","    }","  }","    ","  // find the root of the project","  return projectTools.getProjectRoot(dir || process.cwd()).then(function (rootDir) {","","    if (!rootDir) {","      return Q.reject(new Error('The specified directory does not appear to contain a valid manifoldjs project.'));","    }","    ","    // load the specified platform","    return platformTools.loadPlatforms([platformId]).then(function (platformModules) {","      // open the app for the platform","      if (platformModules && platformModules.length > 0) {","        var platform = platformModules[0];    ","        log.debug('Opening the \\'' + platform.name + '\\' app...');","        return Q.ninvoke(platform, 'open', rootDir, options).catch(function (err) {","          return Q.reject(new CustomError('Failed to open the ' + platform.name + ' app.', err));","        });        ","      }","","      return Q.resolve();","    });","  })","  .nodeify(callback);  ","}","","module.exports = {","  createApps: createApps,","  packageApps: packageApps,","  runApp: runApp,","  openApp: openApp","};",""],"l":{"3":1,"5":1,"7":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"24":0,"27":0,"28":0,"33":1,"34":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"50":0,"51":0,"56":1,"59":0,"60":0,"63":0,"64":0,"65":0,"66":0,"71":0,"72":0,"75":0,"78":0,"80":0,"84":0,"88":0,"89":0,"90":0,"91":0,"92":0,"95":0,"99":0,"102":0,"109":1,"112":0,"113":0,"116":0,"117":0,"118":0,"119":0,"124":0,"126":0,"127":0,"131":0,"133":0,"134":0,"135":0,"136":0,"137":0,"140":0,"144":0,"147":0,"153":1,"155":0,"156":0,"159":0,"160":0,"161":0,"162":0,"167":0,"169":0,"170":0,"174":0,"176":0,"177":0,"178":0,"179":0,"180":0,"184":0,"190":1,"192":0,"193":0,"196":0,"197":0,"198":0,"199":0,"204":0,"206":0,"207":0,"211":0,"213":0,"214":0,"215":0,"216":0,"217":0,"221":0,"227":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/projectTools.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs-lib/lib/projectTools.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"fnMap":{"1":{"name":"openVisualStudioProject","line":12,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":66}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":96},"end":{"line":14,"column":111}}},"3":{"name":"searchForTelemetryFile","line":21,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":38}}},"4":{"name":"(anonymous_4)","line":24,"loc":{"start":{"line":24,"column":47},"end":{"line":24,"column":63}}},"5":{"name":"(anonymous_5)","line":30,"loc":{"start":{"line":30,"column":10},"end":{"line":30,"column":25}}},"6":{"name":"(anonymous_6)","line":36,"loc":{"start":{"line":36,"column":9},"end":{"line":36,"column":25}}},"7":{"name":"isProjectRoot","line":50,"loc":{"start":{"line":50,"column":0},"end":{"line":50,"column":29}}},"8":{"name":"(anonymous_8)","line":55,"loc":{"start":{"line":55,"column":40},"end":{"line":55,"column":57}}},"9":{"name":"(anonymous_9)","line":56,"loc":{"start":{"line":56,"column":32},"end":{"line":56,"column":48}}},"10":{"name":"(anonymous_10)","line":65,"loc":{"start":{"line":65,"column":54},"end":{"line":65,"column":72}}},"11":{"name":"(anonymous_11)","line":70,"loc":{"start":{"line":70,"column":36},"end":{"line":70,"column":54}}},"12":{"name":"(anonymous_12)","line":72,"loc":{"start":{"line":72,"column":25},"end":{"line":72,"column":43}}},"13":{"name":"getProjectRoot","line":80,"loc":{"start":{"line":80,"column":0},"end":{"line":80,"column":30}}},"14":{"name":"(anonymous_14)","line":83,"loc":{"start":{"line":83,"column":33},"end":{"line":83,"column":51}}},"15":{"name":"(anonymous_15)","line":89,"loc":{"start":{"line":89,"column":44},"end":{"line":89,"column":64}}},"16":{"name":"(anonymous_16)","line":99,"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":28}}},"17":{"name":"(anonymous_17)","line":105,"loc":{"start":{"line":105,"column":47},"end":{"line":105,"column":65}}},"18":{"name":"getProjectPlatforms","line":113,"loc":{"start":{"line":113,"column":0},"end":{"line":113,"column":35}}},"19":{"name":"(anonymous_19)","line":117,"loc":{"start":{"line":117,"column":51},"end":{"line":117,"column":70}}},"20":{"name":"(anonymous_20)","line":124,"loc":{"start":{"line":124,"column":46},"end":{"line":124,"column":63}}},"21":{"name":"(anonymous_21)","line":125,"loc":{"start":{"line":125,"column":35},"end":{"line":125,"column":51}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":5,"column":21}},"2":{"start":{"line":7,"column":0},"end":{"line":10,"column":47}},"3":{"start":{"line":12,"column":0},"end":{"line":18,"column":1}},"4":{"start":{"line":13,"column":2},"end":{"line":13,"column":84}},"5":{"start":{"line":14,"column":2},"end":{"line":17,"column":21}},"6":{"start":{"line":15,"column":4},"end":{"line":15,"column":115}},"7":{"start":{"line":21,"column":0},"end":{"line":48,"column":1}},"8":{"start":{"line":23,"column":2},"end":{"line":23,"column":60}},"9":{"start":{"line":24,"column":2},"end":{"line":47,"column":5}},"10":{"start":{"line":26,"column":4},"end":{"line":28,"column":5}},"11":{"start":{"line":27,"column":6},"end":{"line":27,"column":17}},"12":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"13":{"start":{"line":33,"column":6},"end":{"line":33,"column":16}},"14":{"start":{"line":38,"column":4},"end":{"line":40,"column":5}},"15":{"start":{"line":39,"column":6},"end":{"line":39,"column":18}},"16":{"start":{"line":43,"column":4},"end":{"line":43,"column":45}},"17":{"start":{"line":44,"column":4},"end":{"line":46,"column":5}},"18":{"start":{"line":45,"column":6},"end":{"line":45,"column":48}},"19":{"start":{"line":50,"column":0},"end":{"line":77,"column":1}},"20":{"start":{"line":52,"column":2},"end":{"line":52,"column":48}},"21":{"start":{"line":55,"column":2},"end":{"line":76,"column":5}},"22":{"start":{"line":56,"column":4},"end":{"line":68,"column":7}},"23":{"start":{"line":59,"column":6},"end":{"line":61,"column":7}},"24":{"start":{"line":60,"column":8},"end":{"line":60,"column":32}},"25":{"start":{"line":64,"column":6},"end":{"line":64,"column":45}},"26":{"start":{"line":65,"column":6},"end":{"line":67,"column":9}},"27":{"start":{"line":66,"column":8},"end":{"line":66,"column":24}},"28":{"start":{"line":70,"column":4},"end":{"line":75,"column":7}},"29":{"start":{"line":72,"column":6},"end":{"line":74,"column":9}},"30":{"start":{"line":73,"column":8},"end":{"line":73,"column":22}},"31":{"start":{"line":80,"column":0},"end":{"line":111,"column":1}},"32":{"start":{"line":83,"column":2},"end":{"line":110,"column":5}},"33":{"start":{"line":84,"column":4},"end":{"line":86,"column":5}},"34":{"start":{"line":85,"column":6},"end":{"line":85,"column":17}},"35":{"start":{"line":89,"column":4},"end":{"line":97,"column":7}},"36":{"start":{"line":90,"column":6},"end":{"line":96,"column":7}},"37":{"start":{"line":92,"column":8},"end":{"line":92,"column":54}},"38":{"start":{"line":93,"column":8},"end":{"line":95,"column":9}},"39":{"start":{"line":94,"column":10},"end":{"line":94,"column":44}},"40":{"start":{"line":102,"column":4},"end":{"line":109,"column":5}},"41":{"start":{"line":103,"column":6},"end":{"line":103,"column":52}},"42":{"start":{"line":104,"column":6},"end":{"line":108,"column":7}},"43":{"start":{"line":105,"column":8},"end":{"line":107,"column":11}},"44":{"start":{"line":106,"column":10},"end":{"line":106,"column":36}},"45":{"start":{"line":113,"column":0},"end":{"line":134,"column":1}},"46":{"start":{"line":115,"column":2},"end":{"line":115,"column":57}},"47":{"start":{"line":117,"column":2},"end":{"line":133,"column":5}},"48":{"start":{"line":119,"column":4},"end":{"line":121,"column":5}},"49":{"start":{"line":120,"column":6},"end":{"line":120,"column":115}},"50":{"start":{"line":124,"column":4},"end":{"line":132,"column":7}},"51":{"start":{"line":125,"column":6},"end":{"line":129,"column":9}},"52":{"start":{"line":128,"column":8},"end":{"line":128,"column":53}},"53":{"start":{"line":131,"column":6},"end":{"line":131,"column":23}},"54":{"start":{"line":136,"column":0},"end":{"line":141,"column":2}}},"branchMap":{"1":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":4}},{"start":{"line":26,"column":4},"end":{"line":26,"column":4}}]},"2":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":32,"column":4}},{"start":{"line":32,"column":4},"end":{"line":32,"column":4}}]},"3":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},{"start":{"line":38,"column":4},"end":{"line":38,"column":4}}]},"4":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":44,"column":4}},{"start":{"line":44,"column":4},"end":{"line":44,"column":4}}]},"5":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":6},"end":{"line":59,"column":6}},{"start":{"line":59,"column":6},"end":{"line":59,"column":6}}]},"6":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"7":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":6},"end":{"line":90,"column":6}},{"start":{"line":90,"column":6},"end":{"line":90,"column":6}}]},"8":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":93,"column":8}},{"start":{"line":93,"column":8},"end":{"line":93,"column":8}}]},"9":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":4},"end":{"line":102,"column":4}},{"start":{"line":102,"column":4},"end":{"line":102,"column":4}}]},"10":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":6},"end":{"line":104,"column":6}},{"start":{"line":104,"column":6},"end":{"line":104,"column":6}}]},"11":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":17},"end":{"line":106,"column":23}},{"start":{"line":106,"column":27},"end":{"line":106,"column":35}}]},"12":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":24},"end":{"line":117,"column":27}},{"start":{"line":117,"column":31},"end":{"line":117,"column":44}}]},"13":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":4},"end":{"line":119,"column":4}},{"start":{"line":119,"column":4},"end":{"line":119,"column":4}}]}},"code":["﻿'use strict';","","var fs = require('fs'),","    path = require('path'),","    Q = require('q');","","var CustomError = require('./customError'),","    exec = require('./processTools').exec, ","    log = require('./log'),","    platformTools = require('./platformTools');","","function openVisualStudioProject (visualStudioFilePath, callback) {","  log.info('Opening the Visual Studio project \\'' + visualStudioFilePath + '\\'...');","  return exec('cmd', ['/c', visualStudioFilePath], { statusMessage: 'Opening project ' }).catch(function (err) {","    return Q.reject(new CustomError('Failed to open the Visual Studio file \"' + visualStudioFilePath + '\".', err));","  })","  .nodeify(callback);","}","","// searches for the telemetry file present in every platform project","function searchForTelemetryFile (dir) {"," ","  var telemetryFile = path.join(dir, 'generationInfo.json');","  return Q.nfcall(fs.stat, telemetryFile).then(function (info) {","    // return current directory if the name matches and it's a file","    if (info.isFile()) {","      return dir;","    }","  })","  .catch (function (err) {","    // report any error other than not found","    if (err.code !== 'ENOENT') {","      throw err;","    }    ","  })","  .then (function (root) {","    // if a result was found, return it","    if (root) {","      return root;","    }","    ","    // search parent directory unless we are already at the root","    var parentPath = path.resolve(dir, '..');    ","    if (parentPath !== dir) {","      return searchForTelemetryFile(parentPath);    ","    }","  });","}","","function isProjectRoot (dir) {","  // get available platform IDs  ","  var platforms = platformTools.listPlatforms();","  ","  // search child platform folders  ","  return Q.nfcall(fs.readdir, dir).then(function (files) {    ","    var searchTasks = files.map(function (file) {","","      // skip folders not matching a platform ID","      if (platforms.indexOf(file) < 0) {","        return Q.resolve(false);","      }","","      // search for telemetry file in the platform folder      ","      var platformDir = path.join(dir, file);","      return searchForTelemetryFile(platformDir).then(function (result) {","        return !!result;","      });","    });","    ","    return Q.all(searchTasks).then (function (values) {","      // verify if any platform folder contained a telemetry file      ","      return values.some(function (result) {","        return result;","      });","    });","  });","}","","// given a path within a manifoldjs project, returns its root","function getProjectRoot (dir) {","","  // check if this is the project root","  return isProjectRoot(dir).then(function (isRoot) {","    if (isRoot) {","      return dir;","    }","        ","    // search for a platform folder containing telemetry file","    return searchForTelemetryFile(dir).then(function (filePath) {","      if (filePath) {","        // start search for project root from the platform folder","        var parentPath = path.resolve(filePath, '..');    ","        if (parentPath !== dir) {","          return getProjectRoot(parentPath);","        }","      }","    });","  })","  .then(function (rootPath) {","    // could be a false positive (e.g. 'cordova/platforms' folder)","    // search parent directories unless already at the root","    if (rootPath) {","      var parentPath = path.resolve(rootPath, '..');    ","      if (parentPath !== dir) {","        return getProjectRoot(parentPath).then(function (result) {          ","          return result || rootPath;","        });","      }","    }","  });","}","","function getProjectPlatforms (dir) {","  // get available platform IDs  ","  var availablePlatforms = platformTools.listPlatforms();","  ","  return getProjectRoot(dir || process.cwd()).then(function (rootDir) {","","    if (!rootDir) {","      return Q.reject(new Error('The specified directory does not appear to contain a valid manifoldjs project.'));","    }","  ","    // search child platform folders  ","    return Q.nfcall(fs.readdir, rootDir).then(function (files) {    ","      var platforms = files.filter(function (file) {","","        // filter folders not matching a platform ID","        return availablePlatforms.indexOf(file) >= 0;","      });","      ","      return platforms;","    });","  });","}","","module.exports = {","  openVisualStudioProject: openVisualStudioProject,","  isProjectRoot: isProjectRoot,","  getProjectRoot: getProjectRoot,","  getProjectPlatforms: getProjectPlatforms","};",""],"l":{"3":1,"7":1,"12":1,"13":0,"14":0,"15":0,"21":1,"23":0,"24":0,"26":0,"27":0,"32":0,"33":0,"38":0,"39":0,"43":0,"44":0,"45":0,"50":1,"52":0,"55":0,"56":0,"59":0,"60":0,"64":0,"65":0,"66":0,"70":0,"72":0,"73":0,"80":1,"83":0,"84":0,"85":0,"89":0,"90":0,"92":0,"93":0,"94":0,"102":0,"103":0,"104":0,"105":0,"106":0,"113":1,"115":0,"117":0,"119":0,"120":0,"124":0,"125":0,"128":0,"131":0,"136":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/Gruntfile.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/Gruntfile.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"b":{},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":3,"loc":{"start":{"line":3,"column":17},"end":{"line":3,"column":34}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":118,"column":2}},"2":{"start":{"line":5,"column":2},"end":{"line":5,"column":31}},"3":{"start":{"line":7,"column":2},"end":{"line":7,"column":37}},"4":{"start":{"line":9,"column":2},"end":{"line":104,"column":5}},"5":{"start":{"line":106,"column":2},"end":{"line":106,"column":85}},"6":{"start":{"line":107,"column":2},"end":{"line":107,"column":100}},"7":{"start":{"line":109,"column":2},"end":{"line":109,"column":61}},"8":{"start":{"line":111,"column":2},"end":{"line":111,"column":68}},"9":{"start":{"line":112,"column":2},"end":{"line":112,"column":61}},"10":{"start":{"line":114,"column":2},"end":{"line":114,"column":78}},"11":{"start":{"line":116,"column":2},"end":{"line":116,"column":47}},"12":{"start":{"line":117,"column":2},"end":{"line":117,"column":66}}},"branchMap":{},"code":["'use strict';","","module.exports = function (grunt) {","  // Show elapsed time at the end","  require('time-grunt')(grunt);","  // Load all grunt tasks","  require('load-grunt-tasks')(grunt);","","  grunt.initConfig({","    jshint: {","      options: {","        jshintrc: '.jshintrc',","        reporter: require('jshint-stylish')","      },","      gruntfile: {","        src: ['Gruntfile.js']","      },","      js: {","        src: ['*.js', 'lib/**/*.js']","      },","      test: {","        src: ['test/**/*.js']","      },","      teamcity: {","        options: {","          reporter: require('jshint-teamcity')","        },","        src: ['*.js', 'lib/**/*.js', 'test/**/*.js', 'Gruntfile.js']","      },","    },","    mochaTest: {","      test: {","        options: {","          reporter: 'spec',","          require: 'coverage/blanket'","        },","        src: ['test/**/*.js']","      },","      'html-cov': {","        options: {","          reporter: 'html-cov',","          quiet: true,","          captureFile: 'coverage.html'","        },","        src: ['lib/**/*.js']","      },","      // The travis-cov reporter will fail the tests if the","      // coverage falls below the threshold configured in package.json","      'travis-cov': {","        options: {","          reporter: 'travis-cov'","        },","        src: ['lib/**/*.js']","      },","      'teamcity-test': {","        options: {","          reporter: 'mocha-teamcity-reporter'","        },","        src: ['test/**/*.js']","      }","    },","    watch: {","      gruntfile: {","        files: '<%= jshint.gruntfile.src %>',","        tasks: ['jshint:gruntfile']","      },","      js: {","        files: '<%= jshint.js.src %>',","        tasks: ['jshint:js', 'mochaTest']","      },","      test: {","        files: '<%= jshint.test.src %>',","        tasks: ['jshint:test', 'mochaTest']","      },","      windows10: {","        files: ['../manifoldjs-windows10/lib/*.js'],","        tasks: ['sync:windows10']","      },","      lib: {","        files: ['../manifoldjs-lib/lib/*.js', '../manifoldjs-lib/lib/manifestTools/*.js'],","        tasks: ['sync:lib']","      }","    },","    sync: {","    \twindows10: {","      \t\tfiles: [{","      \t\t\tsrc: ['../manifoldjs-windows10/lib/*.js'],","      \t\t\tdest: 'node_modules/manifoldjs-windows10'  ","      \t\t}],","      \t\tverbose: true,","      \t\tfailOnError: true,","      \t\tupdateAndDelete: false","\t\t  },","      lib: {","            files: [{","              src: ['../manifoldjs-lib/lib/*.js','../manifoldjs-lib/lib/manifestTools/*.js'],","              dest: 'node_modules/manifoldjs-lib'  ","            }],","            verbose: true,","            failOnError: true,","            updateAndDelete: false","      }","\t  }","  });                ","","  grunt.registerTask('jshint-all', ['jshint:js', 'jshint:test', 'jshint:gruntfile']);","  grunt.registerTask('tests-all', ['mochaTest:test', 'mochaTest:html-cov', 'mochaTest:travis-cov']);","","  grunt.registerTask('default', ['jshint-all', 'tests-all']);","","  grunt.registerTask('teamcity-tests', ['mochaTest:teamcity-test']);","  grunt.registerTask('teamcity-jshint', ['jshint:teamcity']);","","  grunt.registerTask('teamcity-build', ['teamcity-jshint', 'teamcity-tests']);","","  grunt.registerTask('development', ['watch']);","  grunt.registerTask('forceSync', ['sync:windows10', 'sync:lib']);","};",""],"l":{"3":1,"5":0,"7":0,"9":0,"106":0,"107":0,"109":0,"111":0,"112":0,"114":0,"116":0,"117":0}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/manifoldjs.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/manifoldjs.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":2,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0},"b":{"1":[0,0],"2":[0,0,0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"checkParameters","line":19,"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":34}}},"2":{"name":"getPlatformHelpText","line":87,"loc":{"start":{"line":87,"column":0},"end":{"line":87,"column":31}}},"3":{"name":"(anonymous_3)","line":94,"loc":{"start":{"line":94,"column":35},"end":{"line":94,"column":61}}},"4":{"name":"(anonymous_4)","line":161,"loc":{"start":{"line":161,"column":28},"end":{"line":161,"column":60}}},"5":{"name":"(anonymous_5)","line":191,"loc":{"start":{"line":191,"column":16},"end":{"line":191,"column":31}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":36}},"3":{"start":{"line":8,"column":0},"end":{"line":12,"column":34}},"4":{"start":{"line":14,"column":0},"end":{"line":14,"column":37}},"5":{"start":{"line":17,"column":0},"end":{"line":17,"column":76}},"6":{"start":{"line":19,"column":0},"end":{"line":79,"column":1}},"7":{"start":{"line":20,"column":2},"end":{"line":20,"column":22}},"8":{"start":{"line":21,"column":2},"end":{"line":52,"column":3}},"9":{"start":{"line":22,"column":4},"end":{"line":22,"column":48}},"10":{"start":{"line":23,"column":4},"end":{"line":47,"column":5}},"11":{"start":{"line":25,"column":8},"end":{"line":25,"column":24}},"12":{"start":{"line":26,"column":8},"end":{"line":26,"column":27}},"13":{"start":{"line":27,"column":8},"end":{"line":27,"column":14}},"14":{"start":{"line":29,"column":8},"end":{"line":29,"column":24}},"15":{"start":{"line":30,"column":8},"end":{"line":30,"column":31}},"16":{"start":{"line":31,"column":8},"end":{"line":31,"column":14}},"17":{"start":{"line":33,"column":8},"end":{"line":33,"column":24}},"18":{"start":{"line":34,"column":8},"end":{"line":34,"column":32}},"19":{"start":{"line":35,"column":8},"end":{"line":35,"column":14}},"20":{"start":{"line":37,"column":8},"end":{"line":37,"column":24}},"21":{"start":{"line":38,"column":8},"end":{"line":38,"column":28}},"22":{"start":{"line":39,"column":8},"end":{"line":39,"column":14}},"23":{"start":{"line":41,"column":8},"end":{"line":41,"column":24}},"24":{"start":{"line":42,"column":8},"end":{"line":42,"column":36}},"25":{"start":{"line":43,"column":8},"end":{"line":43,"column":14}},"26":{"start":{"line":45,"column":8},"end":{"line":45,"column":24}},"27":{"start":{"line":46,"column":8},"end":{"line":46,"column":14}},"28":{"start":{"line":49,"column":4},"end":{"line":51,"column":5}},"29":{"start":{"line":50,"column":6},"end":{"line":50,"column":109}},"30":{"start":{"line":54,"column":2},"end":{"line":56,"column":3}},"31":{"start":{"line":55,"column":4},"end":{"line":55,"column":87}},"32":{"start":{"line":60,"column":2},"end":{"line":65,"column":3}},"33":{"start":{"line":61,"column":4},"end":{"line":61,"column":54}},"34":{"start":{"line":62,"column":4},"end":{"line":64,"column":5}},"35":{"start":{"line":63,"column":6},"end":{"line":63,"column":46}},"36":{"start":{"line":68,"column":2},"end":{"line":72,"column":3}},"37":{"start":{"line":69,"column":4},"end":{"line":71,"column":5}},"38":{"start":{"line":70,"column":6},"end":{"line":70,"column":87}},"39":{"start":{"line":74,"column":2},"end":{"line":78,"column":3}},"40":{"start":{"line":75,"column":4},"end":{"line":77,"column":5}},"41":{"start":{"line":76,"column":6},"end":{"line":76,"column":113}},"42":{"start":{"line":82,"column":0},"end":{"line":82,"column":55}},"43":{"start":{"line":87,"column":0},"end":{"line":102,"column":1}},"44":{"start":{"line":89,"column":2},"end":{"line":89,"column":24}},"45":{"start":{"line":92,"column":2},"end":{"line":92,"column":20}},"46":{"start":{"line":94,"column":2},"end":{"line":101,"column":70}},"47":{"start":{"line":95,"column":4},"end":{"line":95,"column":65}},"48":{"start":{"line":96,"column":4},"end":{"line":98,"column":5}},"49":{"start":{"line":97,"column":6},"end":{"line":97,"column":19}},"50":{"start":{"line":100,"column":4},"end":{"line":100,"column":59}},"51":{"start":{"line":104,"column":0},"end":{"line":143,"column":34}},"52":{"start":{"line":145,"column":0},"end":{"line":147,"column":1}},"53":{"start":{"line":146,"column":2},"end":{"line":146,"column":17}},"54":{"start":{"line":149,"column":0},"end":{"line":149,"column":48}},"55":{"start":{"line":150,"column":0},"end":{"line":153,"column":1}},"56":{"start":{"line":151,"column":2},"end":{"line":151,"column":30}},"57":{"start":{"line":152,"column":2},"end":{"line":152,"column":18}},"58":{"start":{"line":155,"column":0},"end":{"line":155,"column":35}},"59":{"start":{"line":156,"column":0},"end":{"line":156,"column":30}},"60":{"start":{"line":158,"column":0},"end":{"line":160,"column":1}},"61":{"start":{"line":159,"column":2},"end":{"line":159,"column":28}},"62":{"start":{"line":161,"column":0},"end":{"line":199,"column":3}},"63":{"start":{"line":162,"column":2},"end":{"line":169,"column":3}},"64":{"start":{"line":163,"column":4},"end":{"line":163,"column":16}},"65":{"start":{"line":164,"column":4},"end":{"line":164,"column":97}},"66":{"start":{"line":165,"column":4},"end":{"line":165,"column":86}},"67":{"start":{"line":166,"column":4},"end":{"line":166,"column":48}},"68":{"start":{"line":167,"column":4},"end":{"line":167,"column":97}},"69":{"start":{"line":168,"column":4},"end":{"line":168,"column":16}},"70":{"start":{"line":171,"column":2},"end":{"line":171,"column":14}},"71":{"start":{"line":172,"column":2},"end":{"line":189,"column":3}},"72":{"start":{"line":173,"column":4},"end":{"line":173,"column":36}},"73":{"start":{"line":175,"column":7},"end":{"line":189,"column":3}},"74":{"start":{"line":176,"column":4},"end":{"line":176,"column":37}},"75":{"start":{"line":178,"column":7},"end":{"line":189,"column":3}},"76":{"start":{"line":179,"column":4},"end":{"line":179,"column":45}},"77":{"start":{"line":181,"column":7},"end":{"line":189,"column":3}},"78":{"start":{"line":182,"column":4},"end":{"line":182,"column":40}},"79":{"start":{"line":184,"column":7},"end":{"line":189,"column":3}},"80":{"start":{"line":185,"column":4},"end":{"line":185,"column":41}},"81":{"start":{"line":188,"column":4},"end":{"line":188,"column":41}},"82":{"start":{"line":191,"column":2},"end":{"line":198,"column":5}},"83":{"start":{"line":192,"column":4},"end":{"line":192,"column":34}},"84":{"start":{"line":193,"column":4},"end":{"line":195,"column":5}},"85":{"start":{"line":194,"column":6},"end":{"line":194,"column":130}},"86":{"start":{"line":197,"column":4},"end":{"line":197,"column":22}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":2},"end":{"line":21,"column":2}},{"start":{"line":21,"column":2},"end":{"line":21,"column":2}}]},"2":{"line":23,"type":"switch","locations":[{"start":{"line":24,"column":6},"end":{"line":27,"column":14}},{"start":{"line":28,"column":6},"end":{"line":31,"column":14}},{"start":{"line":32,"column":6},"end":{"line":35,"column":14}},{"start":{"line":36,"column":6},"end":{"line":39,"column":14}},{"start":{"line":40,"column":6},"end":{"line":43,"column":14}},{"start":{"line":44,"column":6},"end":{"line":46,"column":14}}]},"3":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":49,"column":4}},{"start":{"line":49,"column":4},"end":{"line":49,"column":4}}]},"4":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":2},"end":{"line":54,"column":2}},{"start":{"line":54,"column":2},"end":{"line":54,"column":2}}]},"5":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":2},"end":{"line":60,"column":2}},{"start":{"line":60,"column":2},"end":{"line":60,"column":2}}]},"6":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":62,"column":4}},{"start":{"line":62,"column":4},"end":{"line":62,"column":4}}]},"7":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":2},"end":{"line":68,"column":2}},{"start":{"line":68,"column":2},"end":{"line":68,"column":2}}]},"8":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"9":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":2},"end":{"line":74,"column":2}},{"start":{"line":74,"column":2},"end":{"line":74,"column":2}}]},"10":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"11":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":4},"end":{"line":96,"column":4}},{"start":{"line":96,"column":4},"end":{"line":96,"column":4}}]},"12":{"line":100,"type":"cond-expr","locations":[{"start":{"line":100,"column":32},"end":{"line":100,"column":35}},{"start":{"line":100,"column":38},"end":{"line":100,"column":40}}]},"13":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":0},"end":{"line":145,"column":0}},{"start":{"line":145,"column":0},"end":{"line":145,"column":0}}]},"14":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":0},"end":{"line":150,"column":0}},{"start":{"line":150,"column":0},"end":{"line":150,"column":0}}]},"15":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":0},"end":{"line":158,"column":0}},{"start":{"line":158,"column":0},"end":{"line":158,"column":0}}]},"16":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":2},"end":{"line":162,"column":2}},{"start":{"line":162,"column":2},"end":{"line":162,"column":2}}]},"17":{"line":162,"type":"binary-expr","locations":[{"start":{"line":162,"column":6},"end":{"line":162,"column":10}},{"start":{"line":162,"column":14},"end":{"line":162,"column":29}}]},"18":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":2},"end":{"line":172,"column":2}},{"start":{"line":172,"column":2},"end":{"line":172,"column":2}}]},"19":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":7},"end":{"line":175,"column":7}},{"start":{"line":175,"column":7},"end":{"line":175,"column":7}}]},"20":{"line":178,"type":"if","locations":[{"start":{"line":178,"column":7},"end":{"line":178,"column":7}},{"start":{"line":178,"column":7},"end":{"line":178,"column":7}}]},"21":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":7},"end":{"line":181,"column":7}},{"start":{"line":181,"column":7},"end":{"line":181,"column":7}}]},"22":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":7},"end":{"line":184,"column":7}},{"start":{"line":184,"column":7},"end":{"line":184,"column":7}}]},"23":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":4},"end":{"line":193,"column":4}},{"start":{"line":193,"column":4},"end":{"line":193,"column":4}}]}},"code":["//#!/usr/bin/env node","'use strict';","","var Q = require('q');","","var lib = require('manifoldjs-lib');","","var log = lib.log,","    packageTools = lib.packageTools,","    platformTools = lib.platformTools,","    manifestTools = lib.manifestTools,","    validations = lib.validations; ","","var commands = require('./commands');","","// Get the available formats for the --forceManifestFormat parameter","var availableManifestFormats = manifestTools.listAvailableManifestFormats();","","function checkParameters(program) {","  var unknownArgs = 0;","  if (program.args.length > 0) {","    var command = program.args[0].toLowerCase();","    switch (command) {","      case 'run':","        unknownArgs = 3;","        program.run = true;","        break;","      case 'package':        ","        unknownArgs = 2;","        program.package = true;","        break;","      case 'platform':","        unknownArgs = 4;","        program.platform = true;","        break;        ","      case 'open':","        unknownArgs = 3;","        program.open = true;","        break;","      case 'visualstudio':","        unknownArgs = 1;","        program.visualstudio = true;","        break;","      default:","        unknownArgs = 1;","        break;","    }","  } else {","    if (!program.manifest) {","      return 'You must specify either the web site URL or the location of a W3C manifest (-m | --manifest).';","    }","  }","","  if (program.args.length > unknownArgs) {","    return 'Unexpected parameters - [' + program.args.slice(unknownArgs).join() + '].';","  }","","  // check platforms","  // TODO: loading registered platforms twice, by calling platformsValid and to generate the usage text. Consolidate!","  if (program.platforms) {","    var platforms = program.platforms.split(/[\\s,]+/);","    if (!validations.platformsValid(platforms)) {","      return 'Invalid platform(s) specified.';","    }","  }","","  // check log level","  if (program.loglevel) {","    if (!validations.logLevelValid(program.loglevel)) {","      return 'Invalid loglevel specified. Valid values are: debug, info, warn, error.';","    }","  }","","  if (program.forceManifestFormat) {","    if (!validations.manifestFormatValid(program.forceManifestFormat)) {","      return 'Invalid manifest format specified. Valid values are: ' + availableManifestFormats.join(', ') + '.';","    }","  }","}","","// get the list of registered platforms","var availablePlatforms = platformTools.listPlatforms();","","// dynamically generates the help text with the list of registered","// platforms and splits it into multiple lines so that it doesn't ","// break the layout of the usage text","function getPlatformHelpText() {","  // offset of the column where the parameter help text starts","  var columnOffset = 38;","","  // maximum width of the help text ","  var maxWidth = 80;","","  return availablePlatforms.reduce(function (list, platform) {  ","    var segmentLength = list.length - list.lastIndexOf('\\n') - 1;","    if (segmentLength > maxWidth - columnOffset) {","      list += '\\n';","    }","    ","    return list + '[' + (list ? ',' : '') + platform + ']';  ","  }, '').replace(/\\n/g, '\\n' + new Array(columnOffset - 1).join(' '));  ","}","","var program = require('commander')","             .usage('<website-url> [options]' +","                    '\\n         manifoldjs -m <manifest-location> [options]' +","                    '\\n           options:' +","                    '\\n             -d | --directory, -s | --short-name, -l | --loglevel,' +","                    '\\n             -p | --platforms, -m | --manifest, -f | --forceManifestFormat, -c | --crosswalk' +                    ","                    '\\n  -or-' +","                    '\\n         manifoldjs package [project-directory] [options]' +","                    '\\n           options:' +","                    '\\n             -l | --loglevel,  -p | --platforms, -S | --Sign' +","                    '\\n' +","                    '\\n  -or-' +","                    '\\n         manifoldjs platform add <platform-id> <source> [options]' +","                    '\\n         manifoldjs platform remove <platform-id> [options]' +","                    '\\n         manifoldjs platform list [options]' +","                    '\\n           options:' +","                    '\\n             -l | --loglevel' +","                    '\\n' +","                    '\\n  -or-' +","                    '\\n         manifoldjs run <platform> [project-directory]' +","                    '\\n           options:' +","                    '\\n             -l | --loglevel' +","                    '\\n' +","                    '\\n  -or-' +","                    '\\n         manifoldjs open <platform> [project-directory]' +","                    '\\n           options:' +","                    '\\n             -l | --loglevel')","             .option('-d, --directory <app-dir>', 'path to the generated project files')","             .option('-s, --shortname <short-name>', 'application short name')","             .option('-l, --loglevel <log-level>', 'debug|info|warn|error', 'warn')","             .option('-p, --platforms <platforms>', getPlatformHelpText()) ","             .option('-b, --build', 'forces the building process', false)","             .option('-m, --manifest <manifest-location>', 'location of the W3C Web App manifest\\n                                    ' +","                                                    'file (URL or local path)')","             .option('-c, --crosswalk', 'enable Crosswalk for Android', false)","             .option('-S, --Sign', 'return a signed package in windows', false)","             .option('-w, --webAppToolkit', 'adds the Web App Toolkit cordova plugin', false)","             .option('-f, --forceManifestFormat <format>', availableManifestFormats.join('|'))","             .option('-W, --DotWeb', 'generate a .web package in windows', false)","             .parse(process.argv);","","if (!process.argv.slice(2).length) {","  program.help();","}","","var validationResult = checkParameters(program);","if (validationResult) {","  log.error(validationResult);","  process.exit(1);","}","","global.logLevel = program.loglevel;","log.setLevel(global.logLevel);","","if (process.env.NODE_ENV === 'development') {","  Q.longStackSupport = true;","}","packageTools.checkForUpdate(function (err, updateAvailable) {","  if (!err && updateAvailable) {","    log.write();","    log.write('*******************************************************************************');","    log.write('A new version of ManifoldJS is available (v' + updateAvailable + ').');","    log.write('We recommend that you upgrade.');","    log.write('*******************************************************************************');","    log.write();","  }","  ","  var command;","  if (program.run) {","    command = commands.run(program);","  }","  else if (program.open) {","    command = commands.open(program);","  }","  else if (program.visualstudio) {","    command = commands.visualstudio(program);","  }","  else if (program.package) {","    command = commands.package(program);","  }","  else if (program.platform) {","    command = commands.platform(program);","  }","  else {","    command = commands.generate(program);","  }","  ","  command.catch(function (err) {","    var errmsg = err.getMessage();","    if (log.getLevel() !== log.levels.DEBUG) {","      errmsg += '\\nFor more information, run manifoldjs with the diagnostics level set to debug (e.g. manifoldjs [...] -l debug)';","    }","","    log.error(errmsg);","  });","});",""],"l":{"4":2,"6":2,"8":2,"14":2,"17":2,"19":1,"20":0,"21":0,"22":0,"23":0,"25":0,"26":0,"27":0,"29":0,"30":0,"31":0,"33":0,"34":0,"35":0,"37":0,"38":0,"39":0,"41":0,"42":0,"43":0,"45":0,"46":0,"49":0,"50":0,"54":0,"55":0,"60":0,"61":0,"62":0,"63":0,"68":0,"69":0,"70":0,"74":0,"75":0,"76":0,"82":2,"87":1,"89":0,"92":0,"94":0,"95":0,"96":0,"97":0,"100":0,"104":0,"145":0,"146":0,"149":0,"150":0,"151":0,"152":0,"155":0,"156":0,"158":0,"159":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"171":0,"172":0,"173":0,"175":0,"176":0,"178":0,"179":0,"181":0,"182":0,"184":0,"185":0,"188":0,"191":0,"192":0,"193":0,"194":0,"197":0}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/index.js","s":{"1":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":10,"column":2}}},"branchMap":{},"code":["'use strict';","","module.exports = {","  generate:     require('./generate'),","  package:      require('./package'),","  run:          require('./run'),","  open:         require('./open'),","  visualstudio: require('./visualstudio'),","  platform:     require('./platform')","};",""],"l":{"3":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/generate.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/generate.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"getW3cManifest","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":77}}},"2":{"name":"resolveStartURL","line":19,"loc":{"start":{"line":19,"column":2},"end":{"line":19,"column":46}}},"3":{"name":"generateApp","line":58,"loc":{"start":{"line":58,"column":0},"end":{"line":58,"column":30}}},"4":{"name":"callback","line":65,"loc":{"start":{"line":65,"column":2},"end":{"line":65,"column":40}}},"5":{"name":"(anonymous_5)","line":101,"loc":{"start":{"line":101,"column":85},"end":{"line":101,"column":107}}},"6":{"name":"(anonymous_6)","line":104,"loc":{"start":{"line":104,"column":47},"end":{"line":104,"column":62}}},"7":{"name":"(anonymous_7)","line":110,"loc":{"start":{"line":110,"column":10},"end":{"line":110,"column":22}}},"8":{"name":"(anonymous_8)","line":114,"loc":{"start":{"line":114,"column":11},"end":{"line":114,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":4,"column":27}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":21}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":36}},"4":{"start":{"line":10,"column":0},"end":{"line":14,"column":22}},"5":{"start":{"line":16,"column":0},"end":{"line":16,"column":33}},"6":{"start":{"line":18,"column":0},"end":{"line":56,"column":1}},"7":{"start":{"line":19,"column":2},"end":{"line":29,"column":3}},"8":{"start":{"line":20,"column":4},"end":{"line":22,"column":5}},"9":{"start":{"line":21,"column":6},"end":{"line":21,"column":41}},"10":{"start":{"line":24,"column":4},"end":{"line":28,"column":5}},"11":{"start":{"line":25,"column":6},"end":{"line":25,"column":89}},"12":{"start":{"line":27,"column":6},"end":{"line":27,"column":47}},"13":{"start":{"line":31,"column":2},"end":{"line":36,"column":3}},"14":{"start":{"line":32,"column":4},"end":{"line":32,"column":43}},"15":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"16":{"start":{"line":34,"column":6},"end":{"line":34,"column":69}},"17":{"start":{"line":38,"column":2},"end":{"line":55,"column":3}},"18":{"start":{"line":39,"column":4},"end":{"line":39,"column":56}},"19":{"start":{"line":40,"column":4},"end":{"line":48,"column":5}},"20":{"start":{"line":42,"column":6},"end":{"line":42,"column":72}},"21":{"start":{"line":43,"column":6},"end":{"line":43,"column":95}},"22":{"start":{"line":46,"column":6},"end":{"line":46,"column":68}},"23":{"start":{"line":47,"column":6},"end":{"line":47,"column":91}},"24":{"start":{"line":49,"column":9},"end":{"line":55,"column":3}},"25":{"start":{"line":51,"column":4},"end":{"line":51,"column":57}},"26":{"start":{"line":52,"column":4},"end":{"line":52,"column":80}},"27":{"start":{"line":54,"column":4},"end":{"line":54,"column":78}},"28":{"start":{"line":58,"column":0},"end":{"line":122,"column":1}},"29":{"start":{"line":60,"column":2},"end":{"line":60,"column":32}},"30":{"start":{"line":61,"column":2},"end":{"line":61,"column":84}},"31":{"start":{"line":63,"column":2},"end":{"line":63,"column":27}},"32":{"start":{"line":65,"column":2},"end":{"line":117,"column":3}},"33":{"start":{"line":66,"column":4},"end":{"line":68,"column":5}},"34":{"start":{"line":67,"column":6},"end":{"line":67,"column":34}},"35":{"start":{"line":71,"column":4},"end":{"line":73,"column":70}},"36":{"start":{"line":76,"column":4},"end":{"line":78,"column":5}},"37":{"start":{"line":77,"column":6},"end":{"line":77,"column":58}},"38":{"start":{"line":80,"column":4},"end":{"line":80,"column":86}},"39":{"start":{"line":83,"column":4},"end":{"line":83,"column":39}},"40":{"start":{"line":85,"column":4},"end":{"line":85,"column":23}},"41":{"start":{"line":86,"column":4},"end":{"line":98,"column":5}},"42":{"start":{"line":87,"column":6},"end":{"line":87,"column":52}},"43":{"start":{"line":89,"column":6},"end":{"line":89,"column":48}},"44":{"start":{"line":91,"column":6},"end":{"line":97,"column":7}},"45":{"start":{"line":92,"column":8},"end":{"line":92,"column":59}},"46":{"start":{"line":93,"column":8},"end":{"line":96,"column":9}},"47":{"start":{"line":94,"column":10},"end":{"line":94,"column":126}},"48":{"start":{"line":95,"column":10},"end":{"line":95,"column":41}},"49":{"start":{"line":101,"column":4},"end":{"line":116,"column":7}},"50":{"start":{"line":102,"column":6},"end":{"line":108,"column":7}},"51":{"start":{"line":103,"column":8},"end":{"line":103,"column":37}},"52":{"start":{"line":104,"column":8},"end":{"line":107,"column":11}},"53":{"start":{"line":105,"column":10},"end":{"line":105,"column":185}},"54":{"start":{"line":111,"column":6},"end":{"line":111,"column":48}},"55":{"start":{"line":112,"column":6},"end":{"line":112,"column":32}},"56":{"start":{"line":115,"column":6},"end":{"line":115,"column":34}},"57":{"start":{"line":119,"column":2},"end":{"line":119,"column":83}},"58":{"start":{"line":121,"column":2},"end":{"line":121,"column":26}},"59":{"start":{"line":124,"column":0},"end":{"line":124,"column":29}}},"branchMap":{"1":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":20,"column":4}},{"start":{"line":20,"column":4},"end":{"line":20,"column":4}}]},"2":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":24,"column":4}},{"start":{"line":24,"column":4},"end":{"line":24,"column":4}}]},"3":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":2},"end":{"line":31,"column":2}},{"start":{"line":31,"column":2},"end":{"line":31,"column":2}}]},"4":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":33,"column":4}},{"start":{"line":33,"column":4},"end":{"line":33,"column":4}}]},"5":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":2},"end":{"line":38,"column":2}},{"start":{"line":38,"column":2},"end":{"line":38,"column":2}}]},"6":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]},"7":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":8},"end":{"line":40,"column":25}},{"start":{"line":40,"column":29},"end":{"line":40,"column":51}}]},"8":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":9},"end":{"line":49,"column":9}},{"start":{"line":49,"column":9},"end":{"line":49,"column":9}}]},"9":{"line":61,"type":"cond-expr","locations":[{"start":{"line":61,"column":36},"end":{"line":61,"column":67}},{"start":{"line":61,"column":70},"end":{"line":61,"column":83}}]},"10":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":4},"end":{"line":66,"column":4}},{"start":{"line":66,"column":4},"end":{"line":66,"column":4}}]},"11":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":38},"end":{"line":71,"column":69}},{"start":{"line":72,"column":38},"end":{"line":72,"column":63}},{"start":{"line":73,"column":38},"end":{"line":73,"column":69}}]},"12":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"13":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"14":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":6},"end":{"line":91,"column":6}},{"start":{"line":91,"column":6},"end":{"line":91,"column":6}}]},"15":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":93,"column":8}},{"start":{"line":93,"column":8},"end":{"line":93,"column":8}}]},"16":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":6},"end":{"line":102,"column":6}},{"start":{"line":102,"column":6},"end":{"line":102,"column":6}}]}},"code":["'use strict';","","var url = require('url'),","    path = require('path');","","var Q = require('q');","","var lib = require('manifoldjs-lib');","","var log = lib.log,","    manifestTools = lib.manifestTools,","    platformTools = lib.platformTools,","    projectBuilder = lib.projectBuilder,","    utils = lib.utils;","","var build = require('./package');","","function getW3cManifest(siteUrl, manifestLocation, manifestFormat, callback) {","  function resolveStartURL(err, manifestInfo) {","    if (err) {","      return callback(err, manifestInfo);","    }","","    if (manifestInfo.format === lib.constants.BASE_MANIFEST_FORMAT) {","      return manifestTools.validateAndNormalizeStartUrl(siteUrl, manifestInfo, callback);","    } else {","      return callback(undefined, manifestInfo);","    }","  }","  ","  if (siteUrl) {","    var parsedSiteUrl = url.parse(siteUrl);","    if (!parsedSiteUrl.hostname) {","      return callback(new Error('The site URL is not a valid URL.'));","    }","  }","","  if (manifestLocation) {","    var parsedManifestUrl = url.parse(manifestLocation);","    if (parsedManifestUrl && parsedManifestUrl.host) {","      // download manifest from remote location","      log.info('Downloading manifest from ' + manifestLocation + '...');","      manifestTools.downloadManifestFromUrl(manifestLocation, manifestFormat, resolveStartURL);","    } else {","      // read local manifest file","      log.info('Reading manifest file ' + manifestLocation + '...');","      manifestTools.getManifestFromFile(manifestLocation, manifestFormat, resolveStartURL);","    }","  } else if (siteUrl) {    ","    // scan a site to retrieve its manifest","    log.info('Scanning ' + siteUrl + ' for manifest...');","    manifestTools.getManifestFromSite(siteUrl, manifestFormat, resolveStartURL);","  } else {","    return callback(new Error('A site URL or manifest should be specified.'));","  }","}","","function generateApp(program) {","  ","  var siteUrl = program.args[0];","  var rootDir = program.directory ? path.resolve(program.directory) : process.cwd();","  ","  var deferred = Q.defer();","  ","  function callback (err, manifestInfo) {","    if (err) {","      return deferred.reject(err);","    }","    ","    // Fix #145: don't require a short name","    manifestInfo.content.short_name = manifestInfo.content.short_name || ","                                      manifestInfo.content.name ||","                                      manifestInfo.default.short_name;","","    // if specified as a parameter, override the app's short name","    if (program.shortname) {","      manifestInfo.content.short_name = program.shortname;","    }"," ","    log.debug('Manifest contents:\\n' + JSON.stringify(manifestInfo.content, null, 4));","    ","    // add generatedFrom value to manifestInfo for telemetry","    manifestInfo.generatedFrom = 'CLI';","","    var platforms = [];","    if (program.platforms) {","      platforms = program.platforms.split(/[\\s,]+/);","    } else {","      platforms = platformTools.listPlatforms();","      // Remove edgeextension from the default platforms for W3C manifests","      if (manifestInfo.format === lib.constants.BASE_MANIFEST_FORMAT) {","        var edgeIndex = platforms.indexOf('edgeextension');","        if (edgeIndex > -1) {","          log.debug('Removing Edge Extension platform. The W3C manifest format is not currently supported by this platform.');","          platforms.splice(edgeIndex, 1);","        }","      }","    }","","    // Create the apps for the specified platforms","    return projectBuilder.createApps(manifestInfo, rootDir, platforms, program).then(function (projectDir) {","      if (program.build) {","        program.args[1] = projectDir;","        return build(program, platforms).catch(function (err) {","          log.warn('One or more platforms could not be built successfully. Correct any errors and then run manifoldjs package [project-directory] [options] to build the applications.');","          // return deferred.reject(err);","        });","      }","    })","    .then(function () {","      log.info('The application(s) are ready.');","      return deferred.resolve();","    })","    .catch(function (err) {","      return deferred.reject(err);","    });","  };","  ","  getW3cManifest(siteUrl, program.manifest, program.forceManifestFormat, callback);","  ","  return deferred.promise;","};","","module.exports = generateApp;"],"l":{"3":1,"6":1,"8":1,"10":1,"16":1,"18":1,"19":1,"20":0,"21":0,"24":0,"25":0,"27":0,"31":0,"32":0,"33":0,"34":0,"38":0,"39":0,"40":0,"42":0,"43":0,"46":0,"47":0,"49":0,"51":0,"52":0,"54":0,"58":1,"60":0,"61":0,"63":0,"65":1,"66":0,"67":0,"71":0,"76":0,"77":0,"80":0,"83":0,"85":0,"86":0,"87":0,"89":0,"91":0,"92":0,"93":0,"94":0,"95":0,"101":0,"102":0,"103":0,"104":0,"105":0,"111":0,"112":0,"115":0,"119":0,"121":0,"124":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/package.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/package.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"packageApps","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":41}}},"2":{"name":"(anonymous_2)","line":17,"loc":{"start":{"line":17,"column":63},"end":{"line":17,"column":91}}},"3":{"name":"(anonymous_3)","line":19,"loc":{"start":{"line":19,"column":33},"end":{"line":19,"column":53}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":5,"column":0},"end":{"line":7,"column":40}},"3":{"start":{"line":9,"column":0},"end":{"line":25,"column":1}},"4":{"start":{"line":10,"column":2},"end":{"line":14,"column":3}},"5":{"start":{"line":11,"column":4},"end":{"line":13,"column":46}},"6":{"start":{"line":16,"column":2},"end":{"line":16,"column":77}},"7":{"start":{"line":17,"column":2},"end":{"line":24,"column":5}},"8":{"start":{"line":19,"column":4},"end":{"line":21,"column":7}},"9":{"start":{"line":20,"column":6},"end":{"line":20,"column":53}},"10":{"start":{"line":23,"column":4},"end":{"line":23,"column":70}},"11":{"start":{"line":27,"column":0},"end":{"line":27,"column":29}}},"branchMap":{"1":{"line":10,"type":"if","locations":[{"start":{"line":10,"column":2},"end":{"line":10,"column":2}},{"start":{"line":10,"column":2},"end":{"line":10,"column":2}}]},"2":{"line":11,"type":"cond-expr","locations":[{"start":{"line":12,"column":16},"end":{"line":12,"column":49}},{"start":{"line":13,"column":16},"end":{"line":13,"column":45}}]},"3":{"line":16,"type":"cond-expr","locations":[{"start":{"line":16,"column":45},"end":{"line":16,"column":58}},{"start":{"line":16,"column":61},"end":{"line":16,"column":76}}]}},"code":["'use strict';","","var lib = require('manifoldjs-lib');","","var log = lib.log,","    platformTools= lib.platformTools,","    projectBuilder = lib.projectBuilder;","","function packageApps(program, platforms) {","  if (!platforms) {","    platforms = program.platforms ? ","                program.platforms.split(/[\\s,]+/) :","                platformTools.listPlatforms();","  }","","  var projectDir = program.args.length < 2 ? process.cwd() : program.args[1];","  return lib.projectTools.getProjectPlatforms(projectDir).then(function (projectPlatforms) {","    // exclude any platforms not present in the project","    platforms = platforms.filter(function (platform) {","      return projectPlatforms.indexOf(platform) >= 0;","    });","    ","    return projectBuilder.packageApps(platforms, projectDir, program); ","  });","}","","module.exports = packageApps;"],"l":{"3":1,"5":1,"9":1,"10":0,"11":0,"16":0,"17":0,"19":0,"20":0,"23":0,"27":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/run.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/run.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"runApp","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":21}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"3":{"start":{"line":7,"column":0},"end":{"line":8,"column":40}},"4":{"start":{"line":10,"column":0},"end":{"line":19,"column":1}},"5":{"start":{"line":12,"column":2},"end":{"line":14,"column":3}},"6":{"start":{"line":13,"column":4},"end":{"line":13,"column":63}},"7":{"start":{"line":16,"column":2},"end":{"line":16,"column":33}},"8":{"start":{"line":17,"column":2},"end":{"line":17,"column":77}},"9":{"start":{"line":18,"column":2},"end":{"line":18,"column":62}},"10":{"start":{"line":21,"column":0},"end":{"line":21,"column":24}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]},"2":{"line":17,"type":"cond-expr","locations":[{"start":{"line":17,"column":45},"end":{"line":17,"column":58}},{"start":{"line":17,"column":61},"end":{"line":17,"column":76}}]}},"code":["'use strict';","","var Q = require('q');","","var lib = require('manifoldjs-lib');","  ","var log = lib.log,","    projectBuilder = lib.projectBuilder;","    ","function runApp (program) {","","  if (program.args.length < 2) {","    return Q.reject(new Error('You must specify a platform.'));","  } ","  ","  var platform = program.args[1];","  var projectDir = program.args.length < 3 ? process.cwd() : program.args[2];","  return projectBuilder.runApp(platform, projectDir, program);","}","","module.exports = runApp;",""],"l":{"3":1,"5":1,"7":1,"10":1,"12":0,"13":0,"16":0,"17":0,"18":0,"21":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/open.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/open.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"openApp","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":27}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":21}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"3":{"start":{"line":7,"column":0},"end":{"line":8,"column":40}},"4":{"start":{"line":10,"column":0},"end":{"line":19,"column":1}},"5":{"start":{"line":12,"column":2},"end":{"line":14,"column":3}},"6":{"start":{"line":13,"column":4},"end":{"line":13,"column":63}},"7":{"start":{"line":16,"column":2},"end":{"line":16,"column":33}},"8":{"start":{"line":17,"column":2},"end":{"line":17,"column":77}},"9":{"start":{"line":18,"column":2},"end":{"line":18,"column":63}},"10":{"start":{"line":21,"column":0},"end":{"line":21,"column":25}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":2},"end":{"line":12,"column":2}},{"start":{"line":12,"column":2},"end":{"line":12,"column":2}}]},"2":{"line":17,"type":"cond-expr","locations":[{"start":{"line":17,"column":45},"end":{"line":17,"column":58}},{"start":{"line":17,"column":61},"end":{"line":17,"column":76}}]}},"code":["'use strict';","","var Q = require('q');","","var lib = require('manifoldjs-lib');","  ","var log = lib.log,","    projectBuilder = lib.projectBuilder;","    ","function openApp (program) {","","  if (program.args.length < 2) {","    return Q.reject(new Error('You must specify a platform.'));","  } ","  ","  var platform = program.args[1];","  var projectDir = program.args.length < 3 ? process.cwd() : program.args[2];","  return projectBuilder.openApp(platform, projectDir, program);","}","","module.exports = openApp;",""],"l":{"3":1,"5":1,"7":1,"10":1,"12":0,"13":0,"16":0,"17":0,"18":0,"21":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/visualstudio.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/visualstudio.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"isWindows10Version","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":38}}},"2":{"name":"getWindowsVersion","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":38}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":77},"end":{"line":20,"column":95}}},"4":{"name":"(anonymous_4)","line":23,"loc":{"start":{"line":23,"column":10},"end":{"line":23,"column":25}}},"5":{"name":"runApp","line":31,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":25}}},"6":{"name":"(anonymous_6)","line":38,"loc":{"start":{"line":38,"column":42},"end":{"line":38,"column":66}}},"7":{"name":"(anonymous_7)","line":39,"loc":{"start":{"line":39,"column":38},"end":{"line":39,"column":57}}},"8":{"name":"(anonymous_8)","line":42,"loc":{"start":{"line":42,"column":34},"end":{"line":42,"column":46}}},"9":{"name":"(anonymous_9)","line":47,"loc":{"start":{"line":47,"column":50},"end":{"line":47,"column":74}}},"10":{"name":"(anonymous_10)","line":50,"loc":{"start":{"line":50,"column":36},"end":{"line":50,"column":48}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":21}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"3":{"start":{"line":7,"column":0},"end":{"line":10,"column":18}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":29}},"5":{"start":{"line":14,"column":0},"end":{"line":16,"column":1}},"6":{"start":{"line":15,"column":2},"end":{"line":15,"column":29}},"7":{"start":{"line":18,"column":0},"end":{"line":27,"column":1}},"8":{"start":{"line":19,"column":2},"end":{"line":19,"column":44}},"9":{"start":{"line":20,"column":2},"end":{"line":26,"column":21}},"10":{"start":{"line":21,"column":4},"end":{"line":21,"column":32}},"11":{"start":{"line":24,"column":4},"end":{"line":24,"column":89}},"12":{"start":{"line":31,"column":0},"end":{"line":59,"column":1}},"13":{"start":{"line":33,"column":2},"end":{"line":33,"column":111}},"14":{"start":{"line":35,"column":2},"end":{"line":35,"column":27}},"15":{"start":{"line":37,"column":2},"end":{"line":37,"column":26}},"16":{"start":{"line":38,"column":2},"end":{"line":56,"column":5}},"17":{"start":{"line":39,"column":4},"end":{"line":55,"column":7}},"18":{"start":{"line":40,"column":6},"end":{"line":45,"column":7}},"19":{"start":{"line":41,"column":8},"end":{"line":41,"column":39}},"20":{"start":{"line":42,"column":8},"end":{"line":44,"column":11}},"21":{"start":{"line":43,"column":10},"end":{"line":43,"column":29}},"22":{"start":{"line":47,"column":6},"end":{"line":54,"column":9}},"23":{"start":{"line":48,"column":8},"end":{"line":53,"column":9}},"24":{"start":{"line":49,"column":10},"end":{"line":49,"column":39}},"25":{"start":{"line":50,"column":10},"end":{"line":52,"column":13}},"26":{"start":{"line":51,"column":12},"end":{"line":51,"column":31}},"27":{"start":{"line":58,"column":2},"end":{"line":58,"column":26}},"28":{"start":{"line":61,"column":0},"end":{"line":61,"column":24}}},"branchMap":{"1":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":6},"end":{"line":40,"column":6}},{"start":{"line":40,"column":6},"end":{"line":40,"column":6}}]},"2":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":10},"end":{"line":40,"column":17}},{"start":{"line":40,"column":21},"end":{"line":40,"column":39}},{"start":{"line":40,"column":43},"end":{"line":40,"column":70}}]},"3":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":8}},{"start":{"line":48,"column":8},"end":{"line":48,"column":8}}]},"4":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":12},"end":{"line":48,"column":19}},{"start":{"line":48,"column":23},"end":{"line":48,"column":41}}]}},"code":["'use strict';","","var Q = require('q');","","var lib = require('manifoldjs-lib');","","var CustomError = lib.CustomError,","    exec = lib.processTools.exec,","    fileTools = lib.fileTools,","    log = lib.log;","","var open = require('./open');","","function isWindows10Version (version) {","  return /^10/.test(version);","}","","function getWindowsVersion (callback) {","  log.debug('Obtaining Windows version...');","  exec('powershell', ['(Get-WmiObject win32_operatingsystem).version']).then(function (result) {","    return result.stdout.trim();","  })","  .catch (function (err) {","    return Q.reject(new CustomError('Failed to run the app for Windows platform.', err));    ","  })","  .nodeify(callback); ","}","","// implements the original behavior of the visualstudio command","//  open windows10 project, if available, otherwise, open the windows project","function runApp(program) {","  ","  log.warn('The \\'visualstudio\\' command is deprecated. Use \\'manifoldjs open <windows|windows10>\\' instead.');","  ","  var deferred = Q.defer();","  ","  var dir = process.cwd();","  fileTools.searchFile(dir, 'App.jsproj', function (err, results) {","    Q.ninvoke(getWindowsVersion).then(function (version) {","      if (results && results.length > 0 && isWindows10Version(version)) {","        program.args.push('windows10'); ","        return open(program).then(function () {","          deferred.resolve();","        });","      }","      ","      fileTools.searchFile(dir, 'CordovaApp.sln', function (err, results) {","        if (results && results.length > 0) {","          program.args.push('windows');","          return open(program).then(function () {","            deferred.resolve();","          });","        }","      });","    });","  });","  ","  return deferred.promise;","}","","module.exports = runApp;",""],"l":{"3":1,"5":1,"7":1,"12":1,"14":1,"15":0,"18":1,"19":0,"20":0,"21":0,"24":0,"31":1,"33":0,"35":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"47":0,"48":0,"49":0,"50":0,"51":0,"58":0,"61":1}},"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/platform.js":{"path":"/home/travis/build/npmtest/node-npmtest-manifoldjs/node_modules/manifoldjs/commands/platform.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"addPlatform","line":15,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":31}}},"2":{"name":"(anonymous_2)","line":27,"loc":{"start":{"line":27,"column":60},"end":{"line":27,"column":72}}},"3":{"name":"removePlatform","line":33,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":34}}},"4":{"name":"(anonymous_4)","line":40,"loc":{"start":{"line":40,"column":55},"end":{"line":40,"column":67}}},"5":{"name":"listPlatforms","line":45,"loc":{"start":{"line":45,"column":0},"end":{"line":45,"column":33}}},"6":{"name":"platformCommands","line":56,"loc":{"start":{"line":56,"column":0},"end":{"line":56,"column":36}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":4,"column":27}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":21}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":36}},"4":{"start":{"line":10,"column":0},"end":{"line":12,"column":22}},"5":{"start":{"line":15,"column":0},"end":{"line":30,"column":1}},"6":{"start":{"line":16,"column":2},"end":{"line":18,"column":3}},"7":{"start":{"line":17,"column":4},"end":{"line":17,"column":66}},"8":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"9":{"start":{"line":21,"column":4},"end":{"line":21,"column":145}},"10":{"start":{"line":24,"column":2},"end":{"line":24,"column":49}},"11":{"start":{"line":25,"column":2},"end":{"line":25,"column":31}},"12":{"start":{"line":27,"column":2},"end":{"line":29,"column":5}},"13":{"start":{"line":28,"column":4},"end":{"line":28,"column":81}},"14":{"start":{"line":33,"column":0},"end":{"line":43,"column":1}},"15":{"start":{"line":34,"column":2},"end":{"line":36,"column":3}},"16":{"start":{"line":35,"column":4},"end":{"line":35,"column":66}},"17":{"start":{"line":38,"column":2},"end":{"line":38,"column":49}},"18":{"start":{"line":40,"column":2},"end":{"line":42,"column":5}},"19":{"start":{"line":41,"column":4},"end":{"line":41,"column":83}},"20":{"start":{"line":45,"column":0},"end":{"line":54,"column":1}},"21":{"start":{"line":46,"column":2},"end":{"line":53,"column":3}},"22":{"start":{"line":47,"column":4},"end":{"line":47,"column":50}},"23":{"start":{"line":48,"column":4},"end":{"line":48,"column":66}},"24":{"start":{"line":49,"column":4},"end":{"line":49,"column":23}},"25":{"start":{"line":52,"column":4},"end":{"line":52,"column":25}},"26":{"start":{"line":56,"column":0},"end":{"line":75,"column":1}},"27":{"start":{"line":57,"column":2},"end":{"line":59,"column":3}},"28":{"start":{"line":58,"column":4},"end":{"line":58,"column":95}},"29":{"start":{"line":61,"column":2},"end":{"line":61,"column":46}},"30":{"start":{"line":62,"column":2},"end":{"line":74,"column":3}},"31":{"start":{"line":64,"column":6},"end":{"line":64,"column":34}},"32":{"start":{"line":67,"column":6},"end":{"line":67,"column":37}},"33":{"start":{"line":70,"column":6},"end":{"line":70,"column":36}},"34":{"start":{"line":73,"column":6},"end":{"line":73,"column":82}},"35":{"start":{"line":77,"column":0},"end":{"line":77,"column":34}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":2},"end":{"line":16,"column":2}},{"start":{"line":16,"column":2},"end":{"line":16,"column":2}}]},"2":{"line":20,"type":"if","locations":[{"start":{"line":20,"column":2},"end":{"line":20,"column":2}},{"start":{"line":20,"column":2},"end":{"line":20,"column":2}}]},"3":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":2},"end":{"line":34,"column":2}},{"start":{"line":34,"column":2},"end":{"line":34,"column":2}}]},"4":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":2},"end":{"line":57,"column":2}},{"start":{"line":57,"column":2},"end":{"line":57,"column":2}}]},"5":{"line":62,"type":"switch","locations":[{"start":{"line":63,"column":4},"end":{"line":64,"column":34}},{"start":{"line":66,"column":4},"end":{"line":67,"column":37}},{"start":{"line":69,"column":4},"end":{"line":70,"column":36}},{"start":{"line":72,"column":4},"end":{"line":73,"column":82}}]}},"code":["'use strict';","","var fs = require('fs'),","    path = require('path');","","var Q = require('q');","","var lib = require('manifoldjs-lib');","","var log = lib.log,","    platformTools = lib.platformTools,","    utils = lib.utils;","","// registers a new platform module    ","function addPlatform (program) {","  if (program.args.length < 3) {","    return Q.reject(new Error('You must specify a platform ID.'));    ","  }","  ","  if (program.args.length < 4) {","    return Q.reject(new Error('You must specify a package source for the platform. This can be an npm package, a GitHub URL, or a local path.'));    ","  }","  ","  var platformId = program.args[2].toLowerCase();","  var source = program.args[3];","  ","  return platformTools.addPlatform(platformId, source).then(function () {","    log.info('The \\'' + platformId + '\\' platform was registered successfully.');      ","  });","}","","// removes a registered platform module","function removePlatform (program) {","  if (program.args.length < 3) {","    return Q.reject(new Error('You must specify a platform ID.'));    ","  }"," ","  var platformId = program.args[2].toLowerCase();","  ","  return platformTools.removePlatform(platformId).then(function () {","    log.info('The \\'' + platformId + '\\' platform was unregistered successfully.');      ","  });","}","","function listPlatforms (program) {","  try {","    var platforms = platformTools.listPlatforms();  ","    log.write('Available platforms are: ' + platforms.join(', '));","    return Q.resolve();","  }","  catch (err) {","    return Q.reject(err);","  }","}","","function platformCommands (program) {","  if (program.args.length < 2) {","    return Q.reject(new Error('You must specify a platform operation: add, remove, or list.'));    ","  }","","  var command = program.args[1].toLowerCase();","  switch (command) {","    case 'add':","      return addPlatform(program);","    ","    case 'remove':","      return removePlatform(program);","      ","    case 'list':","      return listPlatforms(program);","      ","    default:","      return Q.reject(new Error('Unknown option \\'' + command + '\\' specified.'));","  }  ","}","","module.exports = platformCommands; ","    ","",""],"l":{"3":1,"6":1,"8":1,"10":1,"15":1,"16":0,"17":0,"20":0,"21":0,"24":0,"25":0,"27":0,"28":0,"33":1,"34":0,"35":0,"38":0,"40":0,"41":0,"45":1,"46":0,"47":0,"48":0,"49":0,"52":0,"56":1,"57":0,"58":0,"61":0,"62":0,"64":0,"67":0,"70":0,"73":0,"77":1}}}